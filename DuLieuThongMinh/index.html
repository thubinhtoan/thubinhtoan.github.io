<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ª≠ T√†i To√°n H·ªçc: Thu Th·∫≠p & Ph√¢n Lo·∫°i D·ªØ Li·ªáu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
        }

        .card {
            background: white;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .option-btn {
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            background-color: #f0f9ff;
            border-color: #3b82f6;
        }

        .option-btn.correct {
            background-color: #dcfce7 !important;
            border-color: #22c55e !important;
            color: #14532d !important;
        }

        .option-btn.wrong {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #7f1d1d !important;
        }

        .emoji-feedback {
            font-size: 3rem;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            0% { transform: scale(0) rotate(-45deg); opacity: 0; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .progress-bar {
            transition: width 0.5s ease-in-out;
        }

        .badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-3xl">
        <!-- Start Screen -->
        <div id="start-screen" class="card p-8 text-center">
            <h1 class="text-4xl font-extrabold text-blue-600 mb-2">D·ªØ Li·ªáu Th√¥ng Minh</h1>
            <p class="text-gray-500 mb-8 text-lg">Chinh ph·ª•c ki·∫øn th·ª©c To√°n 8 - Ch∆∞∆°ng 4</p>
            
            <div class="grid grid-cols-2 gap-4 mb-8 text-left">
                <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                    <span class="text-2xl mb-2 block">üìä</span>
                    <h3 class="font-bold text-gray-800">15 C√¢u h·ªèi</h3>
                    <p class="text-sm text-gray-600">T·ª´ nh·∫≠n bi·∫øt ƒë·∫øn v·∫≠n d·ª•ng cao</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-xl border border-purple-100">
                    <span class="text-2xl mb-2 block">üèÜ</span>
                    <h3 class="font-bold text-gray-800">Th·ª≠ th√°ch</h3>
                    <p class="text-sm text-gray-600">Thu th·∫≠p sao v√† ƒëi·ªÉm s·ªë</p>
                </div>
            </div>

            <button onclick="startGame()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl shadow-lg transform transition hover:scale-105 text-xl">
                B·∫Øt ƒê·∫ßu Ngay! üöÄ
            </button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <!-- Header -->
            <div class="flex justify-between items-center mb-4 bg-white p-4 rounded-xl shadow-sm">
                <div>
                    <span class="text-gray-400 text-sm font-bold uppercase">C√¢u h·ªèi</span>
                    <div class="text-2xl font-black text-gray-800"><span id="current-question">1</span><span class="text-gray-300 text-lg">/15</span></div>
                </div>
                <div class="flex flex-col items-end">
                    <span class="text-gray-400 text-sm font-bold uppercase">ƒêi·ªÉm s·ªë</span>
                    <div class="text-2xl font-black text-blue-600" id="score">0</div>
                </div>
            </div>

            <!-- Progress -->
            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                <div id="progress" class="bg-blue-600 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
            </div>

            <!-- Question Card -->
            <div class="card p-6 md:p-8 mb-6 relative overflow-hidden">
                <div id="level-badge" class="badge bg-green-100 text-green-700 absolute top-6 right-6">Nh·∫≠n bi·∫øt</div>
                <h2 id="question-text" class="text-xl md:text-2xl font-bold text-gray-800 mt-4 mb-6 leading-relaxed">
                    ƒêang t·∫£i c√¢u h·ªèi...
                </h2>

                <div id="options-container" class="grid gap-3">
                    <!-- Options will be injected here -->
                </div>
            </div>

            <!-- Feedback Modal (Inline) -->
            <div id="feedback-area" class="hidden transform transition-all duration-300">
                <div id="feedback-card" class="card p-6 border-l-4">
                    <div class="flex items-start gap-4">
                        <div id="feedback-icon" class="emoji-feedback">üòé</div>
                        <div class="flex-1">
                            <h3 id="feedback-title" class="text-xl font-bold mb-1">Tuy·ªát v·ªùi!</h3>
                            <div class="text-sm font-bold text-gray-400 uppercase mb-2">Gi·∫£i th√≠ch:</div>
                            <p id="feedback-text" class="text-gray-700 leading-relaxed"></p>
                        </div>
                    </div>
                    <button onclick="nextQuestion()" class="mt-4 w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 px-6 rounded-lg transition flex items-center justify-center gap-2">
                        C√¢u ti·∫øp theo <span class="text-xl">‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden card p-8 text-center">
            <div class="mb-6">
                <div class="inline-block p-6 rounded-full bg-yellow-100 mb-4">
                    <span class="text-6xl">üéâ</span>
                </div>
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Ho√†n Th√†nh Xu·∫•t S·∫Øc!</h2>
                <p class="text-gray-500">B·∫°n ƒë√£ chinh ph·ª•c b√†i ki·ªÉm tra</p>
            </div>

            <div class="bg-gray-50 rounded-xl p-6 mb-8">
                <div class="text-gray-500 font-medium mb-1">T·ªïng ƒëi·ªÉm c·ªßa b·∫°n</div>
                <div class="text-5xl font-black text-blue-600 mb-4" id="final-score">0</div>
                <p id="result-message" class="text-gray-600 font-medium">B·∫°n l√† m·ªôt chuy√™n gia d·ªØ li·ªáu th·ª±c th·ª•!</p>
            </div>

            <button onclick="location.reload()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-xl shadow-lg transition">
                Ch∆°i L·∫°i üîÑ
            </button>
        </div>
    </div>

    <!-- Audio Effects -->
    <audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2955/2955-preview.mp3"></audio>
    <audio id="sound-finish" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

  <script>
  const questions = [
    // 6 C√¢u Nh·∫≠n bi·∫øt
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "D·ªØ li·ªáu n√†o sau ƒë√¢y l√† s·ªë li·ªáu (d·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng)?",
      options: ["M√†u s·∫Øc y√™u th√≠ch c·ªßa c√°c b·∫°n trong l·ªõp", "N∆°i sinh c·ªßa c√°c th√†nh vi√™n trong gia ƒë√¨nh", "Chi·ªÅu cao (t√≠nh b·∫±ng cm) c·ªßa c√°c h·ªçc sinh l·ªõp 8A", "M·ª©c ƒë·ªô h√†i l√≤ng v·ªÅ d·ªãch v·ª• (R·∫•t h√†i l√≤ng, H√†i l√≤ng...)"],
      correct: 2,
      rationale: "S·ªë li·ªáu (d·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng) l√† d·ªØ li·ªáu c√≥ th·ªÉ c√¢n, ƒëo, ƒëong, ƒë·∫øm ƒë∆∞·ª£c v√† bi·ªÉu th·ªã b·∫±ng c√°c con s·ªë. Chi·ªÅu cao l√† m·ªôt con s·ªë c·ª• th·ªÉ."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "D·ªØ li·ªáu n√†o sau ƒë√¢y l√† d·ªØ li·ªáu ƒë·ªãnh t√≠nh?",
      options: ["S·ªë ƒëi·ªÉm ƒë·∫°t ƒë∆∞·ª£c trong b√†i ki·ªÉm tra To√°n", "Danh s√°ch c√°c lo·∫°i nh·∫°c c·ª• m√† h·ªçc sinh bi·∫øt ch∆°i", "S·ªë l∆∞·ª£ng h·ªçc sinh v·∫Øng m·∫∑t trong tu·∫ßn", "Nhi·ªát ƒë·ªô trung b√¨nh c√°c ng√†y trong th√°ng"],
      correct: 1,
      rationale: "D·ªØ li·ªáu ƒë·ªãnh t√≠nh l√† d·ªØ li·ªáu m√¥ t·∫£ t√≠nh ch·∫•t, ƒë·∫∑c ƒëi·ªÉm (kh√¥ng ph·∫£i l√† s·ªë). T√™n c√°c lo·∫°i nh·∫°c c·ª• l√† d·ªØ li·ªáu ƒë·ªãnh t√≠nh."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "Ph∆∞∆°ng ph√°p n√†o sau ƒë√¢y KH√îNG PH·∫¢I l√† ph∆∞∆°ng ph√°p thu th·∫≠p d·ªØ li·ªáu?",
      options: ["Quan s√°t", "L√†m th√≠ nghi·ªám", "L·∫≠p b·∫£ng t·∫ßn s·ªë", "Ph·ªèng v·∫•n"],
      correct: 2,
      rationale: "Quan s√°t, l√†m th√≠ nghi·ªám, ph·ªèng v·∫•n l√† c√°c c√°ch ƒë·ªÉ L·∫§Y d·ªØ li·ªáu. L·∫≠p b·∫£ng t·∫ßn s·ªë l√† c√°ch ƒë·ªÉ T·ªî CH·ª®C v√† PH√ÇN T√çCH d·ªØ li·ªáu sau khi ƒë√£ thu th·∫≠p."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "D·ªØ li·ªáu r·ªùi r·∫°c l√† g√¨?",
      options: ["D·ªØ li·ªáu ch·ªâ nh·∫≠n c√°c gi√° tr·ªã h·ªØu h·∫°n ho·∫∑c ƒë·∫øm ƒë∆∞·ª£c", "D·ªØ li·ªáu c√≥ th·ªÉ nh·∫≠n m·ªçi gi√° tr·ªã trong m·ªôt kho·∫£ng", "D·ªØ li·ªáu kh√¥ng th·ªÉ ƒëo l∆∞·ªùng b·∫±ng s·ªë", "D·ªØ li·ªáu v·ªÅ s·ªü th√≠ch c√° nh√¢n"],
      correct: 0,
      rationale: "D·ªØ li·ªáu r·ªùi r·∫°c l√† d·∫°ng d·ªØ li·ªáu s·ªë m√† c√°c gi√° tr·ªã c·ªßa n√≥ l√† c√°c s·ªë ƒë·∫øm ƒë∆∞·ª£c (v√≠ d·ª•: s·ªë h·ªçc sinh, s·ªë xe m√°y...), kh√¥ng th·ªÉ nh·∫≠n c√°c gi√° tr·ªã trung gian nh∆∞ 1.5 ng∆∞·ªùi."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "Trong c√°c d·ªØ li·ªáu sau, ƒë√¢u l√† d·ªØ li·ªáu li√™n t·ª•c?",
      options: ["S·ªë con trong m·ªôt gia ƒë√¨nh", "S·ªë b√†n th·∫Øng trong m·ªôt tr·∫≠n ƒë·∫•u", "C√¢n n·∫∑ng c·ªßa tr·∫ª s∆° sinh", "S·ªë quy·ªÉn s√°ch tr√™n k·ªá"],
      correct: 2,
      rationale: "C√¢n n·∫∑ng l√† d·ªØ li·ªáu li√™n t·ª•c v√¨ n√≥ c√≥ th·ªÉ nh·∫≠n b·∫•t k·ª≥ gi√° tr·ªã n√†o trong m·ªôt kho·∫£ng (v√≠ d·ª•: 3.2 kg, 3.25 kg...). C√°c d·ªØ li·ªáu c√≤n l·∫°i l√† s·ªë ƒë·∫øm (r·ªùi r·∫°c)."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "ƒê·ªÉ bi·∫øt √Ω ki·∫øn c·ªßa c√°c b·∫°n trong l·ªõp v·ªÅ ƒë·ªãa ƒëi·ªÉm tham quan h√®, l·ªõp tr∆∞·ªüng n√™n d√πng c√°ch n√†o?",
      options: ["Quan s√°t b·∫ßu tr·ªùi", "Tra c·ª©u Internet", "Ph·ªèng v·∫•n ho·∫∑c ph√°t phi·∫øu h·ªèi", "L√†m th√≠ nghi·ªám h√≥a h·ªçc"],
      correct: 2,
      rationale: "ƒê·ªÉ thu th·∫≠p √Ω ki·∫øn, quan ƒëi·ªÉm c·ªßa m·ªôt nh√≥m ng∆∞·ªùi, ph∆∞∆°ng ph√°p ph√π h·ª£p nh·∫•t l√† ph·ªèng v·∫•n tr·ª±c ti·∫øp ho·∫∑c ph√°t phi·∫øu kh·∫£o s√°t."
    },

    // 5 C√¢u Th√¥ng hi·ªÉu
    {
      level: "Th√¥ng hi·ªÉu",
      question: "D·ªØ li·ªáu 'X·∫øp lo·∫°i h·ªçc l·ª±c: T·ªët, Kh√°, ƒê·∫°t, Ch∆∞a ƒë·∫°t' thu·ªôc lo·∫°i d·ªØ li·ªáu n√†o?",
      options: ["D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng (s·ªë li·ªáu)", "D·ªØ li·ªáu ƒë·ªãnh t√≠nh (kh√¥ng th·ªÉ so s√°nh th·ª© b·∫≠c)", "D·ªØ li·ªáu ƒë·ªãnh t√≠nh (c√≥ th·ªÉ so s√°nh th·ª© b·∫≠c)", "D·ªØ li·ªáu li√™n t·ª•c"],
      correct: 2,
      rationale: "ƒê√¢y l√† d·ªØ li·ªáu ƒë·ªãnh t√≠nh (ch·ªØ) nh∆∞ng c√≥ t√≠nh th·ª© b·∫≠c r√µ r√†ng (T·ªët > Kh√° > ƒê·∫°t > Ch∆∞a ƒë·∫°t)."
    },
    {
      level: "Th√¥ng hi·ªÉu",
      question: "B·∫°n Lan ghi l·∫°i s·ªë xe m√°y ƒëi qua c·ªïng tr∆∞·ªùng trong 5 ph√∫t. D·ªØ li·ªáu Lan thu ƒë∆∞·ª£c thu·ªôc lo·∫°i n√†o?",
      options: ["D·ªØ li·ªáu ƒë·ªãnh t√≠nh", "D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng (r·ªùi r·∫°c)", "D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng (li√™n t·ª•c)", "D·ªØ li·ªáu th·ª© c·∫•p"],
      correct: 1,
      rationale: "S·ªë xe m√°y l√† k·∫øt qu·∫£ c·ªßa vi·ªác ƒë·∫øm (1 xe, 2 xe...), n√™n n√≥ l√† d·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng r·ªùi r·∫°c."
    },
    {
      level: "Th√¥ng hi·ªÉu",
      question: "M·ªôt b·∫£ng th·ªëng k√™ v·ªÅ lo·∫°i nh·∫°c y√™u th√≠ch c√≥ t·ªïng ph·∫ßn trƒÉm l√† 110%. ƒêi·ªÅu n√†y cho th·∫•y g√¨?",
      options: ["D·ªØ li·ªáu r·∫•t ch√≠nh x√°c", "D·ªØ li·ªáu kh√¥ng h·ª£p l√Ω", "Nhi·ªÅu ng∆∞·ªùi th√≠ch nghe nh·∫°c", "C·∫ßn thu th·∫≠p th√™m d·ªØ li·ªáu"],
      correct: 1,
      rationale: "T·ªïng ph·∫ßn trƒÉm c·ªßa c√°c th√†nh ph·∫ßn trong m·ªôt t·ªïng th·ªÉ kh√¥ng th·ªÉ v∆∞·ª£t qu√° 100%. N·∫øu t·ªïng l√† 110%, d·ªØ li·ªáu ƒë√≥ b·ªã sai ho·∫∑c kh√¥ng h·ª£p l√Ω."
    },
    {
      level: "Th√¥ng hi·ªÉu",
      question: "Mu·ªën bi·∫øt nhi·ªát ƒë·ªô thay ƒë·ªïi nh∆∞ th·∫ø n√†o trong m·ªôt ng√†y t·∫°i H√† N·ªôi, ta n√™n d√πng ph∆∞∆°ng ph√°p thu th·∫≠p n√†o?",
      options: ["Ph·ªèng v·∫•n ng∆∞·ªùi ƒëi ƒë∆∞·ªùng", "S·ª≠ d·ª•ng nhi·ªát k·∫ø ƒë·ªÉ ƒëo t·∫°i c√°c th·ªùi ƒëi·ªÉm ho·∫∑c tra c·ª©u t·ª´ tr·∫°m kh√≠ t∆∞·ª£ng", "ƒê·∫øm s·ªë ng∆∞·ªùi m·∫∑c √°o ·∫•m", "T·ªï ch·ª©c cu·ªôc thi d·ª± b√°o th·ªùi ti·∫øt"],
      correct: 1,
      rationale: "Nhi·ªát ƒë·ªô l√† s·ªë li·ªáu c·∫ßn ƒë·ªô ch√≠nh x√°c cao, c·∫ßn d√πng d·ª•ng c·ª• ƒëo l∆∞·ªùng (nhi·ªát k·∫ø) ho·∫∑c l·∫•y t·ª´ ngu·ªìn uy t√≠n (tr·∫°m kh√≠ t∆∞·ª£ng)."
    },
    {
      level: "Th√¥ng hi·ªÉu",
      question: "D·ªØ li·ªáu n√†o sau ƒë√¢y KH√îNG h·ª£p l√Ω khi n√≥i v·ªÅ tu·ªïi c·ªßa h·ªçc sinh l·ªõp 8?",
      options: ["13 tu·ªïi", "14 tu·ªïi", "15 tu·ªïi", "-5 tu·ªïi"],
      correct: 3,
      rationale: "Tu·ªïi c·ªßa con ng∆∞·ªùi kh√¥ng th·ªÉ l√† s·ªë √¢m. Do ƒë√≥, '-5 tu·ªïi' l√† d·ªØ li·ªáu sai/kh√¥ng h·ª£p l√Ω."
    },

    // 3 C√¢u V·∫≠n d·ª•ng
    {
      level: "V·∫≠n d·ª•ng",
      question: "M·ªôt c·ª≠a h√†ng gi√†y ghi l·∫°i c·ª° gi√†y c·ªßa kh√°ch h√†ng ƒë√£ mua: 38, 39, 40, 41, 42. C·ª≠a h√†ng ƒëang quan t√¢m ƒë·∫øn d·ªØ li·ªáu n√†o?",
      options: ["D·ªØ li·ªáu ƒë·ªãnh t√≠nh v·ªÅ m√†u s·∫Øc", "D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng r·ªùi r·∫°c v·ªÅ k√≠ch c·ª°", "D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng li√™n t·ª•c v·ªÅ ƒë·ªô b·ªÅn", "D·ªØ li·ªáu ƒë·ªãnh t√≠nh v·ªÅ ch·∫•t li·ªáu"],
      correct: 1,
      rationale: "C·ª° gi√†y (size) l√† c√°c con s·ªë c·ª• th·ªÉ, r·ªùi r·∫°c (kh√¥ng c√≥ c·ª° 38.567), d√πng ƒë·ªÉ ƒëo k√≠ch th∆∞·ªõc ch√¢n."
    },
    {
      level: "V·∫≠n d·ª•ng (Th·ª±c t·∫ø)",
      question: "Nh√† tr∆∞·ªùng mu·ªën kh·∫£o s√°t m·ª©c ƒë·ªô y√™u th√≠ch m√¥n To√°n c·ªßa TO√ÄN B·ªò 1000 h·ªçc sinh. Do kh√¥ng ƒë·ªß th·ªùi gian, tr∆∞·ªùng ch·ªâ ch·ªçn ng·∫´u nhi√™n 100 b·∫°n ƒë·ªÉ h·ªèi. T·∫≠p h·ª£p 100 b·∫°n n√†y ƒë∆∞·ª£c g·ªçi l√† g√¨?",
      options: ["M·∫´u s·ªë li·ªáu", "To√†n th·ªÉ", "D·ªØ li·ªáu g·ªëc", "D·ªØ li·ªáu th·ª© c·∫•p"],
      correct: 0,
      rationale: "Trong th·ªëng k√™, khi kh√¥ng th·ªÉ ƒëi·ªÅu tra to√†n b·ªô, ng∆∞·ªùi ta ch·ªçn ra m·ªôt nh√≥m ƒë·∫°i di·ªán g·ªçi l√† 'M·∫´u'. 100 b·∫°n h·ªçc sinh n√†y ch√≠nh l√† m·∫´u s·ªë li·ªáu."
    },
    {
      level: "V·∫≠n d·ª•ng",
      question: "Trong b·∫£ng th·ªëng k√™ 'S·ªë gi·ªù t·ª± h·ªçc' c·ªßa b·∫°n Nam: Th·ª© 2 (2h), Th·ª© 3 (1.5h), Th·ª© 4 (300 ph√∫t), Th·ª© 5 (1h). D·ªØ li·ªáu n√†o c·∫ßn ƒë∆∞·ª£c quy ƒë·ªïi ƒë·ªÉ ƒë·ªìng nh·∫•t?",
      options: ["Th·ª© 2", "Th·ª© 3", "Th·ª© 4", "Th·ª© 5"],
      correct: 2,
      rationale: "C√°c ng√†y kh√°c d√πng ƒë∆°n v·ªã 'gi·ªù', ri√™ng Th·ª© 4 d√πng 'ph√∫t'. ƒê·ªÉ so s√°nh ho·∫∑c v·∫Ω bi·ªÉu ƒë·ªì, c·∫ßn quy ƒë·ªïi 300 ph√∫t v·ªÅ gi·ªù (5h) ho·∫∑c ƒë·ªïi t·∫•t c·∫£ ra ph√∫t."
    },

    // 1 C√¢u V·∫≠n d·ª•ng cao
    {
      level: "V·∫≠n d·ª•ng cao",
      question: "M·ªôt cu·ªôc kh·∫£o s√°t online v·ªÅ 'M·ª©c ƒë·ªô ph·ªï bi·∫øn c·ªßa Internet' k·∫øt lu·∫≠n r·∫±ng: '100% ng∆∞·ªùi d√¢n ƒë·ªÅu s·ª≠ d·ª•ng Internet'. K·∫øt lu·∫≠n n√†y c√≥ ƒë√°ng tin c·∫≠y kh√¥ng? T·∫°i sao?",
      options: ["ƒê√°ng tin, v√¨ 100% l√† con s·ªë tuy·ªát ƒë·ªëi.", "ƒê√°ng tin, v√¨ kh·∫£o s√°t online r·∫•t nhanh.", "Kh√¥ng ƒë√°ng tin, v√¨ m·∫´u kh·∫£o s√°t b·ªã thi√™n l·ªách (ch·ªâ nh·ªØng ng∆∞·ªùi c√≥ Internet m·ªõi l√†m kh·∫£o s√°t online).", "Kh√¥ng ƒë√°ng tin, v√¨ s·ªë l∆∞·ª£ng ng∆∞·ªùi tham gia qu√° √≠t."],
      correct: 2,
      rationale: "ƒê√¢y l√† l·ªói ch·ªçn m·∫´u (bias). N·∫øu kh·∫£o s√°t online, b·∫°n ƒë√£ lo·∫°i b·ªè ho√†n to√†n nh·ªØng ng∆∞·ªùi kh√¥ng c√≥ Internet. Do ƒë√≥, k·∫øt lu·∫≠n '100% ng∆∞·ªùi d√¢n d√πng Internet' l√† sai l·ªách do ph∆∞∆°ng ph√°p thu th·∫≠p."
    }
  ];

  let currentQuestionIndex = 0;
  let score = 0;
  let isAnswering = false;

  // Sound Elements
  const soundCorrect = document.getElementById('sound-correct');
  const soundWrong = document.getElementById('sound-wrong');
  const soundFinish = document.getElementById('sound-finish');

  function playSound(type) {
    if (type === 'correct') { soundCorrect.currentTime = 0; soundCorrect.play().catch(() => {}); }
    if (type === 'wrong') { soundWrong.currentTime = 0; soundWrong.play().catch(() => {}); }
    if (type === 'finish') { soundFinish.currentTime = 0; soundFinish.play().catch(() => {}); }
  }

  // Shuffle options BUT keep correct answer updated
  function shuffleWithCorrect(options, correctIndex) {
    const arr = options.map((text, i) => ({ text, isCorrect: i === correctIndex }));
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    const newCorrect = arr.findIndex(o => o.isCorrect);
    return { options: arr.map(o => o.text), correct: newCorrect };
  }

  function startGame() {
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    loadQuestion();
  }

  function loadQuestion() {
    isAnswering = true;
    const q = questions[currentQuestionIndex];

    // Random options for THIS question (in-place update)
    const shuffled = shuffleWithCorrect(q.options, q.correct);
    q.options = shuffled.options;
    q.correct = shuffled.correct;

    // Update UI
    document.getElementById('current-question').innerText = currentQuestionIndex + 1;
    document.getElementById('score').innerText = score;

    // Progress: go to 100% at last question
    const progressPercent = ((currentQuestionIndex + 1) / questions.length) * 100;
    document.getElementById('progress').style.width = `${progressPercent}%`;

    // Setup Question Card
    document.getElementById('question-text').innerText = q.question;

    // Badge color based on level
    const badge = document.getElementById('level-badge');
    badge.innerText = q.level;
    if (q.level.includes("Nh·∫≠n bi·∫øt")) badge.className = "badge bg-green-100 text-green-700 absolute top-6 right-6";
    else if (q.level.includes("Th√¥ng hi·ªÉu")) badge.className = "badge bg-blue-100 text-blue-700 absolute top-6 right-6";
    else if (q.level.includes("V·∫≠n d·ª•ng cao")) badge.className = "badge bg-red-100 text-red-700 absolute top-6 right-6";
    else badge.className = "badge bg-yellow-100 text-yellow-700 absolute top-6 right-6";

    // Hide feedback area
    document.getElementById('feedback-area').classList.add('hidden');

    // Generate Options
    const container = document.getElementById('options-container');
    container.innerHTML = '';

    q.options.forEach((opt, index) => {
      const btn = document.createElement('button');
      btn.className = `option-btn w-full text-left p-4 rounded-xl border-2 border-gray-100 bg-white text-gray-700 font-semibold text-lg`;
      btn.onclick = () => checkAnswer(index, btn);
      btn.innerHTML = `<span class="inline-block w-8 h-8 bg-gray-100 rounded-full text-center leading-8 mr-3 text-sm text-gray-500 font-bold">${String.fromCharCode(65 + index)}</span>${opt}`;
      container.appendChild(btn);
    });
  }

  function checkAnswer(selectedIndex, btnElement) {
    if (!isAnswering) return;
    isAnswering = false;

    const q = questions[currentQuestionIndex];
    const isCorrect = selectedIndex === q.correct;
    const buttons = document.querySelectorAll('.option-btn');

    // Disable all buttons
    buttons.forEach(btn => btn.disabled = true);

    // Highlight answers
    if (isCorrect) {
      btnElement.classList.add('correct');
      score += 10;
      document.getElementById('score').innerText = score;
      playSound('correct');
      fireConfetti();
      showFeedback(true, q.rationale);
    } else {
      btnElement.classList.add('wrong');
      if (buttons[q.correct]) buttons[q.correct].classList.add('correct');
      playSound('wrong');
      showFeedback(false, q.rationale);
    }
  }

  function showFeedback(isCorrect, rationale) {
    const area = document.getElementById('feedback-area');
    const card = document.getElementById('feedback-card');
    const title = document.getElementById('feedback-title');
    const text = document.getElementById('feedback-text');
    const icon = document.getElementById('feedback-icon');

    area.classList.remove('hidden');

    if (isCorrect) {
      card.className = "card p-6 border-l-8 border-green-500 bg-green-50";
      title.className = "text-xl font-bold mb-1 text-green-700";
      title.innerText = "Ch√≠nh x√°c! üéâ";
      icon.innerText = "ü§©";
    } else {
      card.className = "card p-6 border-l-8 border-red-500 bg-red-50";
      title.className = "text-xl font-bold mb-1 text-red-700";
      title.innerText = "Ch∆∞a ƒë√∫ng r·ªìi! üòÖ";
      icon.innerText = "ü§î";
    }

    text.innerText = rationale;
  }

  function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
      loadQuestion();
    } else {
      showResult();
    }
  }

  function showResult() {
    document.getElementById('quiz-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.remove('hidden');
    document.getElementById('final-score').innerText = score + "/150";
    playSound('finish');
    fireConfetti();

    const msg = document.getElementById('result-message');
    if (score >= 130) msg.innerText = "Xu·∫•t s·∫Øc! B·∫°n l√† b·∫≠c th·∫ßy th·ªëng k√™! üåü";
    else if (score >= 100) msg.innerText = "Gi·ªèi l·∫Øm! Ki·∫øn th·ª©c r·∫•t v·ªØng v√†ng! üëç";
    else if (score >= 70) msg.innerText = "Kh√° t·ªët! C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©! üí™";
    else msg.innerText = "H√£y √¥n l·∫°i b√†i v√† th·ª≠ l·∫°i nh√©! üìö";
  }

  function fireConfetti() {
    var count = 200;
    var defaults = { origin: { y: 0.7 } };

    function fire(particleRatio, opts) {
      confetti(Object.assign({}, defaults, opts, {
        particleCount: Math.floor(count * particleRatio)
      }));
    }

    fire(0.25, { spread: 26, startVelocity: 55 });
    fire(0.2, { spread: 60 });
    fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
    fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
    fire(0.1, { spread: 120, startVelocity: 45 });
  }
</script>
</body>
</html>
