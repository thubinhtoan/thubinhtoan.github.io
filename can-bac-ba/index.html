<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>H√†nh Tr√¨nh CƒÉn B·∫≠c Ba ‚Äì To√°n 9</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #22c55e 0%, #052e16 45%, #020617 100%);
      min-height: 100vh;
      margin: 0;
      color: #e5e7eb;
      overflow: hidden;
    }

    .glass {
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(16px);
    }

    .answer-btn {
      transition: all 0.18s ease-out;
    }
    .answer-btn:active {
      transform: scale(0.97);
    }

    .hidden {
      display: none !important;
    }

    /* Emoji ph·∫£n h·ªìi */
    @keyframes popUp {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0;
      }
    }

    .emoji-feedback {
      position: fixed;
      left: 50%;
      top: 40%;
      font-size: 4rem;
      pointer-events: none;
      animation: popUp 0.9s ease-out forwards;
      z-index: 50;
    }

    .progress-bar {
      transition: width 0.4s ease-in-out;
    }
  </style>
</head>
<body class="flex items-center justify-center">

  <!-- Start Screen -->
  <div
    id="start-screen"
    class="glass rounded-3xl px-6 py-8 sm:px-10 sm:py-10 max-w-xl w-full mx-4 text-center"
  >
    <div class="text-4xl sm:text-5xl mb-4">üì¶</div>
    <h1 class="text-2xl sm:text-3xl font-extrabold text-emerald-300 mb-2">
      H√ÄNH TR√åNH CƒÇN B·∫¨C BA
    </h1>
    <p class="text-sm sm:text-base text-slate-200 mb-4">
      To√°n 9 ‚Äì Ch√¢n tr·ªùi s√°ng t·∫°o
    </p>
    <p class="text-sm sm:text-base text-slate-300 mb-6">
      V∆∞·ª£t qua <span class="font-semibold text-emerald-300">12 c√¢u h·ªèi</span>
      v·ªÅ <span class="font-semibold">cƒÉn b·∫≠c ba</span> ƒë·ªÉ n·∫°p nƒÉng l∆∞·ª£ng cho
      th√†nh ph·ªë kh·ªëi l·∫≠p ph∆∞∆°ng nƒÉng l∆∞·ª£ng xanh! üí°
    </p>

    <button
      onclick="startGame()"
      class="inline-flex items-center gap-2 bg-emerald-500 hover:bg-emerald-400 text-slate-900 font-semibold px-8 py-3 rounded-full shadow-lg shadow-emerald-500/40 transition transform hover:-translate-y-0.5"
    >
      <span>B·∫ÆT ƒê·∫¶U NGAY</span>
      <span>‚ñ∂</span>
    </button>
  </div>

  <!-- Game UI -->
  <div
    id="game-ui"
    class="glass rounded-3xl max-w-4xl w-full mx-4 px-4 sm:px-8 py-5 sm:py-7 hidden flex-col gap-4"
  >
    <!-- Top bar -->
    <div class="flex items-center justify-between gap-3 text-xs sm:text-sm">
      <div class="flex items-center gap-2">
        <span class="text-yellow-300 text-lg">‚≠ê</span>
        <span>ƒêi·ªÉm: </span>
        <span id="score-display" class="font-bold text-emerald-300 text-base sm:text-lg">0</span>
      </div>
      <div class="flex items-center gap-3">
        <span class="text-sky-300">
          C√¢u <span id="question-index">1</span> / <span id="total-questions">12</span>
        </span>
      </div>
    </div>

    <!-- Progress bar -->
    <div class="w-full bg-slate-800/70 rounded-full h-2 mt-1 mb-3">
      <div
        id="progress-bar"
        class="bg-gradient-to-r from-emerald-400 to-sky-400 h-2 rounded-full progress-bar"
        style="width: 0%"
      ></div>
    </div>

    <!-- Question box -->
    <div class="rounded-2xl border border-slate-600/70 bg-slate-900/80 px-4 sm:px-6 py-4 sm:py-5">
      <div class="flex items-center justify-between mb-3">
        <span
          id="level-badge"
          class="inline-flex items-center gap-1 text-[11px] sm:text-xs px-3 py-1 rounded-full bg-emerald-900/80 border border-emerald-500/60 text-emerald-200 uppercase tracking-wide font-semibold"
        >
          Nh·∫≠n bi·∫øt
        </span>
        <span class="text-[11px] sm:text-xs text-slate-400">
          Ch·ªß ƒë·ªÅ: CƒÉn b·∫≠c ba ‚Äì To√°n 9
        </span>
      </div>
      <h2
        id="question-text"
        class="text-base sm:text-lg md:text-xl font-semibold text-slate-50 leading-relaxed"
      >
        N·ªôi dung c√¢u h·ªèi s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y.
      </h2>
    </div>

    <!-- Answers -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3" id="answers-grid">
      <!-- buttons injected -->
    </div>

    <!-- Feedback -->
    <div
      id="feedback"
      class="h-6 text-center text-sm sm:text-base font-semibold text-emerald-300 opacity-0 transition-opacity duration-200"
    ></div>
  </div>

  <!-- End Screen -->
  <div
    id="end-screen"
    class="glass rounded-3xl px-6 py-8 sm:px-10 sm:py-10 max-w-xl w-full mx-4 text-center hidden"
  >
    <div id="end-icon" class="text-5xl mb-3">üèÅ</div>
    <h2 class="text-2xl sm:text-3xl font-extrabold text-emerald-300 mb-2">
      HO√ÄN TH√ÄNH H√ÄNH TR√åNH!
    </h2>
    <p id="end-message" class="text-sm sm:text-base text-slate-200 mb-6">
      B·∫°n ƒë√£ n·∫°p ƒë·ªß nƒÉng l∆∞·ª£ng cho th√†nh ph·ªë kh·ªëi l·∫≠p ph∆∞∆°ng.
    </p>

    <div
      class="bg-slate-900/80 border border-slate-700 rounded-2xl px-4 sm:px-6 py-4 text-left text-sm sm:text-base mb-5"
    >
      <div class="flex justify-between mb-2">
        <span>T·ªïng ƒëi·ªÉm:</span>
        <span id="final-score" class="font-bold text-yellow-300">0</span>
      </div>
      <div class="flex justify-between mb-1">
        <span>S·ªë c√¢u ƒë√∫ng:</span>
        <span id="final-correct" class="font-bold text-emerald-300">0/12</span>
      </div>
    </div>

    <button
      onclick="location.reload()"
      class="inline-flex items-center gap-2 bg-emerald-500 hover:bg-emerald-400 text-slate-900 font-semibold px-8 py-3 rounded-full shadow-lg shadow-emerald-500/40 transition transform hover:-translate-y-0.5"
    >
      <span>CH∆†I L·∫†I</span>
      <span>üîÅ</span>
    </button>
  </div>

  <script>
    // ===== D·ªÆ LI·ªÜU C√ÇU H·ªéI ‚Äì CƒÇN B·∫¨C BA TO√ÅN 9 =====
    const questions = [
      // Nh·∫≠n bi·∫øt
      {
        id: 1,
        level: "Nh·∫≠n bi·∫øt",
        question: "CƒÉn b·∫≠c ba c·ªßa 8 l√†:",
        answers: ["2", "4", "-2", "3"],
        correct: 0,
      },
      {
        id: 2,
        level: "Nh·∫≠n bi·∫øt",
        question: "Gi√° tr·ªã c·ªßa \\u221b27 l√†:",
        answers: ["2", "3", "4", "9"],
        correct: 1,
      },
      {
        id: 3,
        level: "Nh·∫≠n bi·∫øt",
        question: "CƒÉn b·∫≠c ba c·ªßa 1.000 l√†:",
        answers: ["10", "100", "5", "\\u221b10"],
        correct: 0,
      },
      {
        id: 4,
        level: "Nh·∫≠n bi·∫øt",
        question: "S·ªë n√†o sau ƒë√¢y l√† cƒÉn b·∫≠c ba c·ªßa -125?",
        answers: ["-25", "5", "-5", "125"],
        correct: 2,
      },
      // Th√¥ng hi·ªÉu
      {
        id: 5,
        level: "Th√¥ng hi·ªÉu",
        question: "Ch·ªçn kh·∫≥ng ƒë·ªãnh ƒê√öNG:",
        answers: [
          "\\u221b(a^3) = a v·ªõi m·ªçi s·ªë th·ª±c a",
          "\\u221b(a^3) = |a| v·ªõi m·ªçi s·ªë th·ª±c a",
          "\\u221b(a^3) = -a v·ªõi m·ªçi s·ªë th·ª±c a",
          "\\u221b(a^3) ch·ªâ c√≥ nghƒ©a v·ªõi a > 0",
        ],
        correct: 0,
      },
      {
        id: 6,
        level: "Th√¥ng hi·ªÉu",
        question: "Gi√° tr·ªã c·ªßa \\u221b(64) l√†:",
        answers: ["4", "8", "-4", "16"],
        correct: 0,
      },
      {
        id: 7,
        level: "Th√¥ng hi·ªÉu",
        question:
          "T√≠nh \\u221b(1/8):",
        answers: ["1/2", "1/4", "2", "4"],
        correct: 0,
      },
      {
        id: 8,
        level: "Th√¥ng hi·ªÉu",
        question: "Ch·ªçn ƒë·∫≥ng th·ª©c ƒê√öNG:",
        answers: [
          "\\u221b(a\\u00b7b) = \\u221ba + \\u221bb",
          "\\u221b(a\\u00b7b) = \\u221ba \\u00b7 \\u221bb v·ªõi a, b \\u2265 0",
          "\\u221b(a^3 b^3) = ab",
          "C·∫£ B v√† C ƒë·ªÅu ƒë√∫ng",
        ],
        correct: 3,
      },
      // V·∫≠n d·ª•ng
      {
        id: 9,
        level: "V·∫≠n d·ª•ng",
        question:
          "R√∫t g·ªçn: \\u221b(216x^3) v·ªõi x l√† s·ªë th·ª±c b·∫•t k·ª≥:",
        answers: ["6x", "\\u221b216 \\u00b7 x", "216x", "3x"],
        correct: 0,
      },
      {
        id: 10,
        level: "V·∫≠n d·ª•ng",
        question:
          "So s√°nh \\u221b8 v√† \\u221b27:",
        answers: [
          "\\u221b8 > \\u221b27",
          "\\u221b8 = \\u221b27",
          "\\u221b8 < \\u221b27",
          Kh√¥ng so s√°nh ƒë∆∞·ª£c",
        ],
        correct: 2,
      },
      {
        id: 11,
        level: "V·∫≠n d·ª•ng",
        question:
          "Bi·∫øt \\u221b(x^3) = -4. Khi ƒë√≥ x b·∫±ng:",
        answers: ["4", "-4", "2", "-2"],
        correct: 1,
      },
      // V·∫≠n d·ª•ng cao
      {
        id: 12,
        level: "V·∫≠n d·ª•ng cao",
        question:
          "M·ªôt kh·ªëi l·∫≠p ph∆∞∆°ng c√≥ th·ªÉ t√≠ch 343 cm¬≥. ƒê·ªô d√†i c·∫°nh kh·ªëi l·∫≠p ph∆∞∆°ng l√†:",
        answers: ["7 cm", "9 cm", "6 cm", "8 cm"],
        correct: 0,
      },
    ];

    // ===== LOGIC TR√í CH∆†I =====
    let currentIndex = 0;
    let score = 0;
    let correctCount = 0;

    const startScreen = document.getElementById("start-screen");
    const gameUI = document.getElementById("game-ui");
    const endScreen = document.getElementById("end-screen");

    const questionText = document.getElementById("question-text");
    const answersGrid = document.getElementById("answers-grid");
    const feedbackEl = document.getElementById("feedback");
    const levelBadge = document.getElementById("level-badge");
    const scoreDisplay = document.getElementById("score-display");
    const questionIndexEl = document.getElementById("question-index");
    const totalQuestionsEl = document.getElementById("total-questions");
    const progressBar = document.getElementById("progress-bar");
    const finalScoreEl = document.getElementById("final-score");
    const finalCorrectEl = document.getElementById("final-correct");
    const endMessageEl = document.getElementById("end-message");
    const endIconEl = document.getElementById("end-icon");

    totalQuestionsEl.textContent = questions.length;

    function startGame() {
      startScreen.classList.add("hidden");
      endScreen.classList.add("hidden");
      gameUI.classList.remove("hidden");
      gameUI.classList.add("flex");

      currentIndex = 0;
      score = 0;
      correctCount = 0;
      scoreDisplay.textContent = score;
      loadQuestion();
    }

    function loadQuestion() {
      if (currentIndex >= questions.length) {
        endGame();
        return;
      }

      const q = questions[currentIndex];
      questionIndexEl.textContent = currentIndex + 1;

      questionText.textContent = q.question.replace(/\\u221b/g, "‚àõ");
      levelBadge.textContent = q.level;

      // m√†u badge theo m·ª©c
      if (q.level === "Nh·∫≠n bi·∫øt") {
        levelBadge.className =
          "inline-flex items-center gap-1 text-[11px] sm:text-xs px-3 py-1 rounded-full bg-emerald-900/80 border border-emerald-500/60 text-emerald-200 uppercase tracking-wide font-semibold";
      } else if (q.level === "Th√¥ng hi·ªÉu") {
        levelBadge.className =
          "inline-flex items-center gap-1 text-[11px] sm:text-xs px-3 py-1 rounded-full bg-sky-900/80 border border-sky-400/70 text-sky-200 uppercase tracking-wide font-semibold";
      } else if (q.level === "V·∫≠n d·ª•ng") {
        levelBadge.className =
          "inline-flex items-center gap-1 text-[11px] sm:text-xs px-3 py-1 rounded-full bg-amber-900/80 border border-amber-400/70 text-amber-200 uppercase tracking-wide font-semibold";
      } else {
        levelBadge.className =
          "inline-flex items-center gap-1 text-[11px] sm:text-xs px-3 py-1 rounded-full bg-rose-900/80 border border-rose-400/70 text-rose-200 uppercase tracking-wide font-semibold";
      }

      // progress
      const progress = (currentIndex / questions.length) * 100;
      progressBar.style.width = progress + "%";

      // render answer buttons
      answersGrid.innerHTML = "";
      q.answers.forEach((ans, idx) => {
        const btn = document.createElement("button");
        btn.className =
          "answer-btn rounded-2xl bg-slate-900/80 border border-slate-700 text-left px-4 py-3 text-sm sm:text-base hover:border-emerald-400/70 hover:bg-slate-800";
        btn.innerHTML =
          '<span class="font-semibold mr-2 text-emerald-300">' +
          String.fromCharCode(65 + idx) +
          ".</span> " +
          ans;
        btn.onclick = () => checkAnswer(idx);
        answersGrid.appendChild(btn);
      });

      feedbackEl.style.opacity = 0;
      feedbackEl.textContent = "";
    }

    function checkAnswer(selectedIndex) {
      const q = questions[currentIndex];
      const buttons = answersGrid.querySelectorAll("button");
      buttons.forEach((b) => (b.disabled = true));

      const correctIndex = q.correct;

      if (selectedIndex === correctIndex) {
        score += 10;
        correctCount++;

        buttons[selectedIndex].classList.remove("border-slate-700");
        buttons[selectedIndex].classList.add(
          "border-emerald-400",
          "bg-emerald-900/60"
        );
        feedbackEl.textContent = "Ch√≠nh x√°c! Tuy·ªát l·∫Øm! üåü";
        feedbackEl.classList.remove("text-rose-300");
        feedbackEl.classList.add("text-emerald-300");
        showEmoji(true);
      } else {
        buttons[selectedIndex].classList.remove("border-slate-700");
        buttons[selectedIndex].classList.add(
          "border-rose-400",
          "bg-rose-900/40"
        );
        buttons[correctIndex].classList.remove("border-slate-700");
        buttons[correctIndex].classList.add(
          "border-emerald-400",
          "bg-emerald-900/60"
        );
        feedbackEl.textContent = "Ch∆∞a ƒë√∫ng r·ªìi, th·ª≠ c·ªë th√™m nh√©! üí™";
        feedbackEl.classList.remove("text-emerald-300");
        feedbackEl.classList.add("text-rose-300");
        showEmoji(false);
      }

      scoreDisplay.textContent = score;
      feedbackEl.style.opacity = 1;

      setTimeout(() => {
        currentIndex++;
        loadQuestion();
      }, 1500);
    }

    function endGame() {
      gameUI.classList.add("hidden");
      gameUI.classList.remove("flex");
      endScreen.classList.remove("hidden");

      finalScoreEl.textContent = score;
      finalCorrectEl.textContent = correctCount + "/" + questions.length;

      if (correctCount >= 10) {
        endMessageEl.textContent =
          "Xu·∫•t s·∫Øc! B·∫°n ƒë√£ l√†m ch·ªß cƒÉn b·∫≠c ba v√† n·∫°p tr√†n nƒÉng l∆∞·ª£ng cho th√†nh ph·ªë.";
        endIconEl.textContent = "üåü";
      } else if (correctCount >= 7) {
        endMessageEl.textContent =
          "R·∫•t t·ªët! Ki·∫øn th·ª©c cƒÉn b·∫≠c ba c·ªßa b·∫°n kh√° v·ªØng. H√£y ch∆°i l·∫°i ƒë·ªÉ ƒë·∫°t ƒëi·ªÉm t·ªëi ƒëa nh√©!";
        endIconEl.textContent = "‚ö°";
      } else {
        endMessageEl.textContent =
          "B·∫°n c·∫ßn √¥n th√™m v·ªÅ cƒÉn b·∫≠c ba. H√£y xem l·∫°i l√Ω thuy·∫øt v√† th·ª≠ ch∆°i l·∫°i l·∫ßn n·ªØa nh√©!";
        endIconEl.textContent = "üìö";
      }
    }

    function showEmoji(isCorrect) {
      const emoji = document.createElement("div");
      emoji.className = "emoji-feedback";
      emoji.textContent = isCorrect ? "üéâ" : "üòÖ";
      document.body.appendChild(emoji);
      setTimeout(() => emoji.remove(), 900);
    }
  </script>
</body>
</html>
