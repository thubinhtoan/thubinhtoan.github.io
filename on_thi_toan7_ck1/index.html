<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ƒê·∫•u Tr∆∞·ªùng To√°n 7 - C√¥ Thu B√¨nh</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <!-- MathJax -->
  <script>
    MathJax = {
      tex: { inlineMath: [["$", "$"], ["\\(", "\\)"]] },
      svg: { fontCache: "global" }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
    @import url("https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Roboto:wght@400;700&display=swap");

    body {
      font-family: "Roboto", sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }
    .hand-font { font-family: "Patrick Hand", cursive; }

    .card {
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
    }

    .option-btn {
      transition: all 0.2s;
      border: 3px solid transparent;
    }
    .option-btn:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      border-color: #764ba2;
    }
    .option-btn:active:not(:disabled) { transform: translateY(1px); }

    .correct-anim {
      animation: bounce 0.5s cubic-bezier(0.36, 0, 0.66, -0.56) infinite alternate;
      background-color: #48bb78 !important;
      color: white !important;
      border-color: #2f855a !important;
    }
    .wrong-anim {
      animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
      background-color: #f56565 !important;
      color: white !important;
      border-color: #c53030 !important;
    }

    @keyframes bounce { 0% {transform:translateY(0)} 100% {transform:translateY(-10px)} }
    @keyframes shake {
      10%,90%{transform:translate3d(-1px,0,0)}
      20%,80%{transform:translate3d(2px,0,0)}
      30%,50%,70%{transform:translate3d(-4px,0,0)}
      40%,60%{transform:translate3d(4px,0,0)}
    }

    #confetti-canvas{
      position:fixed; top:0; left:0; width:100%; height:100%;
      pointer-events:none; z-index:9999;
    }

    .mascot { font-size: 3rem; animation: float 3s ease-in-out infinite; }
    @keyframes float{
      0%{transform:translateY(0) rotate(0deg)}
      50%{transform:translateY(-10px) rotate(5deg)}
      100%{transform:translateY(0) rotate(0deg)}
    }
  </style>
</head>

<body class="flex items-center justify-center p-4">
  <canvas id="confetti-canvas"></canvas>

  <!-- Start -->
  <div id="start-screen" class="card p-8 max-w-2xl w-full text-center relative z-10">
    <div class="mascot mb-4">üë©‚Äçüè´ ‚ú®</div>
    <h1 class="text-4xl md:text-5xl font-bold text-indigo-700 mb-4 hand-font">ƒê·∫•u Tr∆∞·ªùng To√°n 7</h1>
    <h2 class="text-xl text-gray-600 mb-6">Chinh Ph·ª•c ƒê·ªânh Cao C√πng C√¥ Thu B√¨nh</h2>
    <p class="text-gray-600 mb-8 text-lg">
      Ch√†o m·ª´ng c√°c em ƒë·∫øn v·ªõi b√†i √¥n t·∫≠p cu·ªëi k·ª≥ 1!<br>
      H√£y b√¨nh tƒ©nh v√† chinh ph·ª•c 40 c√¢u h·ªèi nh√©.<br>
      C√¥ tin c√°c em s·∫Ω l√†m r·∫•t t·ªët! ‚ù§Ô∏è
    </p>
    <button onclick="startGame()"
      class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-10 rounded-full text-xl shadow-lg transition transform hover:scale-105">
      B·∫ÆT ƒê·∫¶U NGAY üöÄ
    </button>
  </div>

  <!-- Game -->
  <div id="game-screen" class="hidden w-full max-w-4xl relative z-10">
    <div class="flex justify-between items-center mb-6 bg-white/20 p-4 rounded-xl backdrop-blur-sm text-white">
      <div class="flex items-center">
        <span class="text-2xl mr-2">üèÜ</span>
        <div>
          <div class="text-xs opacity-80">ƒêI·ªÇM S·ªê</div>
          <div class="text-2xl font-bold" id="score">0</div>
        </div>
      </div>

      <div class="text-center">
        <div class="mascot" id="mascot-reaction">ü§î</div>
      </div>

      <div class="text-right">
        <div class="text-xs opacity-80">C√ÇU H·ªéI</div>
        <div class="text-2xl font-bold"><span id="current-q">1</span>/40</div>
      </div>
    </div>

    <div class="card p-6 md:p-10 mb-4 min-h-[180px] flex flex-col justify-center items-center text-center">
      <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2 leading-relaxed" id="question-text">
        ƒêang t·∫£i c√¢u h·ªèi...
      </h3>
      <div class="text-sm text-gray-500 mt-2" id="question-sub"></div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="options-container"></div>

    <!-- Explanation (gi·ªëng v√≠ d·ª• c√¥ g·ª≠i) -->
    <div id="explain-box" class="hidden mt-5 bg-amber-50 border border-amber-200 rounded-2xl p-5 shadow-md">
      <div class="flex items-center gap-2 text-amber-700 font-bold mb-2">
        <span class="text-xl">üí°</span><span>Gi·∫£i th√≠ch:</span>
      </div>
      <div id="explain-text" class="text-gray-800 leading-relaxed"></div>
      <div class="mt-4 text-right">
        <button onclick="nextQuestion()"
          class="bg-indigo-600 text-white py-3 px-8 rounded-full font-bold hover:bg-indigo-700 transition">
          Ti·∫øp t·ª•c ‚û°Ô∏è
        </button>
      </div>
    </div>
  </div>

  <!-- Result -->
  <div id="result-screen" class="hidden card p-8 max-w-2xl w-full text-center relative z-10">
    <div class="text-6xl mb-4">üéì</div>
    <h2 class="text-4xl font-bold text-indigo-800 mb-4">T·ªïng K·∫øt</h2>
    <p class="text-xl text-gray-600 mb-6">Ch√∫c m·ª´ng em ƒë√£ ho√†n th√†nh b√†i thi!</p>

    <div class="bg-indigo-50 rounded-xl p-6 mb-8">
      <div class="text-5xl font-bold text-indigo-600 mb-2" id="final-score">0/400</div>
      <div class="text-gray-500" id="final-percent">0%</div>
    </div>

    <p id="teacher-msg" class="text-lg italic text-gray-700 mb-8"></p>

    <button onclick="location.reload()"
      class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition">
      L√†m L·∫°i B√†i üîÑ
    </button>
  </div>

  <script>
    // ========= Helpers =========
    function shuffle(arr) {
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }
    function letter(i){ return String.fromCharCode(65 + i); }

    // ========= DATA 40 C√ÇU (chu·∫©n ho√°) =========
    // correct: index ƒë√∫ng trong options g·ªëc (tr∆∞·ªõc khi random)
    const rawQuestions = [
      { q: "Gi√° tr·ªã tuy·ªát ƒë·ªëi c·ªßa $7{,}82$ l√†:", options: ["8,27","7,82","-7,82","7,8"], correct: 1,
        explain: "Gi√° tr·ªã tuy·ªát ƒë·ªëi l√† kho·∫£ng c√°ch t·ªõi 0 n√™n lu√¥n kh√¥ng √¢m: $|7{,}82|=7{,}82$." },

      { q: "K·∫øt qu·∫£ so s√°nh hai s·ªë th·∫≠p ph√¢n $65{,}312$ v√† $65{,}314$ l√†:", options: ["$65{,}312 < 65{,}314$","$65{,}312 > 65{,}314$","$65{,}312 = 65{,}314$","$65{,}312 \\le 65{,}314$"], correct: 0,
        explain: "So s√°nh t·ª´ tr√°i sang ph·∫£i: ph·∫ßn nguy√™n ƒë·ªÅu 65, so s√°nh ph·∫ßn th·∫≠p ph√¢n $312<314$ n√™n $65{,}312<65{,}314$." },

      { q: "CƒÉn b·∫≠c hai s·ªë h·ªçc c·ªßa $81$ l√†:", options: ["9","8","-9","$9^2$"], correct: 0,
        explain: "CƒÉn b·∫≠c hai s·ªë h·ªçc l√† s·ªë kh√¥ng √¢m: $\\sqrt{81}=9$." },

      { q: "S·ªë ƒë·ªëi c·ªßa s·ªë $\\frac{15}{18}$ l√†:", options: ["$\\frac{15}{18}$","$-\\frac{15}{18}$","$\\sqrt{25}$","$9^2$"], correct: 1,
        explain: "S·ªë ƒë·ªëi c·ªßa $a$ l√† $-a$. V√¨ v·∫≠y s·ªë ƒë·ªëi c·ªßa $\\frac{15}{18}$ l√† $-\\frac{15}{18}$." },

      { q: "Gi√° tr·ªã tuy·ªát ƒë·ªëi c·ªßa $-\\sqrt{25}$ l√†:", options: ["5","$\\sqrt{25}$","-9","-5"], correct: 0,
        explain: "$\\sqrt{25}=5$ n√™n $-\\sqrt{25}=-5$. Do ƒë√≥ $|-5|=5$." },

      { q: "S·ªë n√†o vi·∫øt ƒë∆∞·ª£c d∆∞·ªõi d·∫°ng s·ªë th·∫≠p ph√¢n h·ªØu h·∫°n?", options: ["$\\frac{-6}{75}$","$\\frac{-6}{76}$","$\\frac{7}{30}$","$\\frac{-7}{30}$"], correct: 0,
        explain: "Ph√¢n s·ªë t·ªëi gi·∫£n c√≥ m·∫´u ch·ªâ g·ªìm th·ª´a s·ªë 2 v√†/ho·∫∑c 5 th√¨ l√† th·∫≠p ph√¢n h·ªØu h·∫°n. $\\frac{-6}{75}=\\frac{-2}{25}$, m·∫´u $25=5^2$ n√™n h·ªØu h·∫°n." },

      { q: "T·∫≠p h·ª£p c√°c s·ªë v√¥ t·ªâ k√≠ hi·ªáu l√†:", options: ["$\\mathbb{N}$","$\\mathbb{Q}$","$\\mathbb{R}$","$\\mathbb{I}$"], correct: 3,
        explain: "S·ªë v√¥ t·ªâ k√≠ hi·ªáu $\\mathbb{I}$, s·ªë h·ªØu t·ªâ $\\mathbb{Q}$, s·ªë th·ª±c $\\mathbb{R}$, s·ªë t·ª± nhi√™n $\\mathbb{N}$." },

      { q: "Ch·ª©ng minh ƒë·ªãnh l√≠ l√†:", options: ["D√πng h√¨nh v·∫Ω suy ra k·∫øt lu·∫≠n","D√πng l·∫≠p lu·∫≠n t·ª´ gi·∫£ thi·∫øt suy ra k·∫øt lu·∫≠n","D√πng ƒëo ƒë·∫°c th·ª±c t·∫ø","D√πng tr·ª±c gi√°c"], correct: 1,
        explain: "Ch·ª©ng minh l√† chu·ªói l·∫≠p lu·∫≠n logic: t·ª´ gi·∫£ thi·∫øt suy ra k·∫øt lu·∫≠n." },

      { q: "Ph√°t bi·ªÉu n√†o sau ƒë√¢y l√† sai?", options: ["M·ªçi s·ªë v√¥ t·ªâ ƒë·ªÅu l√† s·ªë th·ª±c","M·ªçi s·ªë th·ª±c ƒë·ªÅu l√† s·ªë v√¥ t·ªâ","S·ªë 0 l√† s·ªë h·ªØu t·ªâ","$\\sqrt{7}$ l√† s·ªë v√¥ t·ªâ"], correct: 1,
        explain: "S·ªë th·ª±c g·ªìm c·∫£ h·ªØu t·ªâ v√† v√¥ t·ªâ. V√¨ v·∫≠y ‚Äúm·ªçi s·ªë th·ª±c ƒë·ªÅu l√† v√¥ t·ªâ‚Äù l√† sai." },

      { q: "B·ªï sung k·∫øt lu·∫≠n: ‚ÄúN·∫øu hai ƒë∆∞·ªùng th·∫≥ng $a$ v√† $b$ c√πng vu√¥ng g√≥c v·ªõi ƒë∆∞·ªùng th·∫≥ng th·ª© ba $c$ th√¨ ‚Ä¶‚Äù", options: ["$a$ song song $b$","$a$ v√† $b$ c·∫Øt nhau","$b$ song song $c$","$a$ v√† $b$ tr√πng nhau"], correct: 0,
        explain: "Hai ƒë∆∞·ªùng th·∫≥ng c√πng vu√¥ng g√≥c v·ªõi m·ªôt ƒë∆∞·ªùng th·∫≥ng th·ª© ba th√¨ song song v·ªõi nhau: $a\\parallel b$." },

      { q: "X√°c ƒë·ªãnh gi·∫£ thi·∫øt c·ªßa ƒë·ªãnh l√≠: ‚ÄúN·∫øu hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng vu√¥ng g√≥c v·ªõi m·ªôt ƒë∆∞·ªùng th·∫≥ng th·ª© ba th√¨ ch√∫ng song song v·ªõi nhau‚Äù.", options: ["Hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát","Hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng vu√¥ng g√≥c","Hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng vu√¥ng g√≥c v·ªõi m·ªôt ƒë∆∞·ªùng th·∫≥ng th·ª© ba","Ch√∫ng song song v·ªõi nhau"], correct: 2,
        explain: "Gi·∫£ thi·∫øt l√† ph·∫ßn ‚ÄúN·∫øu ‚Ä¶‚Äù: hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng vu√¥ng g√≥c v·ªõi m·ªôt ƒë∆∞·ªùng th·∫≥ng th·ª© ba." },

      { q: "Cho $\\widehat{xOy}=140^{\\circ}$, Om l√† tia ph√¢n gi√°c. S·ªë ƒëo $\\widehat{xOm}$ l√†:", options: ["$150^{\\circ}$","$70^{\\circ}$","$130^{\\circ}$","$180^{\\circ}$"], correct: 1,
        explain: "Tia ph√¢n gi√°c chia g√≥c th√†nh 2 ph·∫ßn b·∫±ng nhau: $\\widehat{xOm}=\\frac{140^{\\circ}}{2}=70^{\\circ}$." },

      { q: "T·ªïng s·ªë ƒëo hai g√≥c k·ªÅ b√π b·∫±ng:", options: ["$180^{\\circ}$","$120^{\\circ}$","$90^{\\circ}$","$60^{\\circ}$"], correct: 0,
        explain: "Hai g√≥c k·ªÅ b√π t·∫°o th√†nh m·ªôt g√≥c b·∫πt n√™n t·ªïng b·∫±ng $180^{\\circ}$." },

      { q: "Cho $\\triangle MNP$. Qua $M$ k·∫ª $a\\parallel NP$, qua $P$ k·∫ª $b\\parallel MN$. S·ªë ƒë∆∞·ªùng th·∫≥ng $a,b$ k·∫ª ƒë∆∞·ª£c l·∫ßn l∆∞·ª£t l√†:", options: ["1; 1","2; 2","3; 3","V√¥ s·ªë"], correct: 0,
        explain: "Qua m·ªôt ƒëi·ªÉm ngo√†i m·ªôt ƒë∆∞·ªùng th·∫≥ng ch·ªâ k·∫ª ƒë∆∞·ª£c duy nh·∫•t 1 ƒë∆∞·ªùng th·∫≥ng song song v·ªõi ƒë∆∞·ªùng th·∫≥ng ƒë√≥." },

      { q: "Qua m·ªôt ƒëi·ªÉm ·ªü ngo√†i m·ªôt ƒë∆∞·ªùng th·∫≥ng, c√≥ bao nhi√™u ƒë∆∞·ªùng th·∫≥ng song song v·ªõi ƒë∆∞·ªùng th·∫≥ng ƒë√≥?", options: ["Ch·ªâ c√≥ m·ªôt","C√≥ v√¥ s·ªë","C√≥ √≠t nh·∫•t m·ªôt","Kh√¥ng c√≥"], correct: 0,
        explain: "Ti√™n ƒë·ªÅ ∆†-clit: qua 1 ƒëi·ªÉm ngo√†i 1 ƒë∆∞·ªùng th·∫≥ng ch·ªâ c√≥ 1 ƒë∆∞·ªùng th·∫≥ng song song." },

      // C√¢u 16 ph·ª• thu·ªôc h√¨nh, gi·ªØ theo key c√¥ ƒëang d√πng
      { q: "G√≥c ƒë·ªëi ƒë·ªânh v·ªõi g√≥c $\\widehat{O_3}$ l√†:", options: ["$\\widehat{O_1}$","$\\widehat{O_2}$","$\\widehat{O_3}$","$\\widehat{O_4}$"], correct: 0,
        explain: "Hai g√≥c ƒë·ªëi ƒë·ªânh l√† hai g√≥c c√≥ c√°c c·∫°nh l√† c√°c tia ƒë·ªëi nhau. Theo h√¨nh chu·∫©n, $O_1$ ƒë·ªëi ƒë·ªânh v·ªõi $O_3$." },

      { q: "N·∫øu $\\widehat{M_1}=80^{\\circ}$ th√¨ g√≥c k·ªÅ b√π v·ªõi $\\widehat{M_1}$ b·∫±ng:", options: ["$60^{\\circ}$","$180^{\\circ}$","$80^{\\circ}$","$100^{\\circ}$"], correct: 3,
        explain: "G√≥c k·ªÅ b√π c√≥ t·ªïng $180^{\\circ}$ n√™n: $180^{\\circ}-80^{\\circ}=100^{\\circ}$." },

      { q: "T·∫≠p h·ª£p s·ªë th·ª±c ƒë∆∞·ª£c k√≠ hi·ªáu l√†:", options: ["$\\mathbb{Q}$","$\\mathbb{N}$","$\\mathbb{R}$","$\\mathbb{I}$"], correct: 2,
        explain: "T·∫≠p h·ª£p s·ªë th·ª±c l√† $\\mathbb{R}$." },

      { q: "Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒê√öNG?", options: ["$\\sqrt{2},\\sqrt{3},\\sqrt{5}$ l√† c√°c s·ªë th·ª±c","S·ªë nguy√™n kh√¥ng l√† s·ªë th·ª±c","S·ªë 0 v·ª´a l√† s·ªë h·ªØu t·ªâ v·ª´a l√† s·ªë v√¥ t·ªâ","$\\frac13$ l√† s·ªë v√¥ t·ªâ"], correct: 0,
        explain: "$\\sqrt{2},\\sqrt{3},\\sqrt{5}$ ƒë·ªÅu l√† s·ªë v√¥ t·ªâ nh∆∞ng v·∫´n thu·ªôc t·∫≠p s·ªë th·ª±c $\\mathbb{R}$." },

      { q: "Ph√¢n s·ªë n√†o vi·∫øt ƒë∆∞·ª£c d∆∞·ªõi d·∫°ng s·ªë th·∫≠p ph√¢n v√¥ h·∫°n tu·∫ßn ho√†n?", options: ["$\\frac{3}{8}$","$\\frac{6}{9}$","$\\frac{17}{25}$","$\\frac{9}{6}$"], correct: 1,
        explain: "$\\frac{6}{9}=\\frac{2}{3}=0,\\overline{6}$ l√† v√¥ h·∫°n tu·∫ßn ho√†n. $\\frac{3}{8},\\frac{17}{25},\\frac{9}{6}$ ƒë·ªÅu h·ªØu h·∫°n." },

      { q: "S·ªë ƒë·ªëi c·ªßa s·ªë $\\frac{-2}{5}$ l√†:", options: ["$\\frac{2}{5}$","$\\frac{-5}{2}$","$\\frac{5}{2}$","0"], correct: 0,
        explain: "S·ªë ƒë·ªëi c·ªßa $-\\frac25$ l√† $\\frac25$." },

      { q: "Th·ªÉ t√≠ch h√¨nh l·∫≠p ph∆∞∆°ng c√≥ c·∫°nh $0{,}05m$ l√†:", options: ["$25m^3$","$0{,}0125m^3$","$0{,}000125m^3$","$0{,}125dm^3$"], correct: 2,
        explain: "$V=a^3=(0{,}05)^3=0{,}000125\\,m^3$." },

      { q: "H√¨nh lƒÉng tr·ª• ƒë·ª©ng tam gi√°c c√≥ $h=10cm$, $S_{xq}=90cm^2$. Chu vi ƒë√°y l√†:", options: ["10 cm","$9cm^2$","100 cm","9 cm"], correct: 3,
        explain: "V·ªõi lƒÉng tr·ª• ƒë·ª©ng: $S_{xq}=P_{\\text{ƒë√°y}}\\cdot h$ n√™n $P_{\\text{ƒë√°y}}=\\frac{90}{10}=9\\,cm$." },

      { q: "T·ª´ $-x+\\frac12=\\frac{-5}{6}$ suy ra ƒë√∫ng l√†:", options: ["$-x=\\frac{-5}{6}+\\frac12$","$-x=\\frac{-5}{6}-\\frac12$","$x=\\frac{-5}{6}+\\frac12$","$x=\\frac{-5}{6}-\\frac12$"], correct: 1,
        explain: "Chuy·ªÉn $+\\frac12$ sang v·∫ø ph·∫£i th√†nh $-\\frac12$: $-x=\\frac{-5}{6}-\\frac12$." },

      { q: "L√†m tr√≤n ƒë·∫øn h√†ng ph·∫ßn ngh√¨n c·ªßa $\\sqrt{17}$ l√†:", options: ["4,123","4,12","4,1231","4,124"], correct: 0,
        explain: "$\\sqrt{17}\\approx 4{,}123105...$ l√†m tr√≤n ƒë·∫øn ph·∫ßn ngh√¨n ƒë∆∞·ª£c $4{,}123$." },

      { q: "Gi√° tr·ªã c·ªßa $-\\sqrt{64}+3\\sqrt{49}$ l√†:", options: ["29","15","13","-13"], correct: 2,
        explain: "$\\sqrt{64}=8$, $\\sqrt{49}=7$ n√™n $-8+3\\cdot 7=-8+21=13$." },

      { q: "Bi·ªÉu th·ª©c n√†o KH√îNG cho k·∫øt qu·∫£ $x^{12}$?", options: ["$x^{13}:x$","$x^5\\cdot x^7$","$x^4\\cdot x^3$","$(x^4)^3$"], correct: 2,
        explain: "$x^{13}:x=x^{12}$; $x^5\\cdot x^7=x^{12}$; $(x^4)^3=x^{12}$. C√≤n $x^4\\cdot x^3=x^7\\ne x^{12}$." },

      { q: "T√≠nh $\\left|\\frac{-2}{43}\\right|$ b·∫±ng:", options: ["$\\frac{-2}{43}$","$\\frac{2}{43}$","$\\frac{43}{2}$","$-\\left|\\frac{-2}{43}\\right|$"], correct: 1,
        explain: "Gi√° tr·ªã tuy·ªát ƒë·ªëi l√†m s·ªë d∆∞∆°ng: $\\left|\\frac{-2}{43}\\right|=\\frac{2}{43}$." },

      { q: "CƒÉn b·∫≠c hai s·ªë h·ªçc c·ªßa $81$ l√†:", options: ["9","+9","-9","81"], correct: 0,
        explain: "CƒÉn b·∫≠c hai s·ªë h·ªçc l√† s·ªë kh√¥ng √¢m: $\\sqrt{81}=9$." },

      { q: "B·ªè d·∫•u ngo·∫∑c: $(-38+21)-(21-38)$ ƒë∆∞·ª£c:", options: ["$-38+21-21+38$","$38+21+21-38$","$38-21-21+38$","$-38+21+21+38$"], correct: 0,
        explain: "D·∫•u ‚Äútr·ª´‚Äù tr∆∞·ªõc ngo·∫∑c ƒë·ªïi d·∫•u c√°c h·∫°ng t·ª≠: $(-38+21)-(21-38)=-38+21-21+38$." },

      { q: "Trong c√°c s·ªë sau, s·ªë v√¥ t·ªâ l√†:", options: ["$\\frac{3}{2}$","$\\sqrt{2}$","0","$3,(3)$"], correct: 1,
        explain: "$\\sqrt{2}$ l√† s·ªë v√¥ t·ªâ. $\\frac{3}{2}$ h·ªØu t·ªâ, $0$ h·ªØu t·ªâ, $3,(3)=3{,}\\overline{3}$ h·ªØu t·ªâ." },

      { q: "Ch·ªçn tr·∫£ l·ªùi ƒë√∫ng:", options: ["$-2\\in\\mathbb{N}$","$3{,}2\\in\\mathbb{Z}$","$\\sqrt{3}\\in\\mathbb{Q}$","$2\\in\\mathbb{R}$"], correct: 3,
        explain: "$2$ l√† s·ªë th·ª±c n√™n $2\\in\\mathbb{R}$. C√°c m·ªánh ƒë·ªÅ c√≤n l·∫°i ƒë·ªÅu sai." },

      { q: "S·ªë $50{,}91$ l√†m tr√≤n v·ªõi ƒë·ªô ch√≠nh x√°c $d=0{,}01$ (h√†ng ph·∫ßn trƒÉm). Ch·ªçn ƒë√°p √°n ƒë√∫ng trong c√°c l·ª±a ch·ªçn sau:", options: ["50","50,9","50,5","51,5"], correct: 1,
        explain: "Trong b·ªô l·ª±a ch·ªçn n√†y, ƒë√°p √°n ph√π h·ª£p ki·ªÉu l√†m tr√≤n th√¥ng d·ª•ng l√† l√†m tr√≤n ƒë·∫øn 1 ch·ªØ s·ªë th·∫≠p ph√¢n: $50{,}91\\to 50{,}9$." },

      { q: "T√≠nh $1,(5)-2\\frac{1}{3}+3,(4)$ v√† l√†m tr√≤n ƒë·∫øn h√†ng ph·∫ßn trƒÉm:", options: ["2,7","2,67","2,667","2,66"], correct: 1,
        explain: "$1,(5)=1{,}\\overline{5}$; $2\\frac13=2{,}\\overline{3}$; $3,(4)=3{,}\\overline{4}$. T√≠nh ra $\\approx 2{,}666...$ l√†m tr√≤n ph·∫ßn trƒÉm ƒë∆∞·ª£c $2{,}67$." },

      { q: "Cho $|x|=11{,}2$ th√¨ $x$ b·∫±ng:", options: ["$x=11{,}2$","$x=-11{,}2$","$x=11{,}2$ ho·∫∑c $x=-11{,}2$","$x=112$"], correct: 2,
        explain: "N·∫øu $|x|=a>0$ th√¨ $x=a$ ho·∫∑c $x=-a$. ·ªû ƒë√¢y $a=11{,}2$." },

      { q: "Bi·∫øt $x^2=2$ th√¨ $x$ b·∫±ng:", options: ["$x=\\sqrt{2}$ ho·∫∑c $x=\\sqrt{-2}$","$x=\\pm\\sqrt{4}$","$x=4$","$x=\\sqrt{2}$ ho·∫∑c $x=-\\sqrt{2}$"], correct: 3,
        explain: "Gi·∫£i $x^2=2$ ƒë∆∞·ª£c $x=\\pm\\sqrt{2}$." },

      { q: "N·∫øu $\\sqrt{x+1}=8$ th√¨ $x=$ ?", options: ["7","8","16","63"], correct: 3,
        explain: "B√¨nh ph∆∞∆°ng hai v·∫ø: $x+1=64\\Rightarrow x=63$." },

      { q: "V·ªõi m·ªçi s·ªë th·ª±c $x$, kh·∫≥ng ƒë·ªãnh ƒë√∫ng l√†:", options: ["$|x|\\ge 0$","$|x|=-x$","$|x|=x$","$|x|=0$"], correct: 0,
        explain: "Gi√° tr·ªã tuy·ªát ƒë·ªëi lu√¥n kh√¥ng √¢m n√™n $|x|\\ge0$ v·ªõi m·ªçi $x$." },

      { q: "Ch·ªçn kh·∫≥ng ƒë·ªãnh SAI:", options: ["$|-2{,}5|=2{,}5$","$|0|=0$","$|3{,}5|=\\pm 3{,}5$","$|-\\sqrt{7}|>0$"], correct: 2,
        explain: "$|3{,}5|=3{,}5$ (kh√¥ng c√≥ d·∫•u $\\pm$). Ba kh·∫≥ng ƒë·ªãnh c√≤n l·∫°i ƒë√∫ng." },

      { q: "B√°nh ng·ªçt l√† lƒÉng tr·ª• ƒë·ª©ng tam gi√°c vu√¥ng c√≥ hai c·∫°nh g√≥c vu√¥ng $6cm,8cm$, chi·ªÅu cao $3cm$. Th·ªÉ t√≠ch l√†:", options: ["$72cm^3$","$48cm^3$","$120cm^3$","$144cm^3$"], correct: 0,
        explain: "Di·ªán t√≠ch ƒë√°y: $S=\\frac12\\cdot 6\\cdot 8=24\\,cm^2$. Th·ªÉ t√≠ch: $V=S\\cdot h=24\\cdot 3=72\\,cm^3$." }
    ];

    // L∆∞u √Ω: rawQuestions ·ªü tr√™n hi·ªán m·ªõi c√≥ 39? -> Em b·ªï sung c√¢u c√≤n thi·∫øu ƒë√∫ng theo b·ªô 40 c√¢u c√¥ ƒëang d√πng:
    // ·ªû code c√¥ ƒë∆∞a ban ƒë·∫ßu c√≥ th√™m c√¢u v·ªÅ l√†m tr√≤n / t·∫≠p h·ª£p /... v√† ƒë·ªß 40.
    // Em b·ªï sung c√¢u 40 c√≤n thi·∫øu theo list c√¥ ƒë√£ c√≥: (n·∫øu c√¥ mu·ªën thay n·ªôi dung kh√°c, c√¥ g·ª≠i em c√¢u ƒë√≥ em ch·ªânh l·∫°i)
    // (Trong file c√¥ g·ª≠i, c√¢u 40 l√† th·ªÉ t√≠ch b√°nh ‚Äî ƒë√£ c√≥; n√™n c√¢u c√≤n thi·∫øu ·ªü ƒë√¢y ch√≠nh l√† 1 c√¢u ‚ÄúcƒÉn b·∫≠c hai s·ªë h·ªçc c·ªßa 81‚Äù b·ªã tr√πng ·ªü code c√¥.
    // ·ªû b·∫£n ho√†n ch·ªânh, em s·∫Ω ƒë·∫£m b·∫£o ƒë·ªß 40 b·∫±ng c√°ch KH√îNG lo·∫°i c√¢u tr√πng, m√† gi·ªØ ƒë√∫ng 40 c√¢u nh∆∞ c√¥ ƒëang d√πng.)
    //
    // => ƒê·ªÉ ƒë·∫£m b·∫£o ƒë√∫ng "40 c√¢u nh∆∞ c√¥ ƒëang c√≥", em s·∫Ω d√πng lu√¥n m·∫£ng QUESTIONS_FINAL b√™n d∆∞·ªõi:
    const QUESTIONS_FINAL = [
      // 40 c√¢u ƒë√∫ng theo code c√¥ ƒë∆∞a (ƒë√£ g·∫Øn explain).
      // 1..23 l·∫•y t·ª´ rawQuestions (19 c√¢u ƒë·∫ßu + ...), r·ªìi ch√®n th√™m c√°c c√¢u c√¥ c√≥ trong code g·ªëc nh∆∞ng rawQuestions ch∆∞a li·ªát k√™.
      // ƒê·ªÉ tr√°nh r·ªëi: em d√πng l·∫°i danh s√°ch y h·ªát code c√¥ ƒë∆∞a (40 ph·∫ßn t·ª≠) nh∆∞ng chu·∫©n ho√° + explain.
      // ----
      { q: "Gi√° tr·ªã tuy·ªát ƒë·ªëi c·ªßa 7,82 l√†:", options: ["8,27","7,82","-7,82","7,8"], correct: 1, explain: "Gi√° tr·ªã tuy·ªát ƒë·ªëi lu√¥n kh√¥ng √¢m: $|7{,}82|=7{,}82$." },
      { q: "K·∫øt qu·∫£ so s√°nh hai s·ªë th·∫≠p ph√¢n 65,312 v√† 65,314 l√†:", options: ["$65,312 < 65,314$","$65,312 > 65,314$","$65,312 = 65,314$","$65,312 \\le 65,314$"], correct: 0, explain: "So s√°nh ph·∫ßn th·∫≠p ph√¢n: $312<314$ n√™n $65{,}312<65{,}314$." },
      { q: "CƒÉn b·∫≠c hai s·ªë h·ªçc c·ªßa 81 l√†:", options: ["9","8","15","-18"], correct: 0, explain: "CƒÉn b·∫≠c hai s·ªë h·ªçc l√† s·ªë kh√¥ng √¢m: $\\sqrt{81}=9$." },
      { q: "S·ªë ƒë·ªëi c·ªßa s·ªë $\\frac{15}{18}$ l√†:", options: ["$1\\frac{15}{8}$","$-\\frac{15}{18}$","$-\\sqrt{25}$","$9^2$"], correct: 1, explain: "S·ªë ƒë·ªëi c·ªßa $a$ l√† $-a$ n√™n s·ªë ƒë·ªëi c·ªßa $\\frac{15}{18}$ l√† $-\\frac{15}{18}$." },
      { q: "Gi√° tr·ªã tuy·ªát ƒë·ªëi c·ªßa $-\\sqrt{25}$ l√†:", options: ["5","$\\sqrt{25}$","-9","-5"], correct: 0, explain: "$\\sqrt{25}=5$ n√™n $-\\sqrt{25}=-5$, do ƒë√≥ $|-5|=5$." },
      { q: "S·ªë n√†o vi·∫øt ƒë∆∞·ª£c d∆∞·ªõi d·∫°ng s·ªë th·∫≠p ph√¢n h·ªØu h·∫°n:", options: ["$\\frac{-6}{75}$","$\\frac{-6}{76}$","$\\frac{7}{30}$","$\\frac{-7}{30}$"], correct: 0, explain: "$\\frac{-6}{75}=\\frac{-2}{25}$, m·∫´u ch·ªâ g·ªìm 5 n√™n th·∫≠p ph√¢n h·ªØu h·∫°n." },
      { q: "T·∫≠p h·ª£p c√°c s·ªë v√¥ t·ªâ k√≠ hi·ªáu l√†:", options: ["N","Q","R","I"], correct: 3, explain: "S·ªë v√¥ t·ªâ k√≠ hi·ªáu $I$ (hay $\\mathbb{I}$)." },
      { q: "Ch·ª©ng minh ƒë·ªãnh l√≠ l√†:", options: ["D√πng h√¨nh v·∫Ω suy ra k·∫øt lu·∫≠n","D√πng l·∫≠p lu·∫≠n t·ª´ gi·∫£ thi·∫øt suy ra k·∫øt lu·∫≠n","D√πng ƒëo ƒë·∫°c th·ª±c t·∫ø","D√πng tr·ª±c gi√°c"], correct: 1, explain: "Ch·ª©ng minh l√† l·∫≠p lu·∫≠n logic t·ª´ gi·∫£ thi·∫øt suy ra k·∫øt lu·∫≠n." },
      { q: "Ph√°t bi·ªÉu n√†o sau ƒë√¢y l√† sai?", options: ["M·ªçi s·ªë v√¥ t·ªâ ƒë·ªÅu l√† s·ªë th·ª±c","M·ªçi s·ªë th·ª±c ƒë·ªÅu l√† s·ªë v√¥ t·ªâ","S·ªë 0 l√† s·ªë h·ªØu t·ªâ","$\\sqrt{7}$ l√† s·ªë v√¥ t·ªâ"], correct: 1, explain: "S·ªë th·ª±c g·ªìm c·∫£ h·ªØu t·ªâ v√† v√¥ t·ªâ n√™n m·ªánh ƒë·ªÅ ‚Äúm·ªçi s·ªë th·ª±c ƒë·ªÅu l√† v√¥ t·ªâ‚Äù sai." },
      { q: "B·ªï sung k·∫øt lu·∫≠n: ‚ÄúN·∫øu hai ƒë∆∞·ªùng th·∫≥ng a v√† b c√πng vu√¥ng g√≥c v·ªõi m·ªôt ƒë∆∞·ªùng th·∫≥ng th·ª© ba c th√¨‚Ä¶‚Äù", options: ["a song song v·ªõi b","a v√† b c·∫Øt nhau","b song song v·ªõi c","a v√† b tr√πng nhau"], correct: 0, explain: "Hai ƒë∆∞·ªùng th·∫≥ng c√πng vu√¥ng g√≥c v·ªõi ƒë∆∞·ªùng th·∫≥ng th·ª© ba th√¨ song song: $a\\parallel b$." },
      { q: "X√°c ƒë·ªãnh gi·∫£ thi·∫øt c·ªßa ƒë·ªãnh l√≠: ¬´ N·∫øu hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng vu√¥ng g√≥c v·ªõi m·ªôt ƒë∆∞·ªùng th·∫≥ng th·ª© ba th√¨ ch√∫ng song song v·ªõi nhau ¬ª.", options: ["Hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát","Hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng vu√¥ng g√≥c","Hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng vu√¥ng g√≥c v·ªõi m·ªôt ƒë∆∞·ªùng th·∫≥ng th·ª© ba","Ch√∫ng song song v·ªõi nhau"], correct: 2, explain: "Gi·∫£ thi·∫øt l√† ph·∫ßn sau ch·ªØ ‚ÄúN·∫øu ‚Ä¶‚Äù: hai ƒë∆∞·ªùng th·∫≥ng ph√¢n bi·ªát c√πng vu√¥ng g√≥c v·ªõi ƒë∆∞·ªùng th·∫≥ng th·ª© ba." },
      { q: "Cho $\\widehat{xOy}=140^{\\circ}$, Om l√† tia ph√¢n gi√°c. S·ªë ƒëo $\\widehat{xOm}$ l√†:", options: ["$150^{\\circ}$","$70^{\\circ}$","$130^{\\circ}$","$180^{\\circ}$"], correct: 1, explain: "Tia ph√¢n gi√°c chia ƒë√¥i g√≥c: $\\frac{140^{\\circ}}{2}=70^{\\circ}$." },
      { q: "T·ªïng s·ªë ƒëo hai g√≥c k·ªÅ b√π b·∫±ng:", options: ["$180^{\\circ}$","$120^{\\circ}$","$90^{\\circ}$","$60^{\\circ}$"], correct: 0, explain: "G√≥c k·ªÅ b√π c√≥ t·ªïng $180^{\\circ}$." },
      { q: "Cho $\\Delta MNP$. Qua M v·∫Ω a // NP, qua P v·∫Ω b // MN. S·ªë ƒë∆∞·ªùng th·∫≥ng a, b v·∫Ω ƒë∆∞·ª£c l·∫ßn l∆∞·ª£t l√†:", options: ["1; 1","2; 2","3; 3","V√¥ s·ªë"], correct: 0, explain: "Qua m·ªôt ƒëi·ªÉm ngo√†i m·ªôt ƒë∆∞·ªùng th·∫≥ng ch·ªâ k·∫ª ƒë∆∞·ª£c m·ªôt ƒë∆∞·ªùng song song ‚áí a:1, b:1." },
      { q: "Qua m·ªôt ƒëi·ªÉm ·ªü ngo√†i m·ªôt ƒë∆∞·ªùng th·∫≥ng c√≥ bao nhi√™u ƒë∆∞·ªùng th·∫≥ng song song v·ªõi ƒë∆∞·ªùng th·∫≥ng ƒë√≥?", options: ["Ch·ªâ c√≥ m·ªôt","C√≥ v√¥ s·ªë","C√≥ √≠t nh·∫•t m·ªôt","Kh√¥ng c√≥"], correct: 0, explain: "Ti√™n ƒë·ªÅ ∆†-clit: ch·ªâ c√≥ m·ªôt." },
      { q: "G√≥c ƒë·ªëi ƒë·ªânh v·ªõi g√≥c $\\widehat{O_3}$ l√†:", options: ["$\\widehat{O_1}$","$\\widehat{O_2}$","$\\widehat{O_3}$","$\\widehat{O_4}$"], correct: 0, explain: "G√≥c ƒë·ªëi ƒë·ªânh c√≥ c√°c c·∫°nh l√† c√°c tia ƒë·ªëi nhau. Theo h√¨nh chu·∫©n: $O_1$ ƒë·ªëi ƒë·ªânh $O_3$." },
      { q: "N·∫øu $\\widehat{M_1}=80^{\\circ}$ th√¨ g√≥c k·ªÅ b√π v·ªõi $\\widehat{M_1}$ l√†:", options: ["$60^{\\circ}$","$180^{\\circ}$","$80^{\\circ}$","$100^{\\circ}$"], correct: 3, explain: "K·ªÅ b√π: $180^{\\circ}-80^{\\circ}=100^{\\circ}$." },
      { q: "T·∫≠p h·ª£p s·ªë th·ª±c ƒë∆∞·ª£c k√≠ hi·ªáu l√†:", options: ["Q","N","R","I"], correct: 2, explain: "T·∫≠p h·ª£p s·ªë th·ª±c k√≠ hi·ªáu $R$ (hay $\\mathbb{R}$)." },
      { q: "Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒê√öNG?", options: ["$\\sqrt{2};\\sqrt{3};\\sqrt{5}$ l√† c√°c s·ªë th·ª±c","S·ªë nguy√™n kh√¥ng l√† s·ªë th·ª±c","S·ªë 0 v·ª´a l√† s·ªë h·ªØu t·ªâ v·ª´a l√† s·ªë v√¥ t·ªâ","1/3 l√† s·ªë v√¥ t·ªâ"], correct: 0, explain: "C√°c cƒÉn b·∫≠c hai kh√¥ng ho√†n ch·ªânh l√† v√¥ t·ªâ nh∆∞ng v·∫´n thu·ªôc s·ªë th·ª±c." },
      { q: "Ph√¢n s·ªë n√†o vi·∫øt ƒë∆∞·ª£c d∆∞·ªõi d·∫°ng s·ªë th·∫≠p ph√¢n v√¥ h·∫°n tu·∫ßn ho√†n?", options: ["$\\frac{3}{8}$","$\\frac{6}{9}$","$\\frac{17}{25}$","$\\frac{9}{6}$"], correct: 1, explain: "$\\frac{6}{9}=\\frac{2}{3}=0,\\overline{6}$ l√† v√¥ h·∫°n tu·∫ßn ho√†n." },
      { q: "S·ªë ƒë·ªëi c·ªßa s·ªë $\\frac{-2}{5}$ l√†:", options: ["$\\frac{2}{5}$","$\\frac{-5}{2}$","$\\frac{5}{2}$","0"], correct: 0, explain: "S·ªë ƒë·ªëi c·ªßa $-\\frac25$ l√† $\\frac25$." },
      { q: "Th·ªÉ t√≠ch h√¨nh l·∫≠p ph∆∞∆°ng c√≥ c·∫°nh 0,05m l√†:", options: ["$25m^{3}$","$0,0125m^{3}$","$0,000125m^{3}$","$0,125dm^{3}$"], correct: 2, explain: "$V=a^3=(0,05)^3=0,000125\\,m^3$." },
      { q: "H√¨nh lƒÉng tr·ª• ƒë·ª©ng tam gi√°c, h=10cm, $S_{xq}=90cm^2$. Chu vi ƒë√°y l√†:", options: ["10 cm","$9cm^{2}$","100 cm","9 cm"], correct: 3, explain: "$S_{xq}=P_{ƒë√°y}\\cdot h \\Rightarrow P_{ƒë√°y}=90/10=9cm$." },
      { q: "T·ª´ $-x+\\frac{1}{2}=\\frac{-5}{6}$ suy ra:", options: ["$-x=\\frac{-5}{6}+\\frac{1}{2}$","$-x=\\frac{-5}{6}-\\frac{1}{2}$","$x=\\frac{-5}{6}+\\frac{1}{2}$","$x=\\frac{-5}{6}-\\frac{1}{2}$"], correct: 1, explain: "Chuy·ªÉn $+\\frac12$ sang v·∫ø ph·∫£i th√†nh $-\\frac12$: $-x=\\frac{-5}{6}-\\frac12$." },
      { q: "L√†m tr√≤n ƒë·∫øn h√†ng ph·∫ßn ngh√¨n c·ªßa $\\sqrt{17}$ l√†:", options: ["4,123","4,12","4,1231","4,124"], correct: 0, explain: "$\\sqrt{17}\\approx 4,123105...\\Rightarrow$ l√†m tr√≤n ph·∫ßn ngh√¨n: 4,123." },
      { q: "Gi√° tr·ªã c·ªßa $-\\sqrt{64}+3\\sqrt{49}$ l√†:", options: ["29","15","13","-13"], correct: 2, explain: "$-8+3\\cdot 7=13$." },
      { q: "S·ªë $x^{12}$ KH√îNG ph·∫£i k·∫øt qu·∫£ c·ªßa ph√©p t√≠nh n√†o:", options: ["$x^{13}:x$","$x^5\\cdot x^7$","$x^4\\cdot x^3$","$(x^4)^3$"], correct: 2, explain: "$x^4\\cdot x^3=x^7$, kh√¥ng ph·∫£i $x^{12}$." },
      { q: "T√≠nh $\\left|\\frac{-2}{43}\\right|$ b·∫±ng:", options: ["$\\frac{-2}{43}$","$\\frac{2}{43}$","$\\frac{43}{2}$","$-|\\frac{-2}{43}|$"], correct: 1, explain: "Gi√° tr·ªã tuy·ªát ƒë·ªëi l√†m s·ªë d∆∞∆°ng: $\\frac{2}{43}$." },
      { q: "CƒÉn b·∫≠c hai s·ªë h·ªçc c·ªßa 81 l√†:", options: ["9","+9","-9","81"], correct: 0, explain: "CƒÉn b·∫≠c hai s·ªë h·ªçc l√† s·ªë kh√¥ng √¢m: $\\sqrt{81}=9$." },
      { q: "B·ªè d·∫•u ngo·∫∑c: $(-38+21)-(21-38)$ ƒë∆∞·ª£c:", options: ["$-38+21-21+38$","$38+21+21-38$","$38-21-21+38$","$-38+21+21+38$"], correct: 0, explain: "Tr·ª´ ngo·∫∑c th·ª© hai ƒë·ªïi d·∫•u: $-38+21-21+38$." },
      { q: "Trong c√°c s·ªë sau, s·ªë v√¥ t·ªâ l√†:", options: ["$\\frac{3}{2}$","$\\sqrt{2}$","0","3,(3)"], correct: 1, explain: "$\\sqrt{2}$ l√† v√¥ t·ªâ." },
      { q: "Ch·ªçn tr·∫£ l·ªùi ƒë√∫ng:", options: ["$-2\\in N$","$3,2\\in Z$","$\\sqrt{3}\\in Q$","$2\\in R$"], correct: 3, explain: "$2$ l√† s·ªë th·ª±c n√™n $2\\in R$." },
      { q: "S·ªë 50,91 ƒë∆∞·ª£c l√†m tr√≤n v·ªõi ƒë·ªô ch√≠nh x√°c $d=0,01$ (h√†ng ph·∫ßn trƒÉm) ‚Äì ch·ªçn ƒë√°p √°n ph√π h·ª£p trong c√°c l·ª±a ch·ªçn:", options: ["50","50,9","50,5","51,5"], correct: 1, explain: "Trong b·ªô l·ª±a ch·ªçn, ƒë√°p √°n h·ª£p l√Ω theo l√†m tr√≤n 1 ch·ªØ s·ªë th·∫≠p ph√¢n l√† $50,9$." },
      { q: "T√≠nh $1,(5)-2\\frac{1}{3}+3,(4)$ l√†m tr√≤n ƒë·∫øn h√†ng ph·∫ßn trƒÉm:", options: ["2,7","2,67","2,667","2,66"], correct: 1, explain: "Gi√° tr·ªã x·∫•p x·ªâ $2,666...$ l√†m tr√≤n ph·∫ßn trƒÉm l√† $2,67$." },
      { q: "Cho $|x|=11,2$ th√¨ gi√° tr·ªã c·ªßa $x$ l√†:", options: ["$x=11,2$","$x=-11,2$","$x=11,2$ ho·∫∑c $x=-11,2$","$x=112$"], correct: 2, explain: "$|x|=a>0\\Rightarrow x=a$ ho·∫∑c $x=-a$." },
      { q: "Bi·∫øt $x^2=2$ th√¨ $x$ b·∫±ng:", options: ["$x=\\sqrt{2}$ ho·∫∑c $x=\\sqrt{-2}$","$x=\\pm\\sqrt{4}$","$x=4$","$x=\\sqrt{2}$ ho·∫∑c $x=-\\sqrt{2}$"], correct: 3, explain: "Nghi·ªám: $x=\\pm\\sqrt{2}$." },
      { q: "N·∫øu $\\sqrt{x+1}=8$ th√¨ $x=$ ?", options: ["7","8","16","63"], correct: 3, explain: "$x+1=64\\Rightarrow x=63$." },
      { q: "V·ªõi m·ªçi s·ªë th·ª±c $x$, kh·∫≥ng ƒë·ªãnh ƒë√∫ng l√†:", options: ["$|x|\\ge0$","$|x|=-x$","$|x|=x$","$|x|=0$"], correct: 0, explain: "Gi√° tr·ªã tuy·ªát ƒë·ªëi lu√¥n kh√¥ng √¢m." },
      { q: "Ch·ªçn kh·∫≥ng ƒë·ªãnh SAI:", options: ["$|-2,5|=2,5$","$|0|=0$","$|3,5|=\\pm3,5$","$|-\\sqrt{7}|>0$"], correct: 2, explain: "$|3,5|=3,5$ ch·ª© kh√¥ng ph·∫£i $\\pm3,5$." },
      { q: "B√°nh ng·ªçt lƒÉng tr·ª• ƒë·ª©ng tam gi√°c vu√¥ng (6cm, 8cm), chi·ªÅu cao 3cm. Th·ªÉ t√≠ch l√†:", options: ["$72cm^{3}$","$48cm^{3}$","$120cm^{3}$","$144cm^{3}$"], correct: 0, explain: "$S_{ƒë√°y}=\\frac12\\cdot6\\cdot8=24$. $V=24\\cdot3=72\\,cm^3$." }
    ];

    // ========= Random ƒë√°p √°n + c√¢n b·∫±ng A/B/C/D =========
    // Thu·∫≠t to√°n: gi·ªØ ƒë√∫ng n·ªôi dung ƒë√°p √°n ƒë√∫ng, random c√°c ƒë√°p √°n sai, v√† ƒë·∫∑t ƒë√°p √°n ƒë√∫ng v√†o v·ªã tr√≠ ƒëang √≠t xu·∫•t hi·ªán nh·∫•t.
    let questions = [];
    function prepareQuestionsBalanced() {
      const counts = [0,0,0,0]; // s·ªë l·∫ßn ƒë√°p √°n ƒë√∫ng r∆°i v√†o A,B,C,D
      questions = QUESTIONS_FINAL.map((item) => {
        const correctText = item.options[item.correct];
        const wrongTexts = item.options.filter((_, i) => i !== item.correct);
        const wrongShuffled = shuffle(wrongTexts);

        // ch·ªçn v·ªã tr√≠ A/B/C/D c√≥ count nh·ªè nh·∫•t
        let targetPos = 0;
        for (let i = 1; i < 4; i++) if (counts[i] < counts[targetPos]) targetPos = i;

        const finalOpts = new Array(4);
        finalOpts[targetPos] = correctText;

        let wi = 0;
        for (let i = 0; i < 4; i++) {
          if (i === targetPos) continue;
          finalOpts[i] = wrongShuffled[wi++];
        }

        counts[targetPos]++;

        return {
          q: item.q,
          options: finalOpts,
          correct: targetPos,
          explain: item.explain || "C√¥ b·ªï sung gi√∫p em ph·∫ßn gi·∫£i th√≠ch cho c√¢u n√†y nh√©."
        };
      });

      // N·∫øu c√¥ mu·ªën random c·∫£ th·ª© t·ª± c√¢u h·ªèi, m·ªü d√≤ng d∆∞·ªõi:
      // questions = shuffle(questions);
    }

    // ========= Game state =========
    let currentIdx = 0;
    let score = 0;
    let audioCtx = null;
    let confettiAnimId = null;

    function ensureAudio() {
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      if (audioCtx.state === "suspended") audioCtx.resume();
    }

    function playSound(type) {
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain);
      gain.connect(audioCtx.destination);

      if (type === "correct") {
        osc.type = "sine";
        osc.frequency.setValueAtTime(523.25, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1046.5, audioCtx.currentTime + 0.1);
        gain.gain.setValueAtTime(0.25, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.45);
        osc.start();
        osc.stop(audioCtx.currentTime + 0.45);
      } else if (type === "wrong") {
        osc.type = "sawtooth";
        osc.frequency.setValueAtTime(150, audioCtx.currentTime);
        osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.25);
        gain.gain.setValueAtTime(0.22, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.25);
        osc.start();
        osc.stop(audioCtx.currentTime + 0.25);
      } else if (type === "fanfare") {
        const now = audioCtx.currentTime;
        [523.25, 659.25, 783.99, 1046.5].forEach((freq, i) => {
          const o = audioCtx.createOscillator();
          const g = audioCtx.createGain();
          o.connect(g);
          g.connect(audioCtx.destination);
          o.frequency.value = freq;
          o.start(now + i * 0.1);
          g.gain.setValueAtTime(0.16, now + i * 0.1);
          g.gain.exponentialRampToValueAtTime(0.001, now + i * 0.1 + 0.45);
          o.stop(now + i * 0.1 + 0.45);
        });
      }
    }

    function fireConfetti() {
      const canvas = document.getElementById("confetti-canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const pieces = [];
      const colors = ["#f00","#0f0","#00f","#ff0","#0ff","#f0f"];
      for (let i = 0; i < 140; i++) {
        pieces.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          w: Math.random() * 10 + 4,
          h: Math.random() * 10 + 4,
          color: colors[Math.floor(Math.random() * colors.length)],
          vy: Math.random() * 5 + 2,
          vx: Math.random() * 4 - 2
        });
      }

      if (confettiAnimId) cancelAnimationFrame(confettiAnimId);

      function loop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        let active = false;

        for (const p of pieces) {
          p.y += p.vy;
          p.x += p.vx;
          ctx.fillStyle = p.color;
          ctx.fillRect(p.x, p.y, p.w, p.h);
          if (p.y < canvas.height) active = true;
        }

        if (active) confettiAnimId = requestAnimationFrame(loop);
      }
      loop();
    }

    function startGame() {
      ensureAudio();
      prepareQuestionsBalanced();

      document.getElementById("start-screen").classList.add("hidden");
      document.getElementById("game-screen").classList.remove("hidden");
      document.getElementById("result-screen").classList.add("hidden");

      score = 0;
      currentIdx = 0;
      renderQuestion();
    }

    function renderQuestion() {
      if (currentIdx >= questions.length) {
        endGame();
        return;
      }

      const qData = questions[currentIdx];
      document.getElementById("current-q").innerText = currentIdx + 1;
      document.getElementById("score").innerText = score;
      document.getElementById("mascot-reaction").innerText = "ü§î";

      // c√¢u h·ªèi (MathJax c·∫ßn innerHTML)
      const qEl = document.getElementById("question-text");
      qEl.innerHTML = qData.q;

      document.getElementById("question-sub").innerText = "Ch·ªçn ƒë√°p √°n ƒë√∫ng (A, B, C ho·∫∑c D).";

      // ·∫©n gi·∫£i th√≠ch
      document.getElementById("explain-box").classList.add("hidden");
      document.getElementById("explain-text").innerHTML = "";

      const optsDiv = document.getElementById("options-container");
      optsDiv.innerHTML = "";

      qData.options.forEach((optText, idx) => {
        const btn = document.createElement("button");
        btn.className = "option-btn bg-white p-6 rounded-xl shadow-md text-lg font-semibold text-gray-700 hover:bg-indigo-50 w-full text-left";
        btn.innerHTML = `<span class="font-bold text-indigo-500 mr-2">${letter(idx)}.</span> ${optText}`;
        btn.onclick = () => checkAnswer(idx, btn);
        optsDiv.appendChild(btn);
      });

      if (window.MathJax) MathJax.typesetPromise();
    }

    function lockOptions() {
      const buttons = document.querySelectorAll(".option-btn");
      buttons.forEach(b => b.disabled = true);
      return buttons;
    }

    function showExplanation(qData, correctIdx) {
      const box = document.getElementById("explain-box");
      const ex = document.getElementById("explain-text");

      ex.innerHTML = `
        <div class="mb-2 font-semibold text-gray-700">ƒê√°p √°n ƒë√∫ng: <span class="text-emerald-700">${letter(correctIdx)}</span></div>
        <div>${qData.explain || ""}</div>
      `;

      box.classList.remove("hidden");
      if (window.MathJax) MathJax.typesetPromise();
    }

    function checkAnswer(selectedIndex, btnElement) {
      ensureAudio();

      const buttons = lockOptions();
      const qData = questions[currentIdx];
      const correctIndex = qData.correct;
      const isCorrect = selectedIndex === correctIndex;

      if (isCorrect) {
        btnElement.classList.add("correct-anim");
        score += 10;
        document.getElementById("score").innerText = score;
        document.getElementById("mascot-reaction").innerText = "üòç";
        playSound("correct");
        fireConfetti();
      } else {
        btnElement.classList.add("wrong-anim");
        buttons[correctIndex].classList.add("correct-anim");
        document.getElementById("mascot-reaction").innerText = "üòÖ";
        playSound("wrong");
      }

      // Hi·ªán gi·∫£i th√≠ch gi·ªëng v√≠ d·ª•
      showExplanation(qData, correctIndex);
    }

    function nextQuestion() {
      currentIdx++;
      renderQuestion();
    }

    function endGame() {
      document.getElementById("game-screen").classList.add("hidden");
      document.getElementById("result-screen").classList.remove("hidden");

      const maxScore = questions.length * 10;
      const percentage = Math.round((score / maxScore) * 100);

      document.getElementById("final-score").innerText = `${score}/${maxScore}`;
      document.getElementById("final-percent").innerText = `${percentage}%`;

      playSound("fanfare");
      fireConfetti();

      let msg = "";
      if (percentage >= 90) msg = "Xu·∫•t s·∫Øc! C√¥ tin em s·∫Ω ƒë·∫°t ƒëi·ªÉm t·ªëi ƒëa trong k·ª≥ thi t·ªõi! üåü";
      else if (percentage >= 70) msg = "L√†m t·ªët l·∫Øm! Ch·ªâ c·∫ßn c·∫©n th·∫≠n h∆°n m·ªôt ch√∫t n·ªØa th√¥i. üí™";
      else msg = "C·ªë g·∫Øng l√™n nh√©! H√£y √¥n l·∫°i c√°c c√¢u sai, c√¥ tin em s·∫Ω ti·∫øn b·ªô. ‚ù§Ô∏è";

      document.getElementById("teacher-msg").innerText = msg;
    }

    window.addEventListener("resize", () => {
      const canvas = document.getElementById("confetti-canvas");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>
