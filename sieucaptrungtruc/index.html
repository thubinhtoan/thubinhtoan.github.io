<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Si√™u C·∫•p Trung Tr·ª±c - To√°n 7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lexend', sans-serif;
            background: linear-gradient(135deg, #FFDEE9 0%, #B5FFFC 100%);
            min-height: 100vh;
        }
        .neon-card {
            background: rgba(255, 255, 255, 0.9);
            border: 4px solid #fff;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border-radius: 3rem;
        }
        .answer-btn {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .answer-btn:hover {
            transform: scale(1.03) translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.2);
        }
        .progress-bar-inner {
            transition: width 0.6s ease-in-out;
            background: linear-gradient(90deg, #f59e0b, #ef4444);
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .floating { animation: float 3s ease-in-out infinite; }
    </style>
</head>
<body class="p-4 flex items-center justify-center">

    <div id="game-wrap" class="max-w-3xl w-full neon-card p-6 md:p-12 relative overflow-hidden">
        
        <!-- M√†n h√¨nh kh·ªüi ƒë·ªông -->
        <div id="start-screen" class="text-center">
            <div class="text-8xl mb-6 floating">‚ú®</div>
            <h1 class="text-4xl md:text-6xl font-black text-purple-600 mb-4 leading-tight">SI√äU C·∫§P<br>TRUNG TR·ª∞C</h1>
            <p class="text-gray-500 text-lg mb-10">C√¥ <b>Thu B√¨nh</b> th√°ch ƒë·∫•u c·∫£ l·ªõp!<br>Ai s·∫Ω l√† ng∆∞·ªùi n·∫Øm gi·ªØ b√≠ m·∫≠t c·ªßa "C√°ch ƒë·ªÅu"?</p>
            <button onclick="startGame()" class="bg-purple-600 text-white font-bold py-5 px-16 rounded-3xl text-2xl shadow-xl hover:bg-purple-700 transition-all transform hover:rotate-2">
                TH√ÅCH ƒê·∫§U! üí•
            </button>
        </div>

        <!-- M√†n h√¨nh c√¢u h·ªèi -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <span class="bg-purple-100 text-purple-700 px-4 py-2 rounded-2xl font-bold">Th·ª≠ th√°ch: <span id="q-count">1</span>/15</span>
                <span class="bg-yellow-100 text-yellow-700 px-4 py-2 rounded-2xl font-bold">Score: <span id="score">0</span></span>
            </div>

            <div class="w-full bg-gray-100 rounded-full h-4 mb-10">
                <div id="progress" class="progress-bar-inner h-4 rounded-full" style="width: 0%"></div>
            </div>

            <div id="q-container">
                <div id="q-level" class="text-xs font-bold uppercase tracking-widest text-purple-400 mb-2"></div>
                <h2 id="q-text" class="text-xl md:text-2xl font-bold text-gray-800 mb-8 leading-snug"></h2>
                
                <div id="options" class="grid grid-cols-1 gap-4">
                    <!-- N√∫t ƒë√°p √°n -->
                </div>
            </div>
        </div>

        <!-- Modal gi·∫£i th√≠ch -->
        <div id="modal" class="hidden fixed inset-0 flex items-center justify-center z-50 p-4">
            <div class="absolute inset-0 bg-purple-900/40 backdrop-blur-md"></div>
            <div class="bg-white rounded-[3rem] max-w-md w-full p-8 relative shadow-2xl text-center">
                <div id="modal-emoji" class="text-7xl mb-4"></div>
                <h3 id="modal-title" class="text-3xl font-black mb-4"></h3>
                <div class="bg-gray-50 p-5 rounded-3xl mb-8 border-l-8 border-purple-500 text-left">
                    <p id="modal-rat" class="text-gray-600 text-sm italic leading-relaxed"></p>
                </div>
                <button onclick="nextQ()" class="w-full bg-purple-600 text-white font-bold py-4 rounded-2xl hover:bg-purple-700">
                    TI·∫æP T·ª§C ‚ûî
                </button>
            </div>
        </div>

        <!-- M√†n h√¨nh k·∫øt th√∫c -->
        <div id="end-screen" class="hidden text-center">
            <div class="text-9xl mb-6">üèÜ</div>
            <h2 class="text-4xl font-black text-purple-600 mb-2">PH√Å ƒê·∫¢O!</h2>
            <p class="text-xl mb-8">K·∫øt qu·∫£ c·ªßa em: <span id="final-score" class="text-3xl font-bold text-red-500">0</span>/15</p>
            <div id="rank" class="text-gray-500 mb-10 font-bold px-6"></div>
            <button onclick="location.reload()" class="bg-gray-800 text-white font-bold py-4 px-12 rounded-2xl">
                CH∆†I L·∫†I üîÑ
            </button>
        </div>
    </div>

   <script>
/* ================== TOOL RANDOM ================== */
function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

/* ================== √ÇM THANH ================== */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playSfx(correct) {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.connect(gain);
    gain.connect(audioCtx.destination);

    if (correct) {
        osc.frequency.setValueAtTime(523.25, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.2);
    } else {
        osc.type = 'square';
        osc.frequency.setValueAtTime(150, audioCtx.currentTime);
    }

    gain.gain.setValueAtTime(0.08, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.3);
}
        const questions = [
            // NH·∫¨N BI·∫æT (6 c√¢u)
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "ƒê∆∞·ªùng trung tr·ª±c c·ªßa m·ªôt ƒëo·∫°n th·∫≥ng l√† ƒë∆∞·ªùng th·∫≥ng:",
                opts: ["ƒêi qua trung ƒëi·ªÉm c·ªßa ƒëo·∫°n th·∫≥ng", "Vu√¥ng g√≥c v·ªõi ƒëo·∫°n th·∫≥ng", "Vu√¥ng g√≥c t·∫°i trung ƒëi·ªÉm c·ªßa ƒëo·∫°n th·∫≥ng", "Song song v·ªõi ƒëo·∫°n th·∫≥ng"],
                ans: 2,
                rat: "Theo ƒë·ªãnh nghƒ©a, ƒë∆∞·ªùng trung tr·ª±c ph·∫£i ƒë·ªìng th·ªùi th·ªèa m√£n 2 ƒëi·ªÅu ki·ªán: ƒëi qua trung ƒëi·ªÉm v√† vu√¥ng g√≥c."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "M·ªçi ƒëi·ªÉm n·∫±m tr√™n ƒë∆∞·ªùng trung tr·ª±c c·ªßa m·ªôt ƒëo·∫°n th·∫≥ng th√¨:",
                opts: ["C√°ch ƒë·ªÅu hai ƒë·∫ßu m√∫t c·ªßa ƒëo·∫°n th·∫≥ng ƒë√≥", "N·∫±m gi·ªØa hai ƒë·∫ßu m√∫t", "Tr√πng v·ªõi trung ƒëi·ªÉm", "C√°ch ƒë·ªÅu ƒë∆∞·ªùng th·∫≥ng"],
                ans: 0,
                rat: "ƒê√¢y l√† t√≠nh ch·∫•t c∆° b·∫£n: ƒêi·ªÉm n·∫±m tr√™n ƒë∆∞·ªùng trung tr·ª±c th√¨ c√°ch ƒë·ªÅu hai ƒë·∫ßu m√∫t c·ªßa ƒëo·∫°n th·∫≥ng."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "N·∫øu MA = MB th√¨ ƒëi·ªÉm M n·∫±m tr√™n:",
                opts: ["ƒê∆∞·ªùng th·∫≥ng AB", "ƒê∆∞·ªùng trung tr·ª±c c·ªßa ƒëo·∫°n th·∫≥ng AB", "ƒê∆∞·ªùng vu√¥ng g√≥c v·ªõi AB", "Trung ƒëi·ªÉm c·ªßa AB"],
                ans: 1,
                rat: "ƒê√¢y l√† t√≠nh ch·∫•t ƒë·∫£o: ƒêi·ªÉm c√°ch ƒë·ªÅu hai ƒë·∫ßu m√∫t c·ªßa m·ªôt ƒëo·∫°n th·∫≥ng th√¨ n·∫±m tr√™n ƒë∆∞·ªùng trung tr·ª±c c·ªßa ƒëo·∫°n th·∫≥ng ƒë√≥."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "ƒê∆∞·ªùng trung tr·ª±c c·ªßa ƒëo·∫°n th·∫≥ng AB l√† tr·ª•c ƒë·ªëi x·ª©ng c·ªßa:",
                opts: ["ƒê∆∞·ªùng th·∫≥ng AB", "ƒêo·∫°n th·∫≥ng AB", "G√≥c A", "ƒêi·ªÉm M"],
                ans: 1,
                rat: "ƒê∆∞·ªùng trung tr·ª±c l√† tr·ª•c ƒë·ªëi x·ª©ng c·ªßa ƒëo·∫°n th·∫≥ng ƒë√≥, chia ƒëo·∫°n th·∫≥ng th√†nh 2 ph·∫ßn b·∫±ng nhau v√† ƒë·ªëi x·ª©ng nhau."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Giao ƒëi·ªÉm c·ªßa ƒë∆∞·ªùng trung tr·ª±c v√† ƒëo·∫°n th·∫≥ng ch√≠nh l√†:",
                opts: ["ƒê·ªânh tam gi√°c", "Trung ƒëi·ªÉm c·ªßa ƒëo·∫°n th·∫≥ng", "Ch√¢n ƒë∆∞·ªùng cao", "Tr·ªçng t√¢m"],
                ans: 1,
                rat: "ƒê∆∞·ªùng trung tr·ª±c ƒëi qua trung ƒëi·ªÉm c·ªßa ƒëo·∫°n th·∫≥ng theo ƒë√∫ng ƒë·ªãnh nghƒ©a."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "ƒê·ªÉ v·∫Ω ƒë∆∞·ªùng trung tr·ª±c c·ªßa ƒëo·∫°n th·∫≥ng AB b·∫±ng th∆∞·ªõc v√† compa, ta v·∫Ω hai cung tr√≤n c√≥:",
                opts: ["C√πng b√°n k√≠nh, t√¢m l√† A v√† B", "B√°n k√≠nh kh√°c nhau", "T√¢m l√† trung ƒëi·ªÉm", "B√°n k√≠nh nh·ªè h∆°n AB/2"],
                ans: 0,
                rat: "Ta v·∫Ω hai cung tr√≤n t√¢m A v√† B c√≥ c√πng b√°n k√≠nh (l·ªõn h∆°n AB/2), giao ƒëi·ªÉm c·ªßa ch√∫ng n·∫±m tr√™n trung tr·ª±c."
            },
            // TH√îNG HI·ªÇU (5 c√¢u)
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho d l√† ƒë∆∞·ªùng trung tr·ª±c c·ªßa ƒëo·∫°n th·∫≥ng AB. N·∫øu MA = 7cm th√¨ MB b·∫±ng bao nhi√™u?",
                opts: ["3,5cm", "14cm", "7cm", "10cm"],
                ans: 2,
                rat: "V√¨ M n·∫±m tr√™n trung tr·ª±c n√™n MA = MB = 7cm."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Trong tam gi√°c ABC c√¢n t·∫°i A, ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa g√≥c A c≈©ng ƒë·ªìng th·ªùi l√†:",
                opts: ["ƒê∆∞·ªùng trung tr·ª±c c·ªßa c·∫°nh BC", "ƒê∆∞·ªùng trung tr·ª±c c·ªßa c·∫°nh AB", "C·∫°nh ƒë·ªëi di·ªán", "G√≥c vu√¥ng"],
                ans: 0,
                rat: "Trong tam gi√°c c√¢n, ƒë∆∞·ªùng ph√¢n gi√°c xu·∫•t ph√°t t·ª´ ƒë·ªânh c≈©ng l√† ƒë∆∞·ªùng trung tr·ª±c c·ªßa c·∫°nh ƒë√°y t∆∞∆°ng ·ª©ng."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho I l√† trung ƒëi·ªÉm AB. ƒê∆∞·ªùng th·∫≥ng d ƒëi qua I l√† ƒë∆∞·ªùng trung tr·ª±c c·ªßa AB khi:",
                opts: ["d song song v·ªõi AB", "d vu√¥ng g√≥c v·ªõi AB", "d t·∫°o v·ªõi AB g√≥c 45 ƒë·ªô", "d n·∫±m tr√™n AB"],
                ans: 1,
                rat: "I ƒë√£ l√† trung ƒëi·ªÉm, n√™n ch·ªâ c·∫ßn th√™m ƒëi·ªÅu ki·ªán d vu√¥ng g√≥c v·ªõi AB t·∫°i I th√¨ d l√† trung tr·ª±c."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho tam gi√°c MAB c√≥ MA = MB v√† g√≥c M = 60 ƒë·ªô. Khi ƒë√≥ M n·∫±m tr√™n ƒë∆∞·ªùng trung tr·ª±c AB v√† tam gi√°c MAB l√† tam gi√°c:",
                opts: ["C√¢n", "Vu√¥ng", "ƒê·ªÅu", "Vu√¥ng c√¢n"],
                ans: 2,
                rat: "Tam gi√°c c√¢n c√≥ m·ªôt g√≥c 60 ƒë·ªô l√† tam gi√°c ƒë·ªÅu."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "T·∫≠p h·ª£p c√°c ƒëi·ªÉm c√°ch ƒë·ªÅu hai ƒëi·ªÉm A v√† B cho tr∆∞·ªõc l√† ƒë∆∞·ªùng n√†o?",
                opts: ["ƒê∆∞·ªùng trung tuy·∫øn c·ªßa AB", "ƒê∆∞·ªùng trung tr·ª±c c·ªßa AB", "ƒê∆∞·ªùng th·∫≥ng AB", "V√≤ng tr√≤n t√¢m A"],
                ans: 1,
                rat: "T·∫•t c·∫£ c√°c ƒëi·ªÉm c√°ch ƒë·ªÅu A v√† B ƒë·ªÅu h·ªôi t·ª• tr√™n ƒë∆∞·ªùng trung tr·ª±c c·ªßa ƒëo·∫°n th·∫≥ng AB."
            },
            // V·∫¨N D·ª§NG (3 c√¢u)
            {
                lvl: "V·∫≠n d·ª•ng",
                q: "Cho tam gi√°c ABC c√≥ AC = 10cm. ƒê∆∞·ªùng trung tr·ª±c c·ªßa AB c·∫Øt AC t·∫°i D. Bi·∫øt BD = 4cm. T√≠nh AD?",
                opts: ["4cm", "6cm", "10cm", "14cm"],
                ans: 0,
                rat: "V√¨ D thu·ªôc trung tr·ª±c AB n√™n AD = BD. M√† BD = 4cm n√™n AD = 4cm."
            },
            {
                lvl: "V·∫≠n d·ª•ng th·ª±c t·∫ø",
                q: "(Th·ª±c t·∫ø) Hai ng√¥i nh√† A v√† B ·ªü c√πng m·ªôt ph√≠a b·ªù s√¥ng. Ng∆∞·ªùi ta mu·ªën x√¢y m·ªôt tr·∫°m b∆°m b√™n b·ªù s√¥ng sao cho c√°ch ƒë·ªÅu hai nh√†. Tr·∫°m b∆°m n·∫±m ·ªü ƒë√¢u?",
                opts: ["Giao ƒëi·ªÉm c·ªßa b·ªù s√¥ng v√† ƒë∆∞·ªùng trung tr·ª±c AB", "Giao ƒëi·ªÉm b·ªù s√¥ng v√† ƒëo·∫°n AB", "Trung ƒëi·ªÉm AB", "B·∫•t k√¨ ƒë√¢u tr√™n b·ªù s√¥ng"],
                ans: 0,
                rat: "ƒê·ªÉ c√°ch ƒë·ªÅu A v√† B, tr·∫°m b∆°m ph·∫£i n·∫±m tr√™n ƒë∆∞·ªùng trung tr·ª±c c·ªßa AB. V√¨ ph·∫£i ·ªü b√™n b·ªù s√¥ng n√™n n√≥ l√† giao ƒëi·ªÉm c·ªßa trung tr·ª±c v√† b·ªù s√¥ng."
            },
            {
                lvl: "V·∫≠n d·ª•ng",
                q: "Cho ƒëo·∫°n th·∫≥ng AB = 8cm. ƒêi·ªÉm M n·∫±m tr√™n trung tr·ª±c AB. Bi·∫øt kho·∫£ng c√°ch t·ª´ M ƒë·∫øn AB l√† 3cm. T√≠nh ƒë·ªô d√†i MA?",
                opts: ["4cm", "5cm", "11cm", "7cm"],
                ans: 1,
                rat: "G·ªçi H l√† trung ƒëi·ªÉm AB. Ta c√≥ tam gi√°c MHA vu√¥ng t·∫°i H. $AH = 4, MH = 3 \\implies MA = \\sqrt{3^2 + 4^2} = 5cm$."
            },
            // V·∫¨N D·ª§NG CAO (1 c√¢u)
            {
                lvl: "V·∫≠n d·ª•ng cao",
                q: "Cho ƒë∆∞·ªùng th·∫≥ng d v√† hai ƒëi·ªÉm A, B n·∫±m v·ªÅ m·ªôt ph√≠a c·ªßa d. T√¨m ƒëi·ªÉm M tr√™n d sao cho chu vi tam gi√°c MAB nh·ªè nh·∫•t?",
                opts: ["M l√† trung ƒëi·ªÉm d", "M l√† h√¨nh chi·∫øu c·ªßa A tr√™n d", "M l√† giao ƒëi·ªÉm c·ªßa d v√† ƒë∆∞·ªùng th·∫≥ng AB'", "M l√† giao ƒëi·ªÉm c·ªßa d v√† trung tr·ª±c AB"],
                ans: 2,
                rat: "V·ªõi B' l√† ƒëi·ªÉm ƒë·ªëi x·ª©ng c·ªßa B qua d, ta c√≥ MB = MB'. Chu vi nh·ªè nh·∫•t khi AM + MB' ng·∫Øn nh·∫•t, t·ª©c A, M, B' th·∫≥ng h√†ng."
            }
        ];

       /* ================== CHU·∫®N HO√Å C√ÇU H·ªéI ================== */
questions.forEach(q => {
    q.opts = q.opts.map((t, i) => ({
        text: t,
        correct: i === q.ans
    }));
    shuffle(q.opts);
});
shuffle(questions);

/* ================== BI·∫æN GAME ================== */
let currentIdx = 0;
let score = 0;

/* ================== B·∫ÆT ƒê·∫¶U ================== */
function startGame() {
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    showQ();
}

/* ================== HI·ªÇN TH·ªä C√ÇU ================== */
function showQ() {
    const q = questions[currentIdx];
    document.getElementById('q-count').innerText = currentIdx + 1;
    document.getElementById('score').innerText = score;
    document.getElementById('q-level').innerText = `M·ª©c ƒë·ªô: ${q.lvl}`;
    document.getElementById('q-text').innerHTML = q.q;
    document.getElementById('progress').style.width =
        `${(currentIdx / questions.length) * 100}%`;

    const optsDiv = document.getElementById('options');
    optsDiv.innerHTML = '';

    q.opts.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className =
            "answer-btn bg-white border-2 border-purple-100 p-5 rounded-3xl text-left hover:border-purple-500 font-bold text-gray-700 shadow-sm flex items-center";
        btn.innerHTML = `
            <span class="w-10 h-10 rounded-2xl bg-purple-100 text-purple-600 flex items-center justify-center mr-4 text-lg">
                ${String.fromCharCode(65 + i)}
            </span>
            ${opt.text}
        `;
        btn.onclick = () => checkAns(opt.correct);
        optsDiv.appendChild(btn);
    });
}

/* ================== KI·ªÇM TRA ================== */
function checkAns(correct) {
    if (correct) {
        score++;
        playSfx(true);
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        setModal("ü•≥", "TUY·ªÜT V·ªúI!", "text-green-500");
    } else {
        playSfx(false);
        setModal("ü•∫", "C·ªê L√äN N√ÄO!", "text-red-500");
    }
    document.getElementById('modal-rat').innerHTML =
        `<b>Gi·∫£i th√≠ch:</b> ${questions[currentIdx].rat}`;
    document.getElementById('modal').classList.remove('hidden');
}

function setModal(icon, text, color) {
    document.getElementById('modal-emoji').innerText = icon;
    const title = document.getElementById('modal-title');
    title.innerText = text;
    title.className = `text-3xl font-black mb-4 ${color}`;
}

/* ================== CHUY·ªÇN C√ÇU ================== */
function nextQ() {
    document.getElementById('modal').classList.add('hidden');
    currentIdx++;
    currentIdx < questions.length ? showQ() : showEnd();
}

/* ================== K·∫æT TH√öC ================== */
function showEnd() {
    document.getElementById('quiz-screen').classList.add('hidden');
    document.getElementById('end-screen').classList.remove('hidden');
    document.getElementById('final-score').innerText = score;

    let msg = "";
    if (score === questions.length)
        msg = "üëë ƒê·ªàNH CAO! Em ch√≠nh l√† TH·∫¶N TRUNG TR·ª∞C!";
    else if (score >= 12)
        msg = "‚ú® R·∫•t t·ªët! Ki·∫øn th·ª©c c·ªßa em r·∫•t v·ªØng!";
    else if (score >= 8)
        msg = "üí™ Kh√° l·∫Øm! Luy·ªán th√™m c√¢u v·∫≠n d·ª•ng nh√©!";
    else
        msg = "‚ù§Ô∏è ƒê·ª´ng n·∫£n! √în l·∫°i b√†i v√† quay l·∫°i chinh ph·ª•c!";

    document.getElementById('rank').innerText = msg;
    confetti({ particleCount: 300, spread: 160, origin: { y: 0.6 } });
}
</script>
</body>
</html>
