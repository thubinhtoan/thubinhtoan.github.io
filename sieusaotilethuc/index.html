<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Si√™u Sao T·ªâ L·ªá Th·ª©c ‚Äì To√°n 7</title>

<!-- ===== MathJax CHU·∫®N ===== -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body{
  font-family:'Quicksand',sans-serif;
  background:radial-gradient(circle at top,#2d0f4e,#0f172a);
  min-height:100vh;
}
.glass-card{
  background:rgba(15,23,42,.92);
  border-radius:2rem;
  box-shadow:0 25px 60px rgba(0,0,0,.6);
  color:white;
}
.option-card{
  background:rgba(30,41,59,.9);
  border:1px solid rgba(148,163,184,.3);
  transition:.25s;
}
.option-card:hover{
  border-color:#f472b6;
  transform:scale(1.03);
}
.progress-bar{transition:width .4s}
</style>
</head>

<body class="p-4 flex items-center justify-center">

<div class="max-w-3xl w-full glass-card p-8">

<!-- START -->
<div id="start-screen" class="text-center">
  <h1 class="text-4xl font-extrabold text-pink-400 mb-4">‚ú® SI√äU SAO T·ªà L·ªÜ ‚ú®</h1>
  <p class="mb-6 text-gray-300">15 th·ª≠ th√°ch T·ªâ l·ªá th·ª©c ‚Äì To√°n 7</p>
  <button onclick="startGame()"
    class="bg-pink-500 hover:bg-pink-400 text-white px-10 py-4 rounded-full text-xl font-bold">
    V√ÄO GAME üöÄ
  </button>
</div>

<!-- QUIZ -->
<div id="quiz-screen" class="hidden">
  <div class="flex justify-between font-bold mb-4 text-gray-200">
    <div>C√¢u <span id="current-q">1</span>/15</div>
    <div>ƒêi·ªÉm: <span id="score">0</span></div>
  </div>

  <div class="bg-slate-700 h-3 rounded-full mb-6">
    <div id="progress" class="bg-pink-400 h-3 rounded-full progress-bar"></div>
  </div>

  <div id="question-text" class="mb-8"></div>

  <div id="choices-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
</div>

<!-- FEEDBACK -->
<div id="feedback-modal" class="hidden fixed inset-0 flex items-center justify-center bg-black/60">
  <div class="glass-card p-8 text-center max-w-md w-full">
    <div id="fb-icon" class="text-5xl mb-3"></div>
    <h2 id="fb-title" class="text-2xl font-bold mb-2"></h2>
    <div id="fb-rationale" class="text-gray-200 mb-6"></div>
    <button onclick="nextQuestion()"
      class="bg-blue-500 hover:bg-blue-400 text-white px-8 py-3 rounded-xl font-bold">
      TI·∫æP T·ª§C ‚Üí
    </button>
  </div>
</div>

<!-- END -->
<div id="end-screen" class="hidden text-center">
  <h2 class="text-4xl font-extrabold text-yellow-400 mb-4">üèÜ HO√ÄN TH√ÄNH üèÜ</h2>
  <p class="text-xl">S·ªë c√¢u ƒë√∫ng:
    <span id="final-score" class="text-pink-400 font-bold text-3xl"></span>/15
  </p>
  <p id="performance-msg" class="mt-4 font-semibold"></p>
  <button onclick="location.reload()"
    class="mt-6 bg-green-500 hover:bg-green-400 text-white px-8 py-3 rounded-full font-bold">
    CH∆†I L·∫†I
  </button>
</div>

</div>

<script>
/* ===== DATA (LATEX CHU·∫®N) ===== */
let questions=[
{
 q:`Trong t·ªâ l·ªá th·ª©c`,
 math:`\\(x/6 = 5/3\\)`,
 ask:`gi√° tr·ªã c·ªßa \\(x\\) l√†:`,
 options:["\\(10\\)","\\(15\\)","\\(2\\)","\\(30\\)"],
 correct:0,
 rationale:`Ta c√≥ \\(x = (6\\cdot5):3 = 10\\).`
},
{
 q:`N·∫øu c√≥ t·ªâ l·ªá th·ª©c`,
 math:`\\(3:5 = 9:x\\)`,
 ask:`th√¨ \\(x =\\ ?\\)`,
 options:["\\(10\\)","\\(12\\)","\\(15\\)","\\(20\\)"],
 correct:2,
 rationale:`√Åp d·ª•ng t√≠nh ch·∫•t: \\(3x = 5\\cdot9 = 45\\) n√™n \\(x = 15\\).`
},
{
 q:`T·ªâ l·ªá th·ª©c l√† ƒë·∫≥ng th·ª©c c·ªßa hai t·ªâ s·ªë d·∫°ng`,
 math:`\\(?\\)`,
 ask:``,
 options:["\\(a+b=c+d\\)","\\(a/b=c/d\\)","\\(a-b=c-b\\)","\\(ab+cd\\)"],
 correct:1,
 rationale:`Theo ƒë·ªãnh nghƒ©a, t·ªâ l·ªá th·ª©c l√† \\(a/b = c/d\\).`
}
];

/* RANDOM */
questions.sort(()=>Math.random()-.5);
let i=0,score=0;

/* START */
function startGame(){
 startScreen().classList.add("hidden");
 quizScreen().classList.remove("hidden");
 showQuestion();
}
const startScreen=()=>document.getElementById("start-screen");
const quizScreen=()=>document.getElementById("quiz-screen");

/* RENDER QUESTION */
function renderQuestion(q){
 return `
  <div class="text-center space-y-4">
    <p class="text-gray-300 text-lg">${q.q}</p>
    <div class="inline-block px-8 py-4 rounded-2xl
                bg-black/40 border border-pink-500/40">
      <span class="text-3xl font-bold text-pink-400">${q.math}</span>
    </div>
    <p class="text-gray-300 text-lg">${q.ask}</p>
  </div>`;
}

/* SHOW */
function showQuestion(){
 const q=questions[i];
 currentQ().innerText=i+1;
 scoreEl().innerText=score;
 progress().style.width=`${i/questions.length*100}%`;
 questionText().innerHTML=renderQuestion(q);

 const ctn=choices();
 ctn.innerHTML="";
 let idx=[0,1,2,3].sort(()=>Math.random()-.5);

 idx.forEach((k,n)=>{
  const b=document.createElement("button");
  b.className="option-card py-4 rounded-xl text-xl font-bold";
  b.innerHTML=`<span class="text-pink-400 mr-2">${String.fromCharCode(65+n)}.</span>${q.options[k]}`;
  b.onclick=()=>checkAnswer(k);
  ctn.appendChild(b);
 });

 MathJax.typesetPromise();
}

const currentQ=()=>document.getElementById("current-q");
const scoreEl=()=>document.getElementById("score");
const progress=()=>document.getElementById("progress");
const questionText=()=>document.getElementById("question-text");
const choices=()=>document.getElementById("choices-container");

/* CHECK */
function checkAnswer(k){
 const q=questions[i];
 feedback().classList.remove("hidden");

 if(k===q.correct){
  score++; confetti({particleCount:120,spread:70});
  fbIcon().innerText="üéâ";
  fbTitle().innerText="Ch√≠nh x√°c!";
 }else{
  fbIcon().innerText="üòÖ";
  fbTitle().innerText="Ch∆∞a ƒë√∫ng!";
 }

 fbRationale().innerHTML=`<b class="text-pink-400">Gi·∫£i th√≠ch:</b><br>${q.rationale}`;
 MathJax.typesetPromise();
}

const feedback=()=>document.getElementById("feedback-modal");
const fbIcon=()=>document.getElementById("fb-icon");
const fbTitle=()=>document.getElementById("fb-title");
const fbRationale=()=>document.getElementById("fb-rationale");

/* NEXT */
function nextQuestion(){
 feedback().classList.add("hidden");
 i++;
 if(i<questions.length) showQuestion();
 else showEnd();
}

/* END */
function showEnd(){
 quizScreen().classList.add("hidden");
 document.getElementById("end-screen").classList.remove("hidden");
 document.getElementById("final-score").innerText=score;
 document.getElementById("performance-msg").innerText=
  score===questions.length?"Xu·∫•t s·∫Øc! üåü":"C·ªë g·∫Øng th√™m nh√©!";
 confetti({particleCount:200,spread:160});
}
</script>

</body>
</html>
