<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ª≠ Th√°ch Pythagore: Chinh Ph·ª•c Tam Gi√°c Vu√¥ng</title>
    <!-- T·∫£i Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* T√πy ch·ªânh font cho ti·∫øng Vi·ªát */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .quiz-container {
            max-width: 900px;
        }
        .option-button {
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .option-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        .correct-answer {
            background-color: #4ade80 !important; /* green-400 */
            color: #166534 !important; /* green-800 */
            border-color: #16a34a !important; /* green-600 */
        }
        .incorrect-answer {
            background-color: #fca5a5 !important; /* red-300 */
            color: #b91c1c !important; /* red-700 */
            border-color: #ef4444 !important; /* red-500 */
        }
        /* Hi·ªáu ·ª©ng ph√°o hoa - Confetti */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: transparent;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s;
        }
        .confetti-visible {
            opacity: 1;
            transition: none;
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen flex items-center justify-center">

    <div id="quiz-app" class="quiz-container w-full bg-white p-6 md:p-10 rounded-xl shadow-2xl relative">
        <h1 class="text-3xl font-bold text-center text-indigo-700 mb-6">Th·ª≠ Th√°ch Pythagore: Chinh Ph·ª•c Tam Gi√°c Vu√¥ng</h1>
        <p id="difficulty-level" class="text-center text-sm font-medium text-gray-500 mb-4"></p>
        
        <!-- Kh·ªüi ƒë·ªông/K·∫øt qu·∫£ -->
        <div id="start-screen" class="text-center">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Ch√†o m·ª´ng ƒë·∫øn v·ªõi Ch∆∞∆°ng 3 - ƒê·ªãnh l√Ω Pythagore (To√°n 8)</h2>
            <p class="mb-6 text-gray-600">Tr·∫Øc nghi·ªám n√†y g·ªìm 15 c√¢u h·ªèi ƒë∆∞·ª£c x√¢y d·ª±ng theo 4 m·ª©c ƒë·ªô: Nh·∫≠n bi·∫øt (6), Th√¥ng hi·ªÉu (5), V·∫≠n d·ª•ng (3), V·∫≠n d·ª•ng cao (1).</p>
            <p class="mb-8 text-gray-600 font-medium">C√πng nhau chinh ph·ª•c ki·∫øn th·ª©c v√† nh·∫≠n nh·ªØng l·ªùi ch√∫c m·ª´ng ƒë·∫∑c bi·ªát khi tr·∫£ l·ªùi ƒë√∫ng nh√©!</p>
            <button id="start-button" class="px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105">B·∫Øt ƒê·∫ßu Th·ª≠ Th√°ch</button>
        </div>

        <!-- Ph·∫ßn Quiz -->
        <div id="quiz-content" class="hidden">
            <div id="progress-bar" class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                <div id="progress" class="bg-indigo-600 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>

            <div id="question-card" class="bg-indigo-50 p-6 rounded-xl border-t-4 border-indigo-500 mb-6">
                <p id="question-text" class="text-xl font-medium text-gray-800 mb-4"></p>
                <div id="answer-options" class="space-y-3">
                    <!-- C√°c n√∫t tr·∫£ l·ªùi s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
                </div>
            </div>

            <!-- Gi·∫£i th√≠ch (Rationale) -->
            <div id="rationale-box" class="hidden p-4 mt-4 rounded-lg bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800">
                <p class="font-semibold">Gi·∫£i th√≠ch:</p>
                <p id="rationale-text" class="mt-1 text-sm"></p>
            </div>

            <!-- N√∫t Ti·∫øp theo -->
            <button id="next-button" class="hidden w-full px-4 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition duration-300 mt-6">C√¢u Ti·∫øp Theo</button>
        </div>

        <!-- M√†n h√¨nh k·∫øt qu·∫£ -->
        <div id="result-screen" class="hidden text-center">
            <h2 class="text-3xl font-bold text-indigo-700 mb-4">Ho√†n Th√†nh Th·ª≠ Th√°ch!</h2>
            <p class="text-5xl font-extrabold text-green-600 mb-6"><span id="score-display">0</span>/15</p>
            <p id="result-message" class="text-xl text-gray-700 mb-8"></p>
            <button id="restart-button" class="px-8 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-lg hover:bg-green-700 transition duration-300 transform hover:scale-105">L√†m L·∫°i</button>
        </div>

        <!-- Confetti Emitter -->
        <div id="confetti-emitter"></div>
    </div>

    <script>
        // D·ªØ li·ªáu 15 c√¢u h·ªèi
   const quizQuestions = [
    // --- 6 C√ÇU NH·∫¨N BI·∫æT ---
    {
        level: "Nh·∫≠n bi·∫øt",
        question: "ƒê·ªãnh l√Ω Pythagore ph√°t bi·ªÉu r·∫±ng trong m·ªôt tam gi√°c vu√¥ng, b√¨nh ph∆∞∆°ng ƒë·ªô d√†i c·∫°nh huy·ªÅn b·∫±ng t·ªïng b√¨nh ph∆∞∆°ng ƒë·ªô d√†i hai c·∫°nh g√≥c vu√¥ng. C√¥ng th·ª©c ƒë√∫ng l√† g√¨?",
        options: [
            { text: "a^2 + b^2 = c^2", isCorrect: true, rationale: "Trong tam gi√°c vu√¥ng: a^2 + b^2 = c^2." },
            { text: "a + b = c", isCorrect: false, rationale: "ƒê·ªãnh l√Ω Pythagore li√™n quan ƒë·∫øn b√¨nh ph∆∞∆°ng ƒë·ªô d√†i c√°c c·∫°nh." },
            { text: "c^2 - a^2 = b^2", isCorrect: false, rationale: "ƒê√¢y l√† d·∫°ng bi·∫øn ƒë·ªïi, kh√¥ng ph·∫£i ph√°t bi·ªÉu chu·∫©n." },
            { text: "2a + 2b = 2c", isCorrect: false, rationale: "ƒê√¢y l√† c√¥ng th·ª©c chu vi, kh√¥ng ƒë√∫ng." }
        ],
        hint: "H√£y nh·ªõ ƒë·ªãnh l√Ω li√™n quan ƒë·∫øn b√¨nh ph∆∞∆°ng ƒë·ªô d√†i c√°c c·∫°nh."
    },
    {
        level: "Nh·∫≠n bi·∫øt",
        question: "Trong tam gi√°c vu√¥ng ABC t·∫°i A, c·∫°nh n√†o l√† c·∫°nh huy·ªÅn?",
        options: [
            { text: "C·∫°nh AB", isCorrect: false, rationale: "AB l√† c·∫°nh g√≥c vu√¥ng." },
            { text: "C·∫°nh BC", isCorrect: true, rationale: "C·∫°nh huy·ªÅn ƒë·ªëi di·ªán g√≥c vu√¥ng." },
            { text: "C·∫°nh AC", isCorrect: false, rationale: "AC l√† c·∫°nh g√≥c vu√¥ng." },
            { text: "C·∫°nh AH (v·ªõi H l√† ch√¢n ƒë∆∞·ªùng cao)", isCorrect: false, rationale: "AH l√† ƒë∆∞·ªùng cao." }
        ],
        hint: "C·∫°nh huy·ªÅn l√† c·∫°nh d√†i nh·∫•t."
    },
    {
        level: "Nh·∫≠n bi·∫øt",
        question: "M·ªôt tam gi√°c vu√¥ng c√≥ hai c·∫°nh g√≥c vu√¥ng d√†i 3 cm v√† 4 cm. ƒê·ªô d√†i c·∫°nh huy·ªÅn l√† bao nhi√™u?",
        options: [
            { text: "7 cm", isCorrect: false, rationale: "3 + 4 kh√¥ng ph·∫£i l√† c·∫°nh huy·ªÅn." },
            { text: "25 cm", isCorrect: false, rationale: "25 l√† c^2, kh√¥ng ph·∫£i c." },
            { text: "5 cm", isCorrect: true, rationale: "c = sqrt(3^2 + 4^2) = 5 cm." },
            { text: "sqrt(7) cm", isCorrect: false, rationale: "Sai c√¥ng th·ª©c." }
        ],
        hint: "C√¥ng th·ª©c: c = sqrt(a^2 + b^2)."
    },
    {
        level: "Nh·∫≠n bi·∫øt",
        question: "Trong c√°c b·ªô ba s·ªë sau, b·ªô ba n√†o l√† b·ªô ba Pythagore?",
        options: [
            { text: "(2, 3, 4)", isCorrect: false, rationale: "2^2 + 3^2 = 13, kh√¥ng b·∫±ng 4^2." },
            { text: "(6, 8, 9)", isCorrect: false, rationale: "6^2 + 8^2 = 100, kh√¥ng b·∫±ng 81." },
            { text: "(1, 2, 3)", isCorrect: false, rationale: "1 + 4 kh√¥ng b·∫±ng 9." },
            { text: "(5, 12, 13)", isCorrect: true, rationale: "5^2 + 12^2 = 13^2." }
        ],
        hint: "Ph·∫£i th·ªèa m√£n a^2 + b^2 = c^2."
    },
    {
        level: "Nh·∫≠n bi·∫øt",
        question: "Cho tam gi√°c MNP vu√¥ng t·∫°i P. C√¥ng th·ª©c t√≠nh MP theo hai c·∫°nh c√≤n l·∫°i l√†:",
        options: [
            { text: "MP^2 = MN^2 - NP^2", isCorrect: true, rationale: "MP l√† c·∫°nh g√≥c vu√¥ng." },
            { text: "MP^2 = MN^2 + NP^2", isCorrect: false, rationale: "C√¥ng th·ª©c d√†nh cho c·∫°nh huy·ªÅn." },
            { text: "MP = MN - NP", isCorrect: false, rationale: "Kh√¥ng ƒë√∫ng ƒë·ªãnh l√Ω Pythagore." },
            { text: "MP^2 = NP^2 - MN^2", isCorrect: false, rationale: "MN l√† c·∫°nh l·ªõn nh·∫•t n√™n MN^2 > NP^2." }
        ],
        hint: "C·∫°nh g√≥c vu√¥ng b·∫±ng cƒÉn b·∫≠c hai hi·ªáu b√¨nh ph∆∞∆°ng."
    },
    {
        level: "Nh·∫≠n bi·∫øt",
        question: "Tam gi√°c c√≥ ba c·∫°nh 6 cm, 8 cm v√† 10 cm c√≥ ph·∫£i l√† tam gi√°c vu√¥ng kh√¥ng?",
        options: [
            { text: "Kh√¥ng ph·∫£i tam gi√°c vu√¥ng", isCorrect: false, rationale: "C·∫ßn ki·ªÉm tra b·∫±ng ƒë·ªãnh l√Ω ƒë·∫£o." },
            { text: "L√† tam gi√°c vu√¥ng", isCorrect: true, rationale: "6^2 + 8^2 = 10^2." },
            { text: "Tam gi√°c nh·ªçn", isCorrect: false, rationale: "Sai." },
            { text: "Tam gi√°c t√π", isCorrect: false, rationale: "Sai." }
        ],
        hint: "D√πng ƒë·ªãnh l√Ω Pythagore ƒë·∫£o."
    },

    // --- 5 C√ÇU TH√îNG HI·ªÇU ---
    {
        level: "Th√¥ng hi·ªÉu",
        question: "Tam gi√°c vu√¥ng c√≥ hai c·∫°nh g√≥c vu√¥ng 5 cm v√† 6 cm. C·∫°nh huy·ªÅn (l√†m tr√≤n 0,1) b·∫±ng:",
        options: [
            { text: "11 cm", isCorrect: false },
            { text: "8,0 cm", isCorrect: false },
            { text: "7,8 cm", isCorrect: true, rationale: "sqrt(61) ‚âà 7,8 cm." },
            { text: "7,1 cm", isCorrect: false }
        ],
        hint: "T√≠nh cƒÉn r·ªìi l√†m tr√≤n."
    },
    {
        level: "Th√¥ng hi·ªÉu",
        question: "Tam gi√°c vu√¥ng c√≥ c·∫°nh huy·ªÅn 17 cm v√† m·ªôt c·∫°nh g√≥c vu√¥ng 8 cm. C·∫°nh g√≥c vu√¥ng c√≤n l·∫°i b·∫±ng:",
        options: [
            { text: "9 cm", isCorrect: false },
            { text: "12 cm", isCorrect: false },
            { text: "25 cm", isCorrect: false },
            { text: "15 cm", isCorrect: true, rationale: "sqrt(17^2 - 8^2) = 15 cm." }
        ],
        hint: "a = sqrt(c^2 - b^2)."
    },
    {
        level: "Th√¥ng hi·ªÉu",
        question: "H√¨nh ch·ªØ nh·∫≠t c√≥ chi·ªÅu d√†i 12 m v√† chi·ªÅu r·ªông 9 m. ƒê·ªô d√†i ƒë∆∞·ªùng ch√©o l√†:",
        options: [
            { text: "15 m", isCorrect: true },
            { text: "18 m", isCorrect: false },
            { text: "21 m", isCorrect: false },
            { text: "16 m", isCorrect: false }
        ],
        hint: "ƒê∆∞·ªùng ch√©o l√† c·∫°nh huy·ªÅn."
    },
    {
        level: "Th√¥ng hi·ªÉu",
        question: "Tam gi√°c vu√¥ng c√≥ hai c·∫°nh g√≥c vu√¥ng 0,5 cm v√† 1,2 cm. C·∫°nh huy·ªÅn b·∫±ng:",
        options: [
            { text: "1,7 cm", isCorrect: false },
            { text: "1,3 cm", isCorrect: true },
            { text: "1,44 cm", isCorrect: false },
            { text: "1,0 cm", isCorrect: false }
        ],
        hint: "C·∫©n th·∫≠n s·ªë th·∫≠p ph√¢n."
    },
    {
        level: "Th√¥ng hi·ªÉu",
        question: "Tam gi√°c c√≥ c·∫°nh sqrt(10) cm, 3 cm v√† 1 cm c√≥ ph·∫£i l√† tam gi√°c vu√¥ng kh√¥ng?",
        options: [
            { text: "Kh√¥ng l√† tam gi√°c vu√¥ng", isCorrect: false },
            { text: "Kh√¥ng th·ªÉ x√°c ƒë·ªãnh", isCorrect: false },
            { text: "L√† tam gi√°c vu√¥ng", isCorrect: true, rationale: "1^2 + 3^2 = 10." },
            { text: "Tam gi√°c nh·ªçn", isCorrect: false }
        ],
        hint: "sqrt(10)^2 = 10."
    },

    // --- 3 C√ÇU V·∫¨N D·ª§NG ---
    {
        level: "V·∫≠n d·ª•ng",
        question: "Tr√™n m·∫∑t ph·∫≥ng Oxy, kho·∫£ng c√°ch gi·ªØa A(1,2) v√† B(5,5) l√†:",
        options: [
            { text: "7", isCorrect: false },
            { text: "sqrt(45)", isCorrect: false },
            { text: "sqrt(17)", isCorrect: false },
            { text: "5", isCorrect: true }
        ],
        hint: "AB = sqrt((x2-x1)^2 + (y2-y1)^2)."
    },
    {
        level: "V·∫≠n d·ª•ng",
        question: "Tam gi√°c c√¢n ABC c√≥ AB = AC = 13 cm, BC = 10 cm. ƒê∆∞·ªùng cao AH b·∫±ng:",
        options: [
            { text: "12 cm", isCorrect: true },
            { text: "10 cm", isCorrect: false },
            { text: "sqrt(194) cm", isCorrect: false },
            { text: "8 cm", isCorrect: false }
        ],
        hint: "ƒê∆∞·ªùng cao chia ƒë√°y th√†nh hai ph·∫ßn b·∫±ng nhau."
    },
    {
        level: "V·∫≠n d·ª•ng",
        question: "C√°i thang d√†i 5 m, ch√¢n thang c√°ch t∆∞·ªùng 3 m. ƒê·ªô cao ch·∫°m t∆∞·ªùng l√†:",
        options: [
            { text: "5 m", isCorrect: false },
            { text: "4 m", isCorrect: true },
            { text: "8 m", isCorrect: false },
            { text: "16 m", isCorrect: false }
        ],
        hint: "D√πng c^2 - a^2."
    },

    // --- 1 C√ÇU V·∫¨N D·ª§NG CAO ---
    {
        level: "V·∫≠n d·ª•ng cao",
        question: "H√¨nh vu√¥ng ABCD c·∫°nh 4 cm. M l√† trung ƒëi·ªÉm BC. ƒê·ªô d√†i AM b·∫±ng:",
        options: [
            { text: "4 cm", isCorrect: false },
            { text: "sqrt(20) cm", isCorrect: false },
            { text: "2 sqrt(5) cm", isCorrect: true },
            { text: "2 sqrt(3) cm", isCorrect: false }
        ],
        hint: "AM^2 = AB^2 + BM^2."
    },

    // --- 5 C√ÇU TH√îNG HI·ªÇU (c√≤n l·∫°i) ---
    {
        level: "Th√¥ng hi·ªÉu",
        question: "Tam gi√°c ABC c√≥ AB = 6 cm, AC = 8 cm, BC = 10 cm. Di·ªán t√≠ch ABC l√†:",
        options: [
            { text: "30 cm^2", isCorrect: false },
            { text: "48 cm^2", isCorrect: false },
            { text: "12 cm^2", isCorrect: false },
            { text: "24 cm^2", isCorrect: true }
        ],
        hint: "ƒê√≥ l√† tam gi√°c vu√¥ng t·∫°i A."
    },
    {
        level: "Th√¥ng hi·ªÉu",
        question: "T√†u ƒëi 12 km v·ªÅ B·∫Øc r·ªìi 5 km v·ªÅ ƒê√¥ng. Kho·∫£ng c√°ch AC l√†:",
        options: [
            { text: "13 km", isCorrect: true },
            { text: "17 km", isCorrect: false },
            { text: "15 km", isCorrect: false },
            { text: "sqrt(119) km", isCorrect: false }
        ],
        hint: "T·∫°o th√†nh tam gi√°c vu√¥ng."
    },
    {
        level: "Th√¥ng hi·ªÉu",
        question: "Tam gi√°c vu√¥ng c√¢n c√≥ c·∫°nh g√≥c vu√¥ng 4 cm. C·∫°nh huy·ªÅn b·∫±ng:",
        options: [
            { text: "8 cm", isCorrect: false },
            { text: "4 sqrt(2) cm", isCorrect: true },
            { text: "16 cm", isCorrect: false },
            { text: "2 sqrt(4) cm", isCorrect: false }
        ],
        hint: "Vu√¥ng c√¢n: a = b."
    },

    // --- 6 C√ÇU NH·∫¨N BI·∫æT (cu·ªëi) ---
    {
        level: "Nh·∫≠n bi·∫øt",
        question: "ƒê·ªãnh l√Ω Pythagore ƒë·∫£o d√πng ƒë·ªÉ l√†m g√¨?",
        options: [
            { text: "T√≠nh di·ªán t√≠ch tam gi√°c b·∫•t k·ª≥", isCorrect: false },
            { text: "T√≠nh ƒë·ªô d√†i ƒë∆∞·ªùng cao", isCorrect: false },
            { text: "X√°c ƒë·ªãnh tam gi√°c vu√¥ng hay kh√¥ng", isCorrect: true },
            { text: "T√¨m g√≥c tam gi√°c", isCorrect: false }
        ],
        hint: "D√πng ƒë·ªÉ ki·ªÉm tra tam gi√°c vu√¥ng."
    }
];
        // Bi·∫øn tr·∫°ng th√°i tr√≤ ch∆°i
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;

        // L·∫•y c√°c ph·∫ßn t·ª≠ DOM
        const startScreen = document.getElementById('start-screen');
        const quizContent = document.getElementById('quiz-content');
        const resultScreen = document.getElementById('result-screen');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        const questionText = document.getElementById('question-text');
        const difficultyLevel = document.getElementById('difficulty-level');
        const answerOptionsContainer = document.getElementById('answer-options');
        const rationaleBox = document.getElementById('rationale-box');
        const rationaleText = document.getElementById('rationale-text');
        const nextButton = document.getElementById('next-button');
        const progressBar = document.getElementById('progress');
        const scoreDisplay = document.getElementById('score-display');
        const resultMessage = document.getElementById('result-message');
        const confettiEmitter = document.getElementById('confetti-emitter');

        // H√†m ph√°t √¢m thanh ch√∫c m·ª´ng (Web Audio API)
        function playCorrectSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime); // Chime pitch

                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.5, audioContext.currentTime + 0.01);
                gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.3);

                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (error) {
                console.error("Kh√¥ng th·ªÉ ph√°t √¢m thanh: ", error);
            }
        }

        // H√†m t·∫°o hi·ªáu ·ª©ng ph√°o hoa
        function createConfetti() {
            const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#00bcd4', '#009688', '#4caf50', '#ffeb3b', '#ff9800', '#ff5722'];
            const count = 30;
            const containerWidth = confettiEmitter.offsetWidth;
            const containerHeight = confettiEmitter.offsetHeight;

            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti confetti-visible';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                // V·ªã tr√≠ xu·∫•t ph√°t t·ª´ gi·ªØa m√†n h√¨nh quiz
                const x = (containerWidth / 2) + (Math.random() * 200 - 100);
                const y = (containerHeight / 2) + (Math.random() * 100 - 50);
                
                confetti.style.left = `${x}px`;
                confetti.style.top = `${y}px`;
                
                // Ho·∫°t ·∫£nh (Animation)
                const angle = Math.random() * 360;
                const distance = 500 + Math.random() * 300;
                const duration = 1.5 + Math.random();

                confetti.animate([
                    { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 },
                    { transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) rotate(${Math.random() * 1080}deg)`, opacity: 0 }
                ], {
                    duration: duration * 1000,
                    easing: 'ease-out',
                    fill: 'forwards'
                });

                confettiEmitter.appendChild(confetti);

                setTimeout(() => {
                    confetti.remove();
                }, duration * 1000 + 50);
            }
        }

        // H√†m hi·ªÉn th·ªã c√¢u h·ªèi
        function displayQuestion() {
            rationaleBox.classList.add('hidden');
            nextButton.classList.add('hidden');
            answerOptionsContainer.innerHTML = '';
            isAnswered = false;

            if (currentQuestionIndex < quizQuestions.length) {
                const currentQ = quizQuestions[currentQuestionIndex];
                
                // C·∫≠p nh·∫≠t thanh ti·∫øn tr√¨nh
                const progressPercentage = ((currentQuestionIndex) / quizQuestions.length) * 100;
                progressBar.style.width = `${progressPercentage}%`;
                
                questionText.innerHTML = `C√¢u ${currentQuestionIndex + 1}/${quizQuestions.length}: ${currentQ.question}`;
                difficultyLevel.textContent = `M·ª©c ƒë·ªô: ${currentQ.level}`;

                currentQ.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.className = 'option-button w-full text-left p-3 rounded-lg border-2 border-indigo-200 bg-white text-gray-700 font-medium hover:bg-indigo-100 transition duration-150';
                    button.innerHTML = `<span>${String.fromCharCode(65 + index)}. </span>${option.text}`; // A, B, C, D
                    button.onclick = () => handleAnswer(button, option.isCorrect, currentQ.options, currentQ.hint, currentQ.question, option.rationale);
                    answerOptionsContainer.appendChild(button);
                });
            } else {
                showResult();
            }
        }

        // H√†m x·ª≠ l√Ω tr·∫£ l·ªùi
        function handleAnswer(selectedButton, isCorrect, options, hint, question, rationale) {
            if (isAnswered) return;
            isAnswered = true;

            // V√¥ hi·ªáu h√≥a t·∫•t c·∫£ c√°c n√∫t
            const allButtons = answerOptionsContainer.querySelectorAll('button');
            allButtons.forEach(btn => btn.disabled = true);

            // T√¨m v√† ƒë√°nh d·∫•u ƒë√°p √°n ƒë√∫ng/sai
            options.forEach((option, index) => {
                const btn = allButtons[index];
                if (option.isCorrect) {
                    btn.classList.add('correct-answer');
                    btn.classList.remove('bg-white', 'hover:bg-indigo-100');
                } else if (btn === selectedButton && !option.isCorrect) {
                    btn.classList.add('incorrect-answer');
                    btn.classList.remove('bg-white', 'hover:bg-indigo-100');
                }
            });

            // Hi·ªÉn th·ªã gi·∫£i th√≠ch
            rationaleText.textContent = rationale;
            rationaleBox.classList.remove('hidden');

            // X·ª≠ l√Ω logic ƒë√∫ng/sai
            if (isCorrect) {
                score++;
                playCorrectSound();
                createConfetti();
                // Thay th·∫ø emoji m·∫∑t c∆∞·ªùi cho tung hoa
                selectedButton.innerHTML += ' <span class="ml-2">üéâüòä</span>';
            } else {
                selectedButton.innerHTML += ' <span class="ml-2">‚ùåüòî</span>';
            }

            nextButton.classList.remove('hidden');
        }

        // H√†m chuy·ªÉn sang c√¢u h·ªèi ti·∫øp theo
        function nextQuestion() {
            currentQuestionIndex++;
            displayQuestion();
        }

        // H√†m hi·ªÉn th·ªã k·∫øt qu·∫£
        function showResult() {
            quizContent.classList.add('hidden');
            startScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            const total = quizQuestions.length;
            scoreDisplay.textContent = score;
            let message = '';

            if (score === total) {
                message = "Xu·∫•t s·∫Øc! B·∫°n ƒë√£ ƒë·∫°t ƒëi·ªÉm tuy·ªát ƒë·ªëi. B·∫°n l√† m·ªôt chuy√™n gia v·ªÅ ƒê·ªãnh l√Ω Pythagore!";
            } else if (score >= total * 0.8) {
                message = "R·∫•t t·ªët! B·∫°n c√≥ ki·∫øn th·ª©c v·ªØng v√†ng v·ªÅ ƒê·ªãnh l√Ω Pythagore.";
            } else if (score >= total * 0.5) {
                message = "T·ªët! B·∫°n ƒë√£ n·∫Øm ƒë∆∞·ª£c nh·ªØng ki·∫øn th·ª©c c∆° b·∫£n. H√£y √¥n t·∫≠p th√™m c√°c c√¢u v·∫≠n d·ª•ng nh√©.";
            } else {
                message = "B·∫°n c·∫ßn c·ªë g·∫Øng h∆°n. H√£y xem l·∫°i c√°c c√¥ng th·ª©c v√† c√°ch √°p d·ª•ng ƒê·ªãnh l√Ω Pythagore nh√©!";
            }
            resultMessage.textContent = message;
            
            // C·∫≠p nh·∫≠t thanh ti·∫øn tr√¨nh l·∫ßn cu·ªëi
            progressBar.style.width = `100%`;
        }

        // H√†m kh·ªüi ƒë·ªông l·∫°i tr√≤ ch∆°i
        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            isAnswered = false;
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizContent.classList.remove('hidden');
            displayQuestion();
        }

        // G√°n s·ª± ki·ªán cho c√°c n√∫t
        startButton.addEventListener('click', startQuiz);
        restartButton.addEventListener('click', startQuiz);
        nextButton.addEventListener('click', nextQuestion);

        // Kh·ªüi t·∫°o tr·∫°ng th√°i ban ƒë·∫ßu (ƒë·∫£m b·∫£o thanh ti·∫øn tr√¨nh r·ªóng)
        progressBar.style.width = '0%';
        
        // K√≠ch ho·∫°t tr√≤ ch∆°i tr√™n window.onload
        window.onload = () => {
             // ƒê·∫∑t l·∫°i confetti emitter t·∫°i v·ªã tr√≠ t∆∞∆°ng ƒë·ªëi
             const rect = quizContent.getBoundingClientRect();
             confettiEmitter.style.position = 'absolute';
             confettiEmitter.style.top = `${rect.top}px`;
             confettiEmitter.style.left = `${rect.left}px`;
             confettiEmitter.style.width = `${rect.width}px`;
             confettiEmitter.style.height = `${rect.height}px`;
        };

    </script>
</body>
</html>
