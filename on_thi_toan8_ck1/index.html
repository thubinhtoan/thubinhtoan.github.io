<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>HÃ nh TrÃ¬nh Chinh Phá»¥c Há»c KÃ¬ I â€“ ToÃ¡n 8</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #2c4f87, #0f2347);
  color: #2b2b2b;
}

.container {
  max-width: 1000px;
  margin: auto;
  padding: 30px 15px;
}

.game-card {
  background: #fff8e8;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.35);
  overflow: hidden;
}

.game-header {
  background: linear-gradient(135deg, #a55b16, #7a3e0e);
  color: #ffd36a;
  padding: 16px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
}

.progress {
  height: 8px;
  background: #e0e0e0;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #f4b41a, #ffdd8d);
  width: 0%;
}

.game-body {
  padding: 30px 25px 35px;
}

.level {
  display: inline-block;
  background: #5b7c8b;
  color: #fff;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.85em;
  margin-bottom: 15px;
}

.question {
  font-size: 1.35em;
  font-weight: 600;
  margin-bottom: 25px;
}

.options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
}

.options button {
  background: #ffffff;
  border: 2px solid #d6c7a1;
  border-radius: 14px;
  padding: 14px;
  font-size: 1em;
  cursor: pointer;
  transition: 0.25s;
}

.options button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}

.correct {
  background: #c8f2d0 !important;
  border-color: #2e8b57 !important;
}

.wrong {
  background: #ffd0d0 !important;
  border-color: #c0392b !important;
}

.feedback {
  margin-top: 18px;
  font-weight: bold;
}

.rationale {
  margin-top: 10px;
  font-style: italic;
  color: #7a5a2e;
}

.next-btn {
  margin-top: 25px;
  padding: 12px 28px;
  border-radius: 25px;
  border: none;
  background: linear-gradient(135deg, #f4b41a, #ffdd8d);
  font-size: 1em;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>

<body>
<div class="container">
    <h1>ğŸ¯ HÃ€NH TRÃŒNH CHINH PHá»¤C Há»ŒC KÃŒ I â€“ TOÃN 8</h1>
    <p>Immersive Quiz â€“ Thá»­ thÃ¡ch tá»•ng há»£p cuá»‘i kÃ¬</p>

    <div class="quiz-box">
        <div id="question" class="question"></div>
        <div class="options" id="options"></div>
        <div id="feedback"></div>
        <div id="rationale" class="rationale"></div>
        <button class="next-btn" onclick="nextQuestion()">CÃ¢u tiáº¿p theo â–¶</button>
        <div id="score"></div>
    </div>
<div style="margin-bottom:15px;">
    <input id="playerName" placeholder="Nháº­p tÃªn ngÆ°á»i chÆ¡i"
           style="padding:10px;border-radius:8px;border:none;width:70%;font-size:1em;">
</div>
</div>

<!-- Ã‚M THANH -->
<audio id="correctSound">
    <source src="data:audio/wav;base64,UklGRlIAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=">
</audio>
<script>
let startTime = Date.now();

// ================= DATA CÃ‚U Há»I =================
let questions = [
{
q: "Báº­c cá»§a Ä‘a thá»©c xÂ² + 3xÂ³ âˆ’ 5 lÃ :",
options: ["2", "3", "1", "5"],
answer: "3",
rationale: "Báº­c cá»§a Ä‘a thá»©c lÃ  sá»‘ mÅ© lá»›n nháº¥t cá»§a biáº¿n, á»Ÿ Ä‘Ã¢y lÃ  3."
},
{
q: "Äiá»u kiá»‡n xÃ¡c Ä‘á»‹nh cá»§a phÃ¢n thá»©c 1/(xâˆ’2) lÃ :",
options: ["x â‰  2", "x = 2", "x â‰¥ 2", "x â‰¤ 2"],
answer: "x â‰  2",
rationale: "PhÃ¢n thá»©c xÃ¡c Ä‘á»‹nh khi máº«u khÃ¡c 0 nÃªn xâˆ’2 â‰  0."
},
{
q: "Äa thá»©c xÂ² âˆ’ 4 viáº¿t dÆ°á»›i dáº¡ng tÃ­ch lÃ :",
options: ["(xâˆ’2)(x+2)", "(xâˆ’4)(x+1)", "x(xâˆ’4)", "(xâˆ’2)Â²"],
answer: "(xâˆ’2)(x+2)",
rationale: "Ãp dá»¥ng háº±ng Ä‘áº³ng thá»©c hiá»‡u hai bÃ¬nh phÆ°Æ¡ng."
},
{
q: "PhÃ¢n thá»©c 2x/4x rÃºt gá»n Ä‘Æ°á»£c lÃ :",
options: ["1/2", "2", "x", "4"],
answer: "1/2",
rationale: "Chia cáº£ tá»­ vÃ  máº«u cho 2x (xâ‰ 0)."
},
{
q: "TÃ­ch cá»§a hai Ä‘Æ¡n thá»©c 3xÂ² vÃ  âˆ’2x lÃ :",
options: ["âˆ’6xÂ³", "âˆ’6xÂ²", "6xÂ³", "âˆ’5xÂ³"],
answer: "âˆ’6xÂ³",
rationale: "NhÃ¢n há»‡ sá»‘ vÃ  cá»™ng sá»‘ mÅ© cá»§a x."
},
{
q: "PhÃ¢n thá»©c Ä‘á»‘i cá»§a 5/(x+2) lÃ :",
options: ["âˆ’5/(x+2)", "5/(xâˆ’2)", "âˆ’5/(xâˆ’2)", "1/(x+2)"],
answer: "âˆ’5/(x+2)",
rationale: "PhÃ¢n thá»©c Ä‘á»‘i lÃ  phÃ¢n thá»©c cÃ³ giÃ¡ trá»‹ Ä‘á»‘i nhau."
},
{
q: "Báº­c cá»§a Ä‘a thá»©c 2xâ´ âˆ’ xÂ² + 1 lÃ :",
options: ["4", "2", "6", "1"],
answer: "4",
rationale: "Báº­c cao nháº¥t cá»§a biáº¿n lÃ  4."
},
{
q: "Káº¿t quáº£ cá»§a (4x + y)(4x âˆ’ y) lÃ :",
options: ["16xÂ² âˆ’ yÂ²", "4xÂ² âˆ’ yÂ²", "16xÂ² + yÂ²", "4xÂ² + yÂ²"],
answer: "16xÂ² âˆ’ yÂ²",
rationale: "Ãp dá»¥ng (a+b)(aâˆ’b)=aÂ²âˆ’bÂ²."
},
{
q: "GiÃ¡ trá»‹ khÃ´ng há»£p lÃ­ trong dÃ£y 33; 54; a; 48 lÃ :",
options: ["33", "54", "a", "48"],
answer: "a",
rationale: "Dá»¯ liá»‡u pháº£i lÃ  sá»‘ cá»¥ thá»ƒ."
},
{
q: "ThÃ¡ng cÃ³ lÆ°á»£ng mÆ°a Ã­t nháº¥t trong báº£ng lÃ :",
options: ["ThÃ¡ng 8", "ThÃ¡ng 9", "ThÃ¡ng 10", "ThÃ¡ng 11"],
answer: "ThÃ¡ng 11",
rationale: "ThÃ¡ng 11 cÃ³ lÆ°á»£ng mÆ°a nhá» nháº¥t."
},
{
q: "Biá»ƒu Ä‘á»“ thÃ­ch há»£p biá»ƒu diá»…n tá»‰ lá»‡ pháº§n trÄƒm lÃ :",
options: ["Biá»ƒu Ä‘á»“ quáº¡t trÃ²n", "Biá»ƒu Ä‘á»“ cá»™t", "Biá»ƒu Ä‘á»“ Ä‘oáº¡n tháº³ng", "Biá»ƒu Ä‘á»“ tranh"],
answer: "Biá»ƒu Ä‘á»“ quáº¡t trÃ²n",
rationale: "Biá»ƒu Ä‘á»“ quáº¡t trÃ²n thá»ƒ hiá»‡n cÆ¡ cáº¥u, tá»‰ lá»‡."
},
{
q: "Quan sÃ¡t há»c sinh Ä‘i xe Ä‘iá»‡n lÃ  phÆ°Æ¡ng phÃ¡p thu tháº­p dá»¯ liá»‡u:",
options: ["Quan sÃ¡t", "Phá»ng váº¥n", "Láº­p báº£ng há»i", "Nguá»“n cÃ³ sáºµn"],
answer: "Quan sÃ¡t",
rationale: "Ghi nháº­n trá»±c tiáº¿p báº±ng máº¯t."
},
{
q: "HÃ¬nh bÃ¬nh hÃ nh cÃ³ má»™t gÃ³c vuÃ´ng lÃ :",
options: ["HÃ¬nh chá»¯ nháº­t", "HÃ¬nh thoi", "HÃ¬nh vuÃ´ng", "HÃ¬nh thang"],
answer: "HÃ¬nh chá»¯ nháº­t",
rationale: "Äáº·c Ä‘iá»ƒm nháº­n dáº¡ng hÃ¬nh chá»¯ nháº­t."
},
{
q: "HÃ¬nh thang cÃ¢n lÃ  hÃ¬nh thang cÃ³:",
options: ["Hai gÃ³c ká» má»™t Ä‘Ã¡y báº±ng nhau", "Hai cáº¡nh bÃªn song song", "Hai Ä‘Ã¡y báº±ng nhau", "Hai gÃ³c ká» má»™t cáº¡nh bÃªn"],
answer: "Hai gÃ³c ká» má»™t Ä‘Ã¡y báº±ng nhau",
rationale: "Äá»‹nh nghÄ©a hÃ¬nh thang cÃ¢n."
},
{
q: "Tá»© giÃ¡c vá»«a lÃ  hÃ¬nh chá»¯ nháº­t vá»«a lÃ  hÃ¬nh thoi lÃ :",
options: ["HÃ¬nh vuÃ´ng", "HÃ¬nh bÃ¬nh hÃ nh", "HÃ¬nh thang cÃ¢n", "HÃ¬nh chá»¯ nháº­t"],
answer: "HÃ¬nh vuÃ´ng",
rationale: "HÃ¬nh vuÃ´ng thá»a mÃ£n cáº£ hai tÃ­nh cháº¥t."
},
{
q: "PhÃ¡t biá»ƒu Ä‘Ãºng vá» hÃ¬nh chá»¯ nháº­t lÃ :",
options: [
"Hai cáº·p cáº¡nh Ä‘á»‘i song song vÃ  báº±ng nhau",
"Bá»‘n cáº¡nh báº±ng nhau",
"Hai Ä‘Æ°á»ng chÃ©o vuÃ´ng gÃ³c",
"Hai Ä‘Æ°á»ng chÃ©o khÃ´ng báº±ng nhau"
],
answer: "Hai cáº·p cáº¡nh Ä‘á»‘i song song vÃ  báº±ng nhau",
rationale: "TÃ­nh cháº¥t cÆ¡ báº£n cá»§a hÃ¬nh chá»¯ nháº­t."
},
{
q: "Äiá»u kiá»‡n Ä‘á»ƒ hÃ¬nh bÃ¬nh hÃ nh trá»Ÿ thÃ nh hÃ¬nh thoi lÃ :",
options: ["Hai cáº¡nh ká» báº±ng nhau", "Hai cáº¡nh Ä‘á»‘i song song", "Hai Ä‘Æ°á»ng chÃ©o báº±ng nhau", "CÃ³ má»™t gÃ³c vuÃ´ng"],
answer: "Hai cáº¡nh ká» báº±ng nhau",
rationale: "Äáº·c trÆ°ng cá»§a hÃ¬nh thoi."
},
{
q: "GiÃ¡ trá»‹ khÃ´ng há»£p lÃ­ trong dÃ£y 33; 54; 140; 48 lÃ :",
options: ["140", "33", "54", "48"],
answer: "140",
rationale: "CÃ¢n náº·ng 140kg lÃ  khÃ´ng há»£p lÃ­."
},
{
q: "NhÃ³m hÃ¬nh cÃ³ hai Ä‘Æ°á»ng chÃ©o báº±ng nhau lÃ :",
options: [
"HÃ¬nh chá»¯ nháº­t, hÃ¬nh thang cÃ¢n, hÃ¬nh vuÃ´ng",
"HÃ¬nh thoi, hÃ¬nh bÃ¬nh hÃ nh",
"HÃ¬nh thang, hÃ¬nh thoi",
"HÃ¬nh bÃ¬nh hÃ nh, hÃ¬nh vuÃ´ng"
],
answer: "HÃ¬nh chá»¯ nháº­t, hÃ¬nh thang cÃ¢n, hÃ¬nh vuÃ´ng",
rationale: "CÃ¡c hÃ¬nh nÃ y cÃ³ tÃ­nh cháº¥t Ä‘Æ°á»ng chÃ©o báº±ng nhau."
},
{
q: "Chiá»u cao hÃ¬nh chÃ³p tam giÃ¡c Ä‘á»u lÃ :",
options: [
"Äoáº¡n ná»‘i tá»« Ä‘á»‰nh tá»›i trá»ng tÃ¢m Ä‘Ã¡y",
"ÄÆ°á»ng cao máº·t bÃªn",
"ÄÆ°á»ng trung tuyáº¿n Ä‘Ã¡y",
"Äoáº¡n ná»‘i tá»›i trung Ä‘iá»ƒm cáº¡nh Ä‘Ã¡y"
],
answer: "Äoáº¡n ná»‘i tá»« Ä‘á»‰nh tá»›i trá»ng tÃ¢m Ä‘Ã¡y",
rationale: "Äá»‹nh nghÄ©a chiá»u cao hÃ¬nh chÃ³p Ä‘á»u."
},
{
q: "Biá»ƒu Ä‘á»“ thá»ƒ hiá»‡n sá»± thay Ä‘á»•i theo thá»i gian lÃ :",
options: ["Biá»ƒu Ä‘á»“ Ä‘oáº¡n tháº³ng", "Biá»ƒu Ä‘á»“ quáº¡t", "Biá»ƒu Ä‘á»“ tranh", "Biá»ƒu Ä‘á»“ cá»™t trÃ²n"],
answer: "Biá»ƒu Ä‘á»“ Ä‘oáº¡n tháº³ng",
rationale: "PhÃ¹ há»£p cho dá»¯ liá»‡u theo thá»i gian."
},
{
q: "Dá»¯ liá»‡u Ä‘á»‹nh tÃ­nh cÃ³ thá»ƒ so sÃ¡nh lÃ :",
options: ["TÃªn loáº¡i bÃºt", "CÃ¢n náº·ng", "Chiá»u cao", "Sá»‘ lÆ°á»£ng"],
answer: "TÃªn loáº¡i bÃºt",
rationale: "Dá»¯ liá»‡u phÃ¢n loáº¡i, khÃ´ng pháº£i sá»‘."
},
{
q: "Dá»¯ liá»‡u Ä‘á»‹nh lÆ°á»£ng cÃ³ thá»ƒ láº­p tá»‰ sá»‘ lÃ :",
options: ["CÃ¢n náº·ng", "MÃ u sáº¯c", "TÃªn gá»i", "Loáº¡i hÃ¬nh"],
answer: "CÃ¢n náº·ng",
rationale: "Dá»¯ liá»‡u sá»‘ Ä‘o."
}
];

// ================= RANDOM =================
questions.sort(() => Math.random() - 0.5);

let index = 0;
let score = 0;

// ================= LOAD =================
function loadQuestion() {
  let q = questions[index];
  document.getElementById("question").innerHTML = "CÃ¢u " + (index + 1) + ": " + q.q;

  let optionsEl = document.getElementById("options");
  optionsEl.innerHTML = "";

  let shuffled = [...q.options].sort(() => Math.random() - 0.5);
  shuffled.forEach(opt => {
    let btn = document.createElement("button");
    btn.innerText = opt;
    btn.onclick = () => checkAnswer(btn, opt);
    optionsEl.appendChild(btn);
  });

  document.getElementById("feedback").innerHTML = "";
  document.getElementById("rationale").innerHTML = "";
}

// ================= CHECK =================
function checkAnswer(btn, choice) {
  let q = questions[index];
  document.querySelectorAll(".options button").forEach(b => b.disabled = true);

  if (choice === q.answer) {
    btn.classList.add("correct");
    document.getElementById("feedback").innerHTML =
      "<div class='confetti'>ğŸ‰ğŸŠğŸ˜ŠğŸŒ¸</div><strong>ChÃ­nh xÃ¡c!</strong>";
    document.getElementById("correctSound").play();
    score++;
  } else {
    btn.classList.add("wrong");
    document.getElementById("feedback").innerHTML =
      "âŒ ChÆ°a Ä‘Ãºng! ÄÃ¡p Ã¡n Ä‘Ãºng lÃ : <strong>" + q.answer + "</strong>";
  }

  document.getElementById("rationale").innerText = "Giáº£i thÃ­ch: " + q.rationale;
  document.getElementById("score").innerText =
    "Äiá»ƒm: " + score + " / " + questions.length;
}

// ================= NEXT =================
function nextQuestion() {
  index++;
  if (index < questions.length) {
    loadQuestion();
  } else {
  let endTime = Math.floor((Date.now() - startTime) / 1000);
  let name = document.getElementById("playerName")?.value || "KhÃ´ng tÃªn";

  let total = questions.length;
  let percent = Math.round(score / total * 100);

  let medal = "ğŸ¯";
  let title = "Cá» Gáº®NG THÃŠM";
  let message = "Em hÃ£y Ã´n táº­p thÃªm Ä‘á»ƒ chinh phá»¥c thá»­ thÃ¡ch nhÃ©!";

  if (percent >= 80) {
    medal = "ğŸ¥‡";
    title = "CHIáº¾N BINH TOÃN Há»ŒC";
    message = "Xuáº¥t sáº¯c! Em Ä‘Ã£ chinh phá»¥c kho bÃ¡u ToÃ¡n há»c!";
  } else if (percent >= 60) {
    medal = "ğŸ¥ˆ";
    title = "NHÃ€ THÃM HIá»‚M TÃ€I NÄ‚NG";
    message = "Ráº¥t tá»‘t! Chá»‰ cáº§n cá»‘ gáº¯ng thÃªm má»™t chÃºt ná»¯a!";
  } else if (percent >= 40) {
    medal = "ğŸ¥‰";
    title = "NGÆ¯á»œI KHá»I HÃ€NH";
    message = "Khá»Ÿi Ä‘áº§u tá»‘t! Tiáº¿p tá»¥c luyá»‡n táº­p nhÃ©!";
  }

  // ===== LÆ¯U Báº¢NG Xáº¾P Háº NG =====
  let leaderboard = JSON.parse(localStorage.getItem("toan8_ck1_rank")) || [];
  leaderboard.push({ name, score, percent, time: endTime, date: new Date().toLocaleDateString() });

  leaderboard.sort((a, b) => b.percent - a.percent || a.time - b.time);
  leaderboard = leaderboard.slice(0, 10);
  localStorage.setItem("toan8_ck1_rank", JSON.stringify(leaderboard));

  // ===== GIAO DIá»†N Tá»”NG Káº¾T =====
  let html = `
    <div class="result-box">
      <h2>ğŸ HOÃ€N THÃ€NH HÃ€NH TRÃŒNH</h2>

      <div class="medal">${medal}</div>

      <h3>${title}</h3>

      <p><strong>NgÆ°á»i chÆ¡i:</strong> ${name}</p>
      <p><strong>Äiá»ƒm:</strong> ${score} / ${total} (${percent}%)</p>
      <p><strong>Thá»i gian:</strong> ${endTime} giÃ¢y</p>

      <p class="rank-note">${message}</p>

      <hr style="margin:20px 0">

      <h3>ğŸ† Báº¢NG Xáº¾P Háº NG</h3>
      <table style="width:100%;border-collapse:collapse">
        <tr style="background:#f4b41a">
          <th>Háº¡ng</th><th>TÃªn</th><th>Äiá»ƒm</th><th>%</th><th>Thá»i gian</th>
        </tr>
        ${leaderboard.map((p, i) => `
          <tr>
            <td>${i + 1}</td>
            <td>${p.name}</td>
            <td>${p.score}/${total}</td>
            <td>${p.percent}%</td>
            <td>${p.time}s</td>
          </tr>
        `).join("")}
      </table>

      <p style="margin-top:20px;">ğŸ‰ ChÃºc má»«ng em Ä‘Ã£ hoÃ n thÃ nh thá»­ thÃ¡ch! ğŸ‰</p>
    </div>
  `;

  document.querySelector(".game-card").innerHTML = html;
}
loadQuestion();
</script>
</body>
</html>
