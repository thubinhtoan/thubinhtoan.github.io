<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·∫•u Tr∆∞·ªùng Tr·ªçng T√¢m - To√°n 7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: #0f172a;
            background-image: radial-gradient(circle at 2px 2px, #334155 1px, transparent 0);
            background-size: 40px 40px;
            min-height: 100vh;
        }
        .bungee { font-family: 'Bungee', cursive; }
        .glass-container {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(12px);
            border: 2px solid #818cf8;
            box-shadow: 0 0 30px rgba(129, 140, 248, 0.3);
            border-radius: 2.5rem;
        }
        .btn-option {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(129, 140, 248, 0.2);
        }
        .btn-option:hover {
            transform: scale(1.03) translateY(-3px);
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
        }
        .progress-glow {
            box-shadow: 0 0 15px #818cf8;
            transition: width 0.6s ease-in-out;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .floating { animation: float 3s ease-in-out infinite; }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center">

    <div id="game-app" class="max-w-3xl w-full glass-container p-6 md:p-12 relative overflow-hidden text-white">
        
        <!-- M√†n h√¨nh kh·ªüi ƒë·∫ßu -->
        <div id="start-screen" class="text-center">
            <div class="text-7xl mb-6 floating">üéØ</div>
            <h1 class="text-4xl md:text-6xl bungee text-yellow-400 mb-4 leading-tight">ƒê·∫§U TR∆Ø·ªúNG<br>TR·ªåNG T√ÇM</h1>
            <p class="text-slate-400 text-lg mb-10">Ch√†o c√°c b·∫°n h·ªçc sinh c·ªßa c√¥ <b>Thu B√¨nh</b>!<br>S·∫µn s√†ng tr·ªü th√†nh "B·∫≠c th·∫ßy ƒë∆∞·ªùng trung tuy·∫øn" ch∆∞a?</p>
            <button onclick="startGame()" class="bg-yellow-400 text-slate-900 font-black py-5 px-16 rounded-full text-2xl shadow-[0_0_20px_rgba(251,191,36,0.5)] hover:scale-110 transition-transform">
                CH∆†I LU√îN! üöÄ
            </button>
        </div>

        <!-- M√†n h√¨nh C√¢u h·ªèi -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <div class="flex flex-col">
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Ti·∫øn tr√¨nh</span>
                    <span class="text-2xl font-black text-indigo-400">C√¢u <span id="q-idx">1</span>/15</span>
                </div>
                <div class="flex flex-col items-end">
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">ƒêi·ªÉm s·ªë</span>
                    <span class="text-2xl font-black text-yellow-400" id="score">0</span>
                </div>
            </div>

            <div class="w-full bg-slate-800 rounded-full h-4 mb-10 border border-slate-700">
                <div id="progress" class="bg-gradient-to-r from-indigo-500 to-purple-500 h-full rounded-full progress-glow" style="width: 0%"></div>
            </div>

            <div id="question-content">
                <div id="difficulty" class="inline-block px-3 py-1 rounded-lg text-[10px] font-bold text-slate-900 mb-4 bg-yellow-400 uppercase"></div>
                <h2 id="question-text" class="text-xl md:text-2xl font-bold mb-8 leading-snug"></h2>
                
                <div id="options-grid" class="grid grid-cols-1 gap-4">
                    <!-- N√∫t ƒë√°p √°n -->
                </div>
            </div>
        </div>

        <!-- Modal Ph·∫£n h·ªìi -->
        <div id="feedback-modal" class="hidden fixed inset-0 flex items-center justify-center z-50 p-4">
            <div class="absolute inset-0 bg-slate-950/90 backdrop-blur-sm"></div>
            <div class="bg-slate-800 border-2 border-indigo-400 rounded-[3rem] p-8 max-w-md w-full relative shadow-2xl text-center">
                <div id="fb-emoji" class="text-7xl mb-4"></div>
                <h3 id="fb-title" class="text-3xl font-black mb-4"></h3>
                <div class="bg-slate-700/50 p-5 rounded-3xl mb-8 border-l-4 border-yellow-400 text-left">
                    <p id="fb-rat" class="text-slate-300 text-sm italic leading-relaxed"></p>
                </div>
                <button onclick="nextQ()" class="w-full bg-indigo-500 text-white font-bold py-4 rounded-2xl hover:bg-indigo-600 shadow-lg">
                    TI·∫æP T·ª§C ‚ûî
                </button>
            </div>
        </div>

        <!-- M√†n h√¨nh K·∫øt th√∫c -->
        <div id="end-screen" class="hidden text-center">
            <div class="text-9xl mb-6">üëë</div>
            <h2 class="text-4xl font-black text-yellow-400 mb-2 leading-tight">XU·∫§T S·∫ÆC!</h2>
            <p class="text-xl mb-8 text-slate-400">Em ƒë√£ ƒë·∫°t ƒë∆∞·ª£c: <span id="final-score" class="text-4xl font-bold text-indigo-400">0</span>/15 ƒëi·ªÉm</p>
            <div id="rank-comment" class="text-lg font-bold mb-10 px-6 text-slate-300"></div>
            <button onclick="location.reload()" class="bg-white text-slate-900 font-bold py-4 px-12 rounded-2xl hover:bg-slate-200">
                TH·ª¨ L·∫†I üîÑ
            </button>
        </div>
    </div>

    <script>
        // Audio Effects
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSfx(correct) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            if (correct) {
                osc.frequency.setValueAtTime(440, audioCtx.currentTime); // A4
                osc.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.2);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            } else {
                osc.type = 'square';
                osc.frequency.setValueAtTime(100, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            }
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }

        const questions = [
            // NH·∫¨N BI·∫æT (6 c√¢u)
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "ƒê∆∞·ªùng trung tuy·∫øn c·ªßa tam gi√°c l√† ƒëo·∫°n th·∫≥ng n·ªëi:",
                opts: ["M·ªôt ƒë·ªânh v·ªõi trung ƒëi·ªÉm c·∫°nh ƒë·ªëi di·ªán", "M·ªôt ƒë·ªânh v·ªõi m·ªôt ƒëi·ªÉm tr√™n c·∫°nh ƒë·ªëi di·ªán", "Hai trung ƒëi·ªÉm c·ªßa hai c·∫°nh", "Hai ƒë·ªânh c·ªßa tam gi√°c"],
                ans: 0,
                rat: "Theo ƒë·ªãnh nghƒ©a, ƒë∆∞·ªùng trung tuy·∫øn xu·∫•t ph√°t t·ª´ ƒë·ªânh v√† ƒëi qua trung ƒëi·ªÉm c·ªßa c·∫°nh ƒë·ªëi di·ªán."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "M·ªói tam gi√°c c√≥ bao nhi√™u ƒë∆∞·ªùng trung tuy·∫øn?",
                opts: ["1 ƒë∆∞·ªùng", "2 ƒë∆∞·ªùng", "3 ƒë∆∞·ªùng", "V√¥ s·ªë"],
                ans: 2,
                rat: "V√¨ tam gi√°c c√≥ 3 ƒë·ªânh v√† 3 c·∫°nh t∆∞∆°ng ·ª©ng n√™n c√≥ ƒë√∫ng 3 ƒë∆∞·ªùng trung tuy·∫øn."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Ba ƒë∆∞·ªùng trung tuy·∫øn c·ªßa m·ªôt tam gi√°c c√≥ ƒë·∫∑c ƒëi·ªÉm g√¨?",
                opts: ["C√πng ƒëi qua m·ªôt ƒëi·ªÉm", "C√πng vu√¥ng g√≥c v·ªõi nhau", "Song song v·ªõi nhau", "Lu√¥n c·∫Øt nhau t·∫°i 3 ƒëi·ªÉm ph√¢n bi·ªát"],
                ans: 0,
                rat: "T√≠nh ch·∫•t ƒë·ªìng quy: Ba ƒë∆∞·ªùng trung tuy·∫øn c·ªßa m·ªôt tam gi√°c c√πng ƒëi qua m·ªôt ƒëi·ªÉm."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "ƒêi·ªÉm chung c·ªßa ba ƒë∆∞·ªùng trung tuy·∫øn c·ªßa m·ªôt tam gi√°c ƒë∆∞·ª£c g·ªçi l√†:",
                opts: ["Tr·ª±c t√¢m", "T√¢m ƒë∆∞·ªùng tr√≤n n·ªôi ti·∫øp", "Tr·ªçng t√¢m", "T√¢m ƒë∆∞·ªùng tr√≤n ngo·∫°i ti·∫øp"],
                ans: 2,
                rat: "Giao ƒëi·ªÉm c·ªßa ba ƒë∆∞·ªùng trung tuy·∫øn g·ªçi l√† tr·ªçng t√¢m c·ªßa tam gi√°c ƒë√≥."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "V·ªã tr√≠ c·ªßa tr·ªçng t√¢m tam gi√°c ·ªü ƒë√¢u?",
                opts: ["Lu√¥n n·∫±m trong tam gi√°c", "Lu√¥n n·∫±m tr√™n m·ªôt c·∫°nh", "C√≥ th·ªÉ n·∫±m ngo√†i tam gi√°c", "L√† m·ªôt ƒë·ªânh c·ªßa tam gi√°c"],
                ans: 0,
                rat: "Tr·ªçng t√¢m lu√¥n n·∫±m ·ªü mi·ªÅn trong c·ªßa tam gi√°c (kh√°c v·ªõi tr·ª±c t√¢m hay t√¢m ƒë∆∞·ªùng tr√≤n ngo·∫°i ti·∫øp)."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Tr·ªçng t√¢m G c·ªßa tam gi√°c ABC c√°ch m·ªói ƒë·ªânh m·ªôt kho·∫£ng b·∫±ng:",
                opts: ["1/3 ƒë·ªô d√†i ƒë∆∞·ªùng trung tuy·∫øn", "1/2 ƒë·ªô d√†i ƒë∆∞·ªùng trung tuy·∫øn", "2/3 ƒë·ªô d√†i ƒë∆∞·ªùng trung tuy·∫øn", "3/4 ƒë·ªô d√†i ƒë∆∞·ªùng trung tuy·∫øn"],
                ans: 2,
                rat: "Kho·∫£ng c√°ch t·ª´ tr·ªçng t√¢m ƒë·∫øn ƒë·ªânh b·∫±ng 2/3 ƒë·ªô d√†i ƒë∆∞·ªùng trung tuy·∫øn ƒëi qua ƒë·ªânh ƒë√≥."
            },
            // TH√îNG HI·ªÇU (5 c√¢u)
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho AM l√† ƒë∆∞·ªùng trung tuy·∫øn c·ªßa ŒîABC, G l√† tr·ªçng t√¢m. Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y l√† SAI?",
                opts: ["AG = 2/3 AM", "GM = 1/3 AM", "AG = 2 GM", "AM = 2 AG"],
                ans: 3,
                rat: "V√¨ AG = 2/3 AM n√™n AM = 3/2 AG, kh·∫≥ng ƒë·ªãnh AM = 2 AG l√† sai."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho AM l√† trung tuy·∫øn c·ªßa ŒîABC, G l√† tr·ªçng t√¢m. N·∫øu GM = 2cm th√¨ AG b·∫±ng:",
                opts: ["1cm", "2cm", "4cm", "6cm"],
                ans: 2,
                rat: "V√¨ AG = 2 GM n√™n AG = 2 * 2 = 4cm."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho ŒîABC c√≥ ba ƒë∆∞·ªùng trung tuy·∫øn AM, BN, CP c·∫Øt nhau t·∫°i G. T·ªâ s·ªë c·ªßa di·ªán t√≠ch ŒîGAB so v·ªõi ŒîABC l√†:",
                opts: ["1/2", "1/3", "1/4", "2/3"],
                ans: 1,
                rat: "Ba ƒë∆∞·ªùng trung tuy·∫øn chia tam gi√°c th√†nh 6 tam gi√°c nh·ªè c√≥ di·ªán t√≠ch b·∫±ng nhau, suy ra S(GAB) = 1/3 S(ABC)."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Trong tam gi√°c c√¢n, ƒë∆∞·ªùng trung tuy·∫øn ·ª©ng v·ªõi c·∫°nh ƒë√°y ƒë·ªìng th·ªùi l√†:",
                opts: ["ƒê∆∞·ªùng cao", "ƒê∆∞·ªùng ph√¢n gi√°c", "ƒê∆∞·ªùng trung tr·ª±c", "T·∫•t c·∫£ c√°c √Ω tr√™n"],
                ans: 3,
                rat: "T√≠nh ch·∫•t tam gi√°c c√¢n: ƒê∆∞·ªùng trung tuy·∫øn ·ª©ng v·ªõi ƒë√°y c≈©ng l√† ƒë∆∞·ªùng cao, ph√¢n gi√°c v√† trung tr·ª±c."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Tam gi√°c c√≥ hai ƒë∆∞·ªùng trung tuy·∫øn b·∫±ng nhau l√† tam gi√°c g√¨?",
                opts: ["Tam gi√°c c√¢n", "Tam gi√°c vu√¥ng", "Tam gi√°c nh·ªçn", "Tam gi√°c t√π"],
                ans: 0,
                rat: "Tam gi√°c c√≥ hai ƒë∆∞·ªùng trung tuy·∫øn t∆∞∆°ng ·ª©ng v·ªõi hai c·∫°nh b·∫±ng nhau l√† tam gi√°c c√¢n."
            },
            // V·∫¨N D·ª§NG (3 c√¢u)
            {
                lvl: "V·∫≠n d·ª•ng",
                q: "Cho ŒîABC c√¢n t·∫°i A c√≥ AB = 10cm, BC = 12cm. ƒê·ªô d√†i ƒë∆∞·ªùng trung tuy·∫øn AM l√†:",
                opts: ["6cm", "8cm", "10cm", "4cm"],
                ans: 1,
                rat: "M l√† trung ƒëi·ªÉm BC n√™n BM = 6cm. ŒîABM vu√¥ng t·∫°i M (do tam gi√°c c√¢n), √°p d·ª•ng Pytago: AM = sqrt(10^2 - 6^2) = 8cm."
            },
            {
                lvl: "V·∫≠n d·ª•ng th·ª±c t·∫ø",
                q: "(Th·ª±c t·∫ø) ƒê·ªÉ m·ªôt t·∫•m b√¨a h√¨nh tam gi√°c thƒÉng b·∫±ng tr√™n ƒë·∫ßu ng√≥n tay, b·∫°n c·∫ßn ƒë·∫∑t ng√≥n tay v√†o v·ªã tr√≠ n√†o c·ªßa tam gi√°c?",
                opts: ["Trung ƒëi·ªÉm c·∫°nh d√†i nh·∫•t", "M·ªôt ƒë·ªânh b·∫•t k√¨", "Tr·ªçng t√¢m c·ªßa tam gi√°c", "ƒêi·ªÉm b·∫•t k√¨ b√™n trong"],
                ans: 2,
                rat: "Tr·ªçng t√¢m l√† ƒëi·ªÉm c√¢n b·∫±ng kh·ªëi l∆∞·ª£ng c·ªßa tam gi√°c, n√™n khi ƒë·∫∑t ng√≥n tay t·∫°i ƒë√≥, t·∫•m b√¨a s·∫Ω thƒÉng b·∫±ng."
            },
            {
                lvl: "V·∫≠n d·ª•ng",
                q: "Cho ŒîABC c√≥ G l√† tr·ªçng t√¢m. Bi·∫øt t·ªïng ƒë·ªô d√†i ba trung tuy·∫øn l√† 18cm. T·ªïng kho·∫£ng c√°ch t·ª´ G ƒë·∫øn ba ƒë·ªânh l√†:",
                opts: ["6cm", "12cm", "9cm", "18cm"],
                ans: 1,
                rat: "T·ªïng AG + BG + CG = 2/3 * (AM + BN + CP) = 2/3 * 18 = 12cm."
            },
            // V·∫¨N D·ª§NG CAO (1 c√¢u)
            {
                lvl: "V·∫≠n d·ª•ng cao",
                q: "Cho ŒîABC, ba trung tuy·∫øn AM, BN, CP. Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y ƒê√öNG v·ªÅ t·ªïng ƒë·ªô d√†i 3 trung tuy·∫øn v√† chu vi tam gi√°c (P)?",
                opts: ["AM + BN + CP > P", "AM + BN + CP < P", "AM + BN + CP = P", "AM + BN + CP < 3/4 P"],
                ans: 1,
                rat: "S·ª≠ d·ª•ng b·∫•t ƒë·∫≥ng th·ª©c tam gi√°c, ta ch·ª©ng minh ƒë∆∞·ª£c t·ªïng ƒë·ªô d√†i ba ƒë∆∞·ªùng trung tuy·∫øn lu√¥n nh·ªè h∆°n chu vi tam gi√°c."
            }
        ];

        let currentQ = 0;
        let score = 0;

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = questions[currentQ];
            document.getElementById('q-idx').innerText = currentQ + 1;
            document.getElementById('score').innerText = score;
            document.getElementById('progress').style.width = `${(currentQ / questions.length) * 100}%`;
            
            const diff = document.getElementById('difficulty');
            diff.innerText = q.lvl;
            diff.className = `inline-block px-3 py-1 rounded-lg text-[10px] font-bold text-slate-900 mb-4 uppercase ${
                q.lvl === 'Nh·∫≠n bi·∫øt' ? 'bg-green-400' : 
                q.lvl === 'Th√¥ng hi·ªÉu' ? 'bg-blue-400' : 
                q.lvl === 'V·∫≠n d·ª•ng' ? 'bg-yellow-400' : 'bg-red-500 text-white'
            }`;

            document.getElementById('question-text').innerText = q.q;
            const grid = document.getElementById('options-grid');
            grid.innerHTML = '';
            
            q.opts.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "btn-option bg-slate-800/50 p-5 rounded-2xl text-left font-semibold flex items-center";
                btn.innerHTML = `<span class="w-10 h-10 rounded-xl bg-indigo-500/20 text-indigo-400 flex items-center justify-center mr-4 flex-none border border-indigo-500/30">${String.fromCharCode(65+i)}</span> <span>${opt}</span>`;
                btn.onclick = () => checkAnswer(i);
                grid.appendChild(btn);
            });
        }

        function checkAnswer(i) {
            const q = questions[currentQ];
            const correct = (i === q.ans);
            if (correct) {
                score++;
                playSfx(true);
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#818cf8', '#fbbf24', '#f472b6']
                });
                document.getElementById('fb-emoji').innerText = "üòé";
                document.getElementById('fb-title').innerText = "QU√Å CHU·∫®N!";
                document.getElementById('fb-title').className = "text-3xl font-black mb-4 text-yellow-400";
            } else {
                playSfx(false);
                document.getElementById('fb-emoji').innerText = "ü§î";
                document.getElementById('fb-title').innerText = "C·∫¶N C·∫®N TH·∫¨N!";
                document.getElementById('fb-title').className = "text-3xl font-black mb-4 text-indigo-400";
            }
            document.getElementById('fb-rat').innerHTML = `<b>Gi·∫£i th√≠ch n√®:</b> ${q.rat}`;
            document.getElementById('feedback-modal').classList.remove('hidden');
        }

        function nextQ() {
            document.getElementById('feedback-modal').classList.add('hidden');
            currentQ++;
            if (currentQ < questions.length) {
                showQuestion();
            } else {
                showEnd();
            }
        }

        function showEnd() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('end-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            
            let comment = "";
            if (score === 15) comment = "ƒê·ªânh c·ªßa ch√≥p! Em l√† 'Th·∫ßn ƒë·ªìng Tr·ªçng t√¢m' c·ªßa c√¥ Thu B√¨nh r·ªìi! üèÜ";
            else if (score >= 12) comment = "Gi·ªèi l·∫Øm! Ki·∫øn th·ª©c v·ªÅ trung tuy·∫øn c·ªßa em r·∫•t v·ªØng v√†ng! ‚ú®";
            else if (score >= 8) comment = "Kh√° t·ªët! Em h√£y √¥n l·∫°i c√°c t·ªâ l·ªá 2/3 ƒë·ªÉ b·ª©t ph√° h∆°n nh√©! üí™";
            else comment = "ƒê·ª´ng bu·ªìn nh√©! H√£y √¥n b√†i c√πng c√¥ Thu B√¨nh v√† th·ª≠ l·∫°i l·∫ßn sau nha! ‚ù§Ô∏è";
            
            document.getElementById('rank-comment').innerText = comment;
            confetti({ particleCount: 300, spread: 160, origin: { y: 0.6 } });
        }
    </script>
</body>
</html>
