<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·∫•u Tr∆∞·ªùng ƒê∆∞·ªùng Xi√™n - To√°n 7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Space+Grotesk', sans-serif;
            background: #0f172a;
            color: #f8fafc;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .neon-box {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 2px solid #22d3ee;
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.2);
            border-radius: 2rem;
        }
        .option-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .option-card:hover {
            transform: scale(1.02);
            background: rgba(34, 211, 238, 0.1);
            border-color: #22d3ee;
        }
        .progress-bar-fill {
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(90deg, #22d3ee, #818cf8);
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .float-icon { animation: float 3s ease-in-out infinite; }
    </style>
</head>
<body class="p-4">

    <div id="game-container" class="max-w-3xl w-full neon-box p-6 md:p-10 relative overflow-hidden">
        
        <!-- M√†n h√¨nh kh·ªüi ƒë·∫ßu -->
        <div id="start-screen" class="text-center py-10">
            <div class="text-8xl mb-6 float-icon">‚ö°</div>
            <h1 class="text-4xl md:text-6xl font-bold text-cyan-400 mb-4 tracking-tighter">ƒê·∫§U TR∆Ø·ªúNG<br>ƒê∆Ø·ªúNG XI√äN</h1>
            <p class="text-slate-400 text-lg mb-8">Th·ª≠ th√°ch h√¨nh h·ªçc d√†nh ri√™ng cho l·ªõp c·ªßa c√¥ <b>Thu B√¨nh</b>!<br>Ai s·∫Ω l√† "Chi·∫øn th·∫ßn h√¨nh chi·∫øu" h√¥m nay?</p>
            <button onclick="startGame()" class="bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-black py-4 px-12 rounded-full text-xl shadow-[0_0_30px_rgba(34,211,238,0.5)] transition-all transform hover:scale-110">
                TH√ÅCH ƒê·∫§U NGAY! üöÄ
            </button>
        </div>

        <!-- M√†n h√¨nh c√¢u h·ªèi -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <div class="text-cyan-400 font-bold">Th·ª≠ th√°ch: <span id="q-num" class="text-2xl">1</span>/15</div>
                <div class="text-indigo-400 font-bold">ƒêi·ªÉm: <span id="score" class="text-2xl">0</span></div>
            </div>

            <div class="w-full bg-slate-800 rounded-full h-3 mb-8">
                <div id="progress" class="progress-bar-fill h-3 rounded-full" style="width: 0%"></div>
            </div>

            <div id="question-box" class="mb-10">
                <div id="difficulty" class="inline-block px-3 py-1 rounded text-[10px] font-bold tracking-widest uppercase mb-4"></div>
                <h2 id="question-text" class="text-xl md:text-2xl font-medium leading-relaxed"></h2>
            </div>

            <div id="choices" class="grid grid-cols-1 gap-4">
                <!-- N√∫t ƒë√°p √°n -->
            </div>
        </div>

        <!-- M√†n h√¨nh k·∫øt th√∫c -->
        <div id="end-screen" class="hidden text-center py-10">
            <div id="final-emoji" class="text-8xl mb-6"></div>
            <h2 class="text-4xl font-bold text-cyan-400 mb-2">H·∫æT GI·ªú!</h2>
            <p class="text-xl mb-8">Em ƒë√£ chinh ph·ª•c ƒë∆∞·ª£c: <span id="final-score" class="text-3xl font-bold text-indigo-400"></span>/15 c√¢u</p>
            <div id="rank-text" class="text-slate-400 mb-10 italic"></div>
            <button onclick="location.reload()" class="bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 px-10 rounded-full transition-all">
                PH·ª§C TH√ô üîÑ
            </button>
        </div>

        <!-- Modal gi·∫£i th√≠ch -->
        <div id="feedback-modal" class="hidden fixed inset-0 flex items-center justify-center z-50 p-4">
            <div class="absolute inset-0 bg-slate-950/80 backdrop-blur-sm"></div>
            <div class="neon-box max-w-md w-full p-8 relative animate-in fade-in zoom-in duration-300">
                <div id="fb-icon" class="text-6xl text-center mb-4"></div>
                <h3 id="fb-title" class="text-2xl font-bold text-center mb-4"></h3>
                <div class="bg-slate-800/50 p-4 rounded-xl mb-6 border-l-4 border-cyan-500">
                    <p id="fb-rationale" class="text-slate-300 text-sm italic leading-relaxed"></p>
                </div>
                <button onclick="nextQuestion()" class="w-full bg-cyan-500 text-slate-950 font-bold py-4 rounded-xl hover:bg-cyan-400 transition-all">
                    TI·∫æP T·ª§C ‚ûî
                </button>
            </div>
        </div>
    </div>

    <script>
/* ================= RANDOM TOOL ================= */
function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

/* ================= √ÇM THANH ================= */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playSfx(type) {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.connect(gain);
    gain.connect(audioCtx.destination);

    if (type === 'win') {
        osc.frequency.setValueAtTime(523.25, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1046.5, audioCtx.currentTime + 0.3);
    } else {
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(110, audioCtx.currentTime);
    }
    gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.3);
}
        const questions = [
            // NH·∫¨N BI·∫æT (6 c√¢u)
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Trong c√°c ƒëo·∫°n th·∫≥ng n·ªëi t·ª´ m·ªôt ƒëi·ªÉm A ·ªü ngo√†i ƒë∆∞·ªùng th·∫≥ng d ƒë·∫øn ƒë∆∞·ªùng th·∫≥ng d, ƒëo·∫°n th·∫≥ng n√†o ng·∫Øn nh·∫•t?",
                opts: ["ƒê∆∞·ªùng xi√™n", "ƒê∆∞·ªùng vu√¥ng g√≥c", "ƒê∆∞·ªùng trung tuy·∫øn", "ƒê∆∞·ªùng ph√¢n gi√°c"],
                ans: 1,
                rat: "ƒê·ªãnh l√≠ 1: Trong c√°c ƒë∆∞·ªùng xi√™n v√† ƒë∆∞·ªùng vu√¥ng g√≥c k·∫ª t·ª´ m·ªôt ƒëi·ªÉm ·ªü ngo√†i m·ªôt ƒë∆∞·ªùng th·∫≥ng ƒë·∫øn ƒë∆∞·ªùng th·∫≥ng ƒë√≥, ƒë∆∞·ªùng vu√¥ng g√≥c l√† ƒë∆∞·ªùng ng·∫Øn nh·∫•t."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Kho·∫£ng c√°ch t·ª´ ƒëi·ªÉm A ƒë·∫øn ƒë∆∞·ªùng th·∫≥ng d l√† ƒë·ªô d√†i c·ªßa ƒëo·∫°n th·∫≥ng n√†o?",
                opts: ["ƒê∆∞·ªùng xi√™n b·∫•t k√¨", "ƒê∆∞·ªùng vu√¥ng g√≥c k·∫ª t·ª´ A ƒë·∫øn d", "ƒêo·∫°n th·∫≥ng n·ªëi A v·ªõi m·ªôt ƒëi·ªÉm tr√™n d", "ƒê∆∞·ªùng th·∫≥ng d"],
                ans: 1,
                rat: "Kho·∫£ng c√°ch t·ª´ ƒëi·ªÉm A ƒë·∫øn ƒë∆∞·ªùng th·∫≥ng d ch√≠nh l√† ƒë·ªô d√†i ƒëo·∫°n vu√¥ng g√≥c AH k·∫ª t·ª´ A ƒë·∫øn d."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Cho AH ‚ä• d t·∫°i H, AB l√† ƒë∆∞·ªùng xi√™n. Khi ƒë√≥ ƒëo·∫°n th·∫≥ng HB ƒë∆∞·ª£c g·ªçi l√†:",
                opts: ["ƒê∆∞·ªùng xi√™n", "H√¨nh chi·∫øu c·ªßa AB tr√™n d", "Kho·∫£ng c√°ch t·ª´ A ƒë·∫øn d", "ƒê∆∞·ªùng trung tr·ª±c"],
                ans: 1,
                rat: "ƒêo·∫°n th·∫≥ng HB n·ªëi ch√¢n ƒë∆∞·ªùng vu√¥ng g√≥c H v√† ch√¢n ƒë∆∞·ªùng xi√™n B ƒë∆∞·ª£c g·ªçi l√† h√¨nh chi·∫øu c·ªßa ƒë∆∞·ªùng xi√™n AB tr√™n ƒë∆∞·ªùng th·∫≥ng d."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "So s√°nh ƒë∆∞·ªùng vu√¥ng g√≥c v√† ƒë∆∞·ªùng xi√™n k·∫ª t·ª´ c√πng m·ªôt ƒëi·ªÉm ƒë·∫øn c√πng m·ªôt ƒë∆∞·ªùng th·∫≥ng?",
                opts: ["ƒê∆∞·ªùng vu√¥ng g√≥c > ƒê∆∞·ªùng xi√™n", "ƒê∆∞·ªùng vu√¥ng g√≥c < ƒê∆∞·ªùng xi√™n", "Hai ƒë∆∞·ªùng b·∫±ng nhau", "Kh√¥ng so s√°nh ƒë∆∞·ª£c"],
                ans: 1,
                rat: "Trong tam gi√°c vu√¥ng t·∫°o b·ªüi ƒë∆∞·ªùng vu√¥ng g√≥c v√† ƒë∆∞·ªùng xi√™n, ƒë∆∞·ªùng xi√™n l√† c·∫°nh huy·ªÅn n√™n lu√¥n l·ªõn h∆°n ƒë∆∞·ªùng vu√¥ng g√≥c (c·∫°nh g√≥c vu√¥ng)."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Cho AH ‚ä• d. ƒêi·ªÉm H ƒë∆∞·ª£c g·ªçi l√† g√¨ c·ªßa ƒë∆∞·ªùng vu√¥ng g√≥c AH?",
                opts: ["ƒê·ªânh", "H√¨nh chi·∫øu", "Ch√¢n ƒë∆∞·ªùng vu√¥ng g√≥c", "Trung ƒëi·ªÉm"],
                ans: 2,
                rat: "ƒêi·ªÉm H n∆°i ƒë∆∞·ªùng vu√¥ng g√≥c c·∫Øt ƒë∆∞·ªùng th·∫≥ng d ƒë∆∞·ª£c g·ªçi l√† ch√¢n ƒë∆∞·ªùng vu√¥ng g√≥c (ho·∫∑c h√¨nh chi·∫øu c·ªßa ƒëi·ªÉm A tr√™n d)."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "N·∫øu hai ƒë∆∞·ªùng xi√™n k·∫ª t·ª´ m·ªôt ƒëi·ªÉm ƒë·∫øn m·ªôt ƒë∆∞·ªùng th·∫≥ng c√≥ h√¨nh chi·∫øu b·∫±ng nhau th√¨:",
                opts: ["Hai ƒë∆∞·ªùng xi√™n ƒë√≥ b·∫±ng nhau", "ƒê∆∞·ªùng xi√™n n√†o d√†i h∆°n c√≥ h√¨nh chi·∫øu nh·ªè h∆°n", "Hai ƒë∆∞·ªùng xi√™n ƒë√≥ vu√¥ng g√≥c", "Kh√¥ng k·∫øt lu·∫≠n ƒë∆∞·ª£c"],
                ans: 0,
                rat: "ƒê·ªãnh l√≠ 2: Hai ƒë∆∞·ªùng xi√™n b·∫±ng nhau th√¨ c√≥ hai h√¨nh chi·∫øu b·∫±ng nhau v√† ng∆∞·ª£c l·∫°i."
            },
            // TH√îNG HI·ªÇU (5 c√¢u)
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho ƒë∆∞·ªùng xi√™n AB c√≥ h√¨nh chi·∫øu HB v√† ƒë∆∞·ªùng xi√™n AC c√≥ h√¨nh chi·∫øu HC tr√™n d. N·∫øu HB > HC th√¨:",
                opts: ["AB < AC", "AB = AC", "AB > AC", "AB + AC = HB + HC"],
                ans: 2,
                rat: "ƒê·ªãnh l√≠ 2: ƒê∆∞·ªùng xi√™n n√†o c√≥ h√¨nh chi·∫øu l·ªõn h∆°n th√¨ ƒë∆∞·ªùng xi√™n ƒë√≥ l·ªõn h∆°n."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho tam gi√°c ABC vu√¥ng t·∫°i A. Kho·∫£ng c√°ch t·ª´ ƒëi·ªÉm B ƒë·∫øn ƒë∆∞·ªùng th·∫≥ng AC l√† ƒë·ªô d√†i ƒëo·∫°n th·∫≥ng n√†o?",
                opts: ["BC", "AC", "AB", "ƒê∆∞·ªùng cao t·ª´ A"],
                ans: 2,
                rat: "V√¨ BA ‚ä• AC t·∫°i A n√™n BA ch√≠nh l√† ƒëo·∫°n vu√¥ng g√≥c, ƒë·ªô d√†i BA l√† kho·∫£ng c√°ch t·ª´ B ƒë·∫øn AC."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho AH ‚ä• d, AB v√† AC l√† hai ƒë∆∞·ªùng xi√™n. N·∫øu AB < AC th√¨ kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y ƒê√öNG?",
                opts: ["HB < HC", "HB > HC", "HB = HC", "HB + HC = AH"],
                ans: 0,
                rat: "ƒê∆∞·ªùng xi√™n nh·ªè h∆°n th√¨ c√≥ h√¨nh chi·∫øu nh·ªè h∆°n."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho ƒëi·ªÉm A n·∫±m ngo√†i d. V·∫Ω AH ‚ä• d. L·∫•y B, C tr√™n d sao cho H n·∫±m gi·ªØa B v√† C. Bi·∫øt HB = 3cm, HC = 4cm. So s√°nh AB v√† AC?",
                opts: ["AB = AC", "AB > AC", "AB < AC", "Kh√¥ng so s√°nh ƒë∆∞·ª£c"],
                ans: 2,
                rat: "V√¨ HB < HC (3 < 4) n√™n ƒë∆∞·ªùng xi√™n AB < AC."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Trong m·ªôt tam gi√°c, ƒë·ªëi di·ªán v·ªõi c·∫°nh l·ªõn h∆°n l√† g√≥c l·ªõn h∆°n. √Åp d·ª•ng v√†o tam gi√°c vu√¥ng AHB (‚à†H=90¬∞), c·∫°nh l·ªõn nh·∫•t l√†:",
                opts: ["AH", "HB", "AB", "Kh√¥ng c√≥ c·∫°nh l·ªõn nh·∫•t"],
                ans: 2,
                rat: "Trong tam gi√°c vu√¥ng, g√≥c vu√¥ng l√† g√≥c l·ªõn nh·∫•t n√™n c·∫°nh huy·ªÅn (ƒë∆∞·ªùng xi√™n AB) ƒë·ªëi di·ªán v·ªõi n√≥ l√† c·∫°nh l·ªõn nh·∫•t."
            },
            // V·∫¨N D·ª§NG (3 c√¢u)
            {
                lvl: "V·∫≠n d·ª•ng",
                q: "Cho tam gi√°c ABC c√¢n t·∫°i A. G·ªçi H l√† h√¨nh chi·∫øu c·ªßa A tr√™n BC. L·∫•y ƒëi·ªÉm M b·∫•t k√¨ tr√™n ƒëo·∫°n th·∫≥ng HB. So s√°nh AM v√† AB?",
                opts: ["AM > AB", "AM < AB", "AM = AB", "AM = 2AB"],
                ans: 1,
                rat: "H√¨nh chi·∫øu c·ªßa AM l√† HM, h√¨nh chi·∫øu c·ªßa AB l√† HB. V√¨ M n·∫±m tr√™n HB n√™n HM < HB, suy ra AM < AB."
            },
            {
                lvl: "V·∫≠n d·ª•ng th·ª±c t·∫ø",
                q: "(Th·ª±c t·∫ø) B·∫°n Nam mu·ªën b∆°i t·ª´ v·ªã tr√≠ A b√™n b·ªù s√¥ng n√†y sang b·ªù s√¥ng b√™n kia. ƒê·ªÉ qu√£ng ƒë∆∞·ªùng b∆°i l√† ng·∫Øn nh·∫•t, Nam n√™n b∆°i theo h∆∞·ªõng n√†o?",
                opts: ["B∆°i x√©o theo d√≤ng n∆∞·ªõc", "B∆°i vu√¥ng g√≥c v·ªõi b·ªù s√¥ng", "B∆°i ng∆∞·ª£c d√≤ng n∆∞·ªõc", "H∆∞·ªõng n√†o c≈©ng nh∆∞ nhau"],
                ans: 1,
                rat: "ƒê∆∞·ªùng vu√¥ng g√≥c l√† ƒë∆∞·ªùng ng·∫Øn nh·∫•t n·ªëi t·ª´ m·ªôt ƒëi·ªÉm ƒë·∫øn m·ªôt ƒë∆∞·ªùng th·∫≥ng. B∆°i vu√¥ng g√≥c gi√∫p t·ªëi thi·ªÉu h√≥a qu√£ng ƒë∆∞·ªùng."
            },
            {
                lvl: "V·∫≠n d·ª•ng",
                q: "Cho tam gi√°c ABC nh·ªçn, AH ‚ä• BC. So s√°nh AH v·ªõi AB v√† AC?",
                opts: ["AH > AB v√† AH > AC", "AH < AB v√† AH < AC", "AB < AH < AC", "AH = AB = AC"],
                ans: 1,
                rat: "AH l√† ƒë∆∞·ªùng vu√¥ng g√≥c, AB v√† AC l√† c√°c ƒë∆∞·ªùng xi√™n. ƒê∆∞·ªùng vu√¥ng g√≥c lu√¥n ng·∫Øn h∆°n ƒë∆∞·ªùng xi√™n."
            },
            // V·∫¨N D·ª§NG CAO (1 c√¢u)
            {
                lvl: "V·∫≠n d·ª•ng cao",
                q: "Cho tam gi√°c ABC vu√¥ng t·∫°i A. M l√† m·ªôt ƒëi·ªÉm b·∫•t k√¨ tr√™n c·∫°nh huy·ªÅn BC (M kh√¥ng tr√πng B, C). Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y lu√¥n ƒê√öNG?",
                opts: ["AM > BC", "AM < AB", "AM < BC", "AM > AB + AC"],
                ans: 2,
                rat: "K·∫ª AH ‚ä• BC. Ta c√≥ AH ‚â§ AM (ƒë∆∞·ªùng vu√¥ng g√≥c ng·∫Øn h∆°n ƒë∆∞·ªùng xi√™n). ƒê·ªìng th·ªùi trong tam gi√°c vu√¥ng ABM ho·∫∑c ACM, AM lu√¥n nh·ªè h∆°n c·∫°nh huy·ªÅn BC (ƒëo·∫°n th·∫≥ng n·ªëi 2 ƒëi·ªÉm tr√™n c·∫°nh huy·ªÅn lu√¥n nh·ªè h∆°n ho·∫∑c b·∫±ng c·∫°nh huy·ªÅn ƒë√≥)."
            }
        ];

       shuffle(questions);

/* ================= BI·∫æN TR·∫†NG TH√ÅI ================= */
let currentIdx = 0;
let score = 0;
let currentOptions = [];

/* ================= B·∫ÆT ƒê·∫¶U ================= */
function startGame() {
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    showQuestion();
}

/* ================= HI·ªÇN TH·ªä C√ÇU ================= */
function showQuestion() {
    const q = questions[currentIdx];
    document.getElementById('q-num').innerText = currentIdx + 1;
    document.getElementById('score').innerText = score;
    document.getElementById('progress').style.width =
        `${(currentIdx / questions.length) * 100}%`;

    const diff = document.getElementById('difficulty');
    diff.innerText = q.lvl;
    diff.className =
        `inline-block px-3 py-1 rounded text-[10px] font-bold uppercase mb-4 ${
            q.lvl === 'Nh·∫≠n bi·∫øt' ? 'bg-emerald-500/20 text-emerald-400' :
            q.lvl === 'Th√¥ng hi·ªÉu' ? 'bg-cyan-500/20 text-cyan-400' :
            q.lvl.includes('V·∫≠n d·ª•ng cao') ? 'bg-rose-500/20 text-rose-400' :
            'bg-amber-500/20 text-amber-400'
        }`;

    document.getElementById('question-text').innerHTML = q.q;

    /* Chu·∫©n ho√° + random ƒë√°p √°n */
    currentOptions = q.opts.map((t, i) => ({
        text: t,
        correct: i === q.ans
    }));
    shuffle(currentOptions);

    const choices = document.getElementById('choices');
    choices.innerHTML = '';

    currentOptions.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className =
            "option-card w-full p-4 rounded-xl text-left hover:bg-slate-800 flex items-center gap-4";
        btn.innerHTML = `
            <span class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center
            text-cyan-400 border border-cyan-500/30 font-bold">
            ${String.fromCharCode(65 + i)}
            </span>
            <span>${opt.text}</span>`;
        btn.onclick = () => checkAnswer(i);
        choices.appendChild(btn);
    });
}

/* ================= KI·ªÇM TRA ================= */
function checkAnswer(i) {
    const isCorrect = currentOptions[i].correct;

    if (isCorrect) {
        score++;
        playSfx('win');
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        setFb("‚ú®", "CH√çNH X√ÅC!", "cyan");
    } else {
        playSfx('lose');
        setFb("‚ö†Ô∏è", "C·∫¶N C·∫®N TH·∫¨N H∆†N!", "rose");
    }

    document.getElementById('fb-rationale').innerHTML =
        `<b>Gi·∫£i th√≠ch:</b> ${questions[currentIdx].rat}`;
    document.getElementById('feedback-modal').classList.remove('hidden');
}

function setFb(icon, text, color) {
    document.getElementById('fb-icon').innerText = icon;
    document.getElementById('fb-title').innerText = text;
    document.getElementById('fb-title').className =
        `text-2xl font-bold text-center mb-4 text-${color}-400`;
}

/* ================= CHUY·ªÇN C√ÇU ================= */
function nextQuestion() {
    document.getElementById('feedback-modal').classList.add('hidden');
    currentIdx++;
    currentIdx < questions.length ? showQuestion() : showEnd();
}

/* ================= K·∫æT TH√öC ================= */
function showEnd() {
    document.getElementById('quiz-screen').classList.add('hidden');
    document.getElementById('end-screen').classList.remove('hidden');
    document.getElementById('final-score').innerText = score;

    const e = document.getElementById('final-emoji');
    const r = document.getElementById('rank-text');

    if (score === 15) {
        e.innerText = "üëë";
        r.innerText = "Tuy·ªát ƒë·ªânh! Em l√† Chi·∫øn th·∫ßn ƒê∆∞·ªùng xi√™n!";
    } else if (score >= 12) {
        e.innerText = "üíé";
        r.innerText = "R·∫•t t·ªët! Ki·∫øn th·ª©c c·ªßa em r·∫•t v·ªØng.";
    } else if (score >= 8) {
        e.innerText = "‚ö°";
        r.innerText = "Kh√° l·∫Øm! C·∫ßn luy·ªán th√™m ph·∫ßn v·∫≠n d·ª•ng.";
    } else {
        e.innerText = "üéØ";
        r.innerText = "√în l·∫°i b√†i v√† quay l·∫°i chinh ph·ª•c nh√©!";
    }

    confetti({ particleCount: 200, spread: 160, origin: { y: 0.6 } });
}
</script>
</body>
</html>
