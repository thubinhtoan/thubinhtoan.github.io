<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>C·∫ßu Treo H√¨nh Thang ‚Äì Thu B√¨nh To√°n (Game 11)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel ƒë·ªÉ d√πng JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="m-0 p-0 bg-slate-950">
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    // ================== C√ÇU H·ªéI GAME 11 ‚Äì H√åNH THANG ==================
    // 15 c√¢u ‚Äì H√¨nh thang, h√¨nh thang c√¢n, h√¨nh thang vu√¥ng
    // Ch·ªâ s·ªë ƒë√°p √°n ƒë√∫ng: 0 = A, 1 = B, 2 = C, 3 = D
    const questions = [
      // --- NH·∫¨N BI·∫æT (6 c√¢u) ---
      {
        id: 1,
        level: "Nh·∫≠n bi·∫øt",
        question: "H√¨nh thang l√† t·ª© gi√°c c√≥:",
        options: [
          "Hai c·∫∑p c·∫°nh ƒë·ªëi song song",
          "Hai c·∫∑p c·∫°nh k·ªÅ song song",
          "M·ªôt c·∫∑p c·∫°nh ƒë·ªëi song song",
          "B·ªën g√≥c vu√¥ng"
        ],
        correct: 2 // C
      },
      {
        id: 2,
        level: "Nh·∫≠n bi·∫øt",
        question: "Trong c√°c t·ª© gi√°c sau, t·ª© gi√°c n√†o CH·∫ÆC CH·∫ÆN l√† h√¨nh thang?",
        options: [
          "H√¨nh b√¨nh h√†nh",
          "H√¨nh ch·ªØ nh·∫≠t",
          "T·ª© gi√°c c√≥ ƒë√∫ng m·ªôt c·∫∑p c·∫°nh ƒë·ªëi song song",
          "H√¨nh vu√¥ng"
        ],
        correct: 2 // C
      },
      {
        id: 3,
        level: "Nh·∫≠n bi·∫øt",
        question: "H√¨nh thang c√¢n l√† h√¨nh thang c√≥:",
        options: [
          "Hai ƒë√°y b·∫±ng nhau",
          "Hai c·∫°nh b√™n b·∫±ng nhau",
          "M·ªôt g√≥c vu√¥ng",
          "Hai ƒë∆∞·ªùng ch√©o vu√¥ng g√≥c"
        ],
        correct: 1 // B
      },
      {
        id: 4,
        level: "Nh·∫≠n bi·∫øt",
        question: "H√¨nh thang vu√¥ng l√† h√¨nh thang c√≥:",
        options: [
          "B·ªën g√≥c vu√¥ng",
          "Hai c·∫°nh b√™n b·∫±ng nhau",
          "Hai g√≥c vu√¥ng k·ªÅ m·ªôt c·∫°nh b√™n",
          "Hai ƒë∆∞·ªùng ch√©o b·∫±ng nhau"
        ],
        correct: 2 // C
      },
      {
        id: 5,
        level: "Nh·∫≠n bi·∫øt",
        question: "Trong h√¨nh thang ABCD (AB ‚à• CD), kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y ƒë√∫ng?",
        options: [
          "AB v√† CD g·ªçi l√† hai c·∫°nh b√™n",
          "AD v√† BC l√† hai ƒë√°y",
          "Hai g√≥c k·ªÅ c√πng m·ªôt c·∫°nh b√™n b√π nhau",
          "B·ªën c·∫°nh ƒë·ªÅu b·∫±ng nhau"
        ],
        correct: 2 // C (hai g√≥c k·ªÅ c√πng m·ªôt c·∫°nh b√™n b√π nhau)
      },
      {
        id: 6,
        level: "Nh·∫≠n bi·∫øt",
        question: "Trong h√¨nh thang ABCD (AB ‚à• CD), c√°c ƒëo·∫°n AB v√† CD ƒë∆∞·ª£c g·ªçi l√†:",
        options: [
          "Hai c·∫°nh b√™n",
          "ƒê∆∞·ªùng ch√©o",
          "ƒê∆∞·ªùng cao",
          "Hai ƒë√°y"
        ],
        correct: 3 // D
      },

      // --- TH√îNG HI·ªÇU (5 c√¢u) ---
      {
        id: 7,
        level: "Th√¥ng hi·ªÉu",
        question: "M·ªôt h√¨nh thang c√≥ hai ƒë√°y l·∫ßn l∆∞·ª£t l√† 6 cm v√† 10 cm, chi·ªÅu cao l√† 4 cm. Di·ªán t√≠ch h√¨nh thang l√†:",
        options: [
          "32 cm¬≤",
          "64 cm¬≤",
          "16 cm¬≤",
          "40 cm¬≤"
        ],
        correct: 0 // A (S = (6+10)/2 ¬∑ 4 = 32)
      },
      {
        id: 8,
        level: "Th√¥ng hi·ªÉu",
        question: "M·ªôt h√¨nh thang c√¢n c√≥ hai ƒë√°y l·∫ßn l∆∞·ª£t l√† 8 cm v√† 4 cm, m·ªói c·∫°nh b√™n d√†i 5 cm. Chu vi h√¨nh thang l√†:",
        options: [
          "22 cm",
          "18 cm",
          "26 cm",
          "20 cm"
        ],
        correct: 0 // A (P = 8 + 4 + 5 + 5 = 22)
      },
      {
        id: 9,
        level: "Th√¥ng hi·ªÉu",
        question: "Trong h√¨nh thang c√¢n, kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y ƒë√∫ng?",
        options: [
          "Hai ƒë√°y b·∫±ng nhau",
          "Hai c·∫°nh b√™n song song",
          "Hai g√≥c k·ªÅ c√πng m·ªôt ƒë√°y b·∫±ng nhau",
          "Hai ƒë∆∞·ªùng cao b·∫±ng nhau nh∆∞ng hai c·∫°nh b√™n kh√°c nhau"
        ],
        correct: 2 // C
      },
      {
        id: 10,
        level: "Th√¥ng hi·ªÉu",
        question: "Trong h√¨nh thang c√¢n, c√°c ƒë∆∞·ªùng ch√©o c√≥ t√≠nh ch·∫•t:",
        options: [
          "Vu√¥ng g√≥c v·ªõi nhau",
          "B·∫±ng nhau",
          "Kh√¥ng b·∫±ng nhau",
          "C·∫Øt nhau t·∫°i trung ƒëi·ªÉm m·ªói ƒë∆∞·ªùng"
        ],
        correct: 1 // B
      },
      {
        id: 11,
        level: "Th√¥ng hi·ªÉu",
        question: "M·ªôt h√¨nh thang vu√¥ng c√≥ hai ƒë√°y l√† 5 cm v√† 9 cm, chi·ªÅu cao l√† 3 cm. Di·ªán t√≠ch c·ªßa h√¨nh thang l√†:",
        options: [
          "21 cm¬≤",
          "14 cm¬≤",
          "42 cm¬≤",
          "28 cm¬≤"
        ],
        correct: 0 // A (S = (5+9)/2 ¬∑ 3 = 21)
      },

      // --- V·∫¨N D·ª§NG (3 c√¢u) ---
      {
        id: 12,
        level: "V·∫≠n d·ª•ng",
        question: "M·ªôt h√¨nh thang c√≥ di·ªán t√≠ch 48 cm¬≤, hai ƒë√°y l·∫ßn l∆∞·ª£t l√† 10 cm v√† 14 cm. Chi·ªÅu cao c·ªßa h√¨nh thang l√†:",
        options: [
          "2 cm",
          "3 cm",
          "4 cm",
          "6 cm"
        ],
        correct: 2 // C (48 = (10+14)/2 ¬∑ h ‚áí 48 = 12h ‚áí h = 4)
      },
      {
        id: 13,
        level: "V·∫≠n d·ª•ng",
        question: "M·ªôt h√¨nh thang c√¢n c√≥ hai ƒë√°y l·∫ßn l∆∞·ª£t l√† 14 cm v√† 6 cm. Chu vi h√¨nh thang l√† 40 cm. ƒê·ªô d√†i m·ªói c·∫°nh b√™n l√†:",
        options: [
          "8 cm",
          "7 cm",
          "10 cm",
          "12 cm"
        ],
        correct: 2 // C (14 + 6 + 2a = 40 ‚áí a = 10)
      },
      {
        id: 14,
        level: "V·∫≠n d·ª•ng",
        question: "Cho h√¨nh thang vu√¥ng ABCD (AB ‚à• CD). Bi·∫øt AB = 6 cm, CD = 10 cm, AD = 4 cm v√† AD ‚üÇ AB. ƒê·ªô d√†i c·∫°nh BC l√†:",
        options: [
          "4 cm",
          "2‚àö5 cm",
          "4‚àö2 cm",
          "8 cm"
        ],
        correct: 2 // C (BC¬≤ = (10‚àí6)¬≤ + 4¬≤ = 16+16 = 32 ‚áí BC = 4‚àö2)
      },

      // --- V·∫¨N D·ª§NG CAO (1 c√¢u) ---
      {
        id: 15,
        level: "V·∫≠n d·ª•ng cao",
        question: "Cho h√¨nh thang ABCD (AB ‚à• CD) v·ªõi AB = 6 cm, CD = 14 cm. G·ªçi M v√† N l·∫ßn l∆∞·ª£t l√† trung ƒëi·ªÉm c·ªßa hai c·∫°nh b√™n AD v√† BC. ƒê·ªô d√†i ƒëo·∫°n MN l√†:",
        options: [
          "5 cm",
          "7 cm",
          "10 cm",
          "12 cm"
        ],
        correct: 2 // C (MN = (AB + CD) / 2 = (6+14)/2 = 10)
      }
    ];

    // ================== √ÇM THANH ==================
    const playSound = (type) => {
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      if (!AudioContext) return;
      const ctx = new AudioContext();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      const now = ctx.currentTime;

      if (type === "correct") {
        osc.type = "sine";
        osc.frequency.setValueAtTime(440, now);
        osc.frequency.setValueAtTime(660, now + 0.1);
        osc.frequency.setValueAtTime(880, now + 0.2);
        gain.gain.setValueAtTime(0.12, now);
        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.5);
        osc.start(now);
        osc.stop(now + 0.5);
      } else if (type === "wrong") {
        osc.type = "square";
        osc.frequency.setValueAtTime(160, now);
        osc.frequency.linearRampToValueAtTime(80, now + 0.25);
        gain.gain.setValueAtTime(0.15, now);
        gain.gain.linearRampToValueAtTime(0, now + 0.25);
        osc.start(now);
        osc.stop(now + 0.25);
      }

      osc.connect(gain);
      gain.connect(ctx.destination);
    };

    // ================== CONFETTI ==================
    const Confetti = () => (
      <div className="absolute inset-0 pointer-events-none overflow-hidden z-40">
        {[...Array(30)].map((_, i) => (
          <div
            key={i}
            className="absolute w-2 h-2 rounded-full"
            style={{
              backgroundColor: ['#e5e7eb', '#22c55e', '#38bdf8', '#f97316'][i % 4],
              left: `${Math.random() * 100}%`,
              top: `-10px`,
              animation: `fall ${1 + Math.random() * 2}s linear forwards`,
              animationDelay: `${Math.random() * 0.5}s`
            }}
          />
        ))}
        <style>{`
          @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
          }
        `}</style>
      </div>
    );

    // ================== VIEW C·∫¶U TREO H√åNH THANG ==================
    const RopeBridgeView = ({ correctCount }) => {
      const totalBoards = 10; // s·ªë t·∫•m v√°n t·ªëi ƒëa
      const filledBoards = Math.min(totalBoards, Math.round((correctCount / questions.length) * totalBoards));

      return (
        <div className="w-full max-w-md mx-auto bg-slate-900/80 border border-emerald-400/60 rounded-2xl p-4 shadow-lg">
          <h3 className="text-sm font-semibold text-emerald-300 mb-2 flex items-center gap-2">
            <span>üåâ</span>
            <span>Ti·∫øn ƒë·ªô b·∫Øc C·∫ßu Treo H√¨nh Thang</span>
          </h3>

          <div className="relative h-40 sm:h-44 rounded-2xl overflow-hidden bg-gradient-to-b from-slate-900 via-slate-950 to-slate-900">
            {/* V√°ch ƒë√° hai b√™n */}
            <div className="absolute left-0 top-0 bottom-0 w-10 bg-gradient-to-r from-stone-700 to-stone-500" />
            <div className="absolute right-0 top-0 bottom-0 w-10 bg-gradient-to-l from-stone-700 to-stone-500" />

            {/* V·ª±c s√¢u */}
            <div className="absolute inset-x-10 bottom-0 h-24 bg-gradient-to-t from-slate-950 via-slate-900 to-slate-800" />

            {/* D√¢y treo tr√™n */}
            <div className="absolute left-10 right-10 top-10 h-1 bg-amber-500/80 rounded-full shadow" />
            {/* D√¢y treo d∆∞·ªõi */}
            <div className="absolute left-10 right-10 top-24 h-1 bg-amber-600/80 rounded-full shadow" />

            {/* C√°c d√¢y d·ªçc + v√°n h√¨nh thang */}
            {Array.from({ length: totalBoards }).map((_, i) => {
              const xPercent = (i + 0.5) * (80 / totalBoards) + 10; // trong kho·∫£ng 10% - 90%
              const isBuilt = i < filledBoards;
              return (
                <div key={i}>
                  {/* D√¢y d·ªçc */}
                  <div
                    className="absolute"
                    style={{
                      left: `${xPercent}%`,
                      top: "10px",
                      width: "2px",
                      height: "56px",
                      backgroundColor: isBuilt ? "#fbbf24" : "rgba(75,85,99,0.8)"
                    }}
                  />
                  {/* T·∫•m v√°n (v·∫Ω d·∫°ng h√¨nh thang) */}
                  <div
                    className={`absolute top-[72px] h-3 ${
                      isBuilt ? "bg-amber-400" : "bg-slate-700"
                    }`}
                    style={{
                      left: `${xPercent - 4}%`,
                      width: "8%",
                      borderRadius: "999px",
                      boxShadow: isBuilt ? "0 0 10px rgba(251,191,36,0.8)" : "none"
                    }}
                  />
                </div>
              );
            })}

            {/* Nh√¢n v·∫≠t ƒëi tr√™n c·∫ßu */}
            <div
              className="absolute top-[60px] transition-all duration-500"
              style={{
                left: `${10 + (filledBoards / totalBoards) * 80}%`,
                transform: "translateX(-50%)"
              }}
            >
              <div className="text-2xl drop-shadow-[0_0_8px_rgba(248,250,252,0.9)]">
                üßë‚Äçüéì
              </div>
            </div>
          </div>

          {/* Thanh ti·∫øn ƒë·ªô */}
          <div className="mt-3">
            <div className="flex justify-between text-[11px] text-slate-300 mb-1">
              <span>ƒê·ªô an to√†n c·ªßa c·∫ßu treo</span>
              <span>{Math.round((correctCount / questions.length) * 100)}%</span>
            </div>
            <div className="w-full h-2 rounded-full bg-slate-800 overflow-hidden">
              <div
                className="h-full bg-gradient-to-r from-emerald-400 via-sky-400 to-amber-300 transition-all duration-500"
                style={{ width: `${(correctCount / questions.length) * 100}%` }}
              />
            </div>
          </div>

          <p className="mt-2 text-[11px] text-slate-400">
            M·ªói c√¢u ƒë√∫ng s·∫Ω th√™m m·ªôt t·∫•m v√°n ch·∫Øc ch·∫Øn l√™n c·∫ßu treo h√¨nh thang, gi√∫p h·ªçc sinh bƒÉng qua v·ª±c s√¢u an to√†n.
          </p>
        </div>
      );
    };

    // ================== MAIN GAME COMPONENT ==================
    function TrapezoidBridgeGame() {
      const [gameState, setGameState] = useState("intro"); // intro, playing, end
      const [currentQ, setCurrentQ] = useState(0);
      const [score, setScore] = useState(0);
      const [feedback, setFeedback] = useState(null); // 'correct' | 'wrong' | null
      const [soundOn, setSoundOn] = useState(true);

      const correctCount = score / 10;

      const handleStart = () => {
        setGameState("playing");
        setCurrentQ(0);
        setScore(0);
        setFeedback(null);
      };

      const handleAnswer = (index) => {
        if (feedback) return;

        const isCorrect = index === questions[currentQ].correct;
        if (isCorrect) {
          setFeedback("correct");
          setScore((s) => s + 10);
          if (soundOn) playSound("correct");
        } else {
          setFeedback("wrong");
          if (soundOn) playSound("wrong");
        }

        setTimeout(() => {
          setFeedback(null);
          if (currentQ < questions.length - 1) {
            setCurrentQ((q) => q + 1);
          } else {
            setGameState("end");
          }
        }, 1800);
      };

      return (
        <div className="min-h-screen flex items-center justify-center bg-slate-950 text-white relative overflow-hidden">
          {/* BG sao & s∆∞∆°ng m√π */}
          <div className="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-950 to-emerald-950 opacity-90" />
          <div className="absolute inset-0 pointer-events-none opacity-30">
            {[...Array(40)].map((_, i) => (
              <div
                key={i}
                className="absolute w-1 h-1 rounded-full bg-sky-300"
                style={{
                  top: `${Math.random() * 100}%`,
                  left: `${Math.random() * 100}%`,
                  boxShadow: "0 0 8px rgba(56,189,248,0.8)"
                }}
              />
            ))}
          </div>

          {/* N√∫t √¢m thanh */}
          <button
            onClick={() => setSoundOn((v) => !v)}
            className="absolute top-4 right-4 z-20 px-3 py-2 text-xs sm:text-sm bg-white/10 hover:bg-white/20 rounded-full"
          >
            {soundOn ? "üîä √Çm thanh: B·∫¨T" : "üîá √Çm thanh: T·∫ÆT"}
          </button>

          {/* MAIN CARD */}
          <div className="relative z-10 w-full max-w-5xl mx-4 bg-slate-900/85 border border-emerald-400/60 rounded-3xl shadow-2xl overflow-hidden backdrop-blur-xl">
            {/* Header */}
            <header className="px-6 sm:px-10 py-4 border-b border-emerald-400/60 bg-gradient-to-r from-emerald-500/40 to-sky-400/30 flex items-center justify-between gap-3 flex-wrap">
              <div>
                <div className="text-xs uppercase tracking-wide text-emerald-200/80 mb-1">
                  Thu B√¨nh To√°n ‚Äì Game 11
                </div>
                <h1 className="text-xl sm:text-2xl font-bold flex items-center gap-2">
                  <span className="text-2xl">üåâ</span>
                  <span>C·∫ßu Treo H√¨nh Thang ‚Äì BƒÉng qua v·ª±c s√¢u</span>
                </h1>
                <p className="text-xs sm:text-sm text-slate-200/90">
                  To√°n 8 ‚Äì H√¨nh thang, h√¨nh thang c√¢n, h√¨nh thang vu√¥ng ¬∑ Tr·∫£ l·ªùi ƒë√∫ng ƒë·ªÉ b·∫Øc ƒë·ªß t·∫•m v√°n, gi√∫p h·ªçc sinh bƒÉng qua c·∫ßu treo an to√†n.
                </p>
              </div>
              <div className="flex flex-col items-end text-[11px] sm:text-xs text-emerald-100">
                <span>
                  C√¢u:{" "}
                  {gameState === "playing" ? currentQ + 1 : 0}/{questions.length}
                </span>
                <span>ƒêi·ªÉm: {score}</span>
              </div>
            </header>

            {/* BODY */}
            <main className="p-4 sm:p-6 md:p-8">
              {/* INTRO */}
              {gameState === "intro" && (
                <div className="flex flex-col items-center text-center gap-6 py-8">
                  <div className="relative">
                    <div className="absolute inset-0 bg-emerald-400 blur-3xl opacity-40 animate-pulse" />
                    <div className="relative w-32 h-32 sm:w-40 sm:h-40 rounded-full border border-emerald-400/60 flex items-center justify-center bg-slate-900/90 shadow-[0_0_40px_rgba(52,211,153,0.9)]">
                      <span className="text-5xl sm:text-6xl">üåâ</span>
                    </div>
                  </div>
                  <h2 className="text-3xl sm:text-4xl font-extrabold text-emerald-300 drop-shadow">
                    B·∫Øc C·∫ßu Treo H√¨nh Thang
                  </h2>
                  <p className="text-sm sm:text-base text-slate-200 max-w-xl">
                    M·ªói c√¢u tr·∫£ l·ªùi ƒë√∫ng s·∫Ω th√™m m·ªôt <strong>t·∫•m v√°n ch·∫Øc ch·∫Øn</strong> l√™n c·∫ßu treo h√¨nh thang.
                    Ho√†n th√†nh 15 c√¢u h·ªèi ƒë·ªÉ gi√∫p h·ªçc sinh <strong>v∆∞·ª£t qua v·ª±c s√¢u an to√†n</strong> nh√©!
                  </p>
                  <button
                    onClick={handleStart}
                    className="mt-2 px-8 py-3 rounded-full bg-emerald-400 hover:bg-emerald-300 text-slate-950 font-bold text-lg shadow-lg shadow-emerald-400/40 transform hover:-translate-y-0.5 active:translate-y-0 transition-all"
                  >
                    B·∫ÆT ƒê·∫¶U B·∫ÆC C·∫¶U üåâ
                  </button>
                </div>
              )}

              {/* PLAYING */}
              {gameState === "playing" && (
                <div className="flex flex-col md:flex-row gap-6">
                  {/* C·ªôt tr√°i: C·∫ßu treo */}
                  <div className="md:w-1/3 flex flex-col items-center gap-4">
                    <RopeBridgeView correctCount={correctCount} />
                    <div className="text-center text-[11px] text-slate-300 mt-2">
                      C√¢u ƒë√∫ng:{" "}
                      <span className="font-semibold text-emerald-300">
                        {correctCount}
                      </span>{" "}
                      / {questions.length}
                    </div>
                  </div>

                  {/* C·ªôt ph·∫£i: C√¢u h·ªèi */}
                  <div className="md:w-2/3 bg-slate-900/80 border border-slate-700 rounded-2xl p-4 sm:p-6 relative overflow-hidden">
                    <div className="absolute top-0 right-0 w-24 h-24 bg-emerald-500/10 rounded-bl-full pointer-events-none" />
                    <span className="absolute -top-3 -right-3 px-3 py-1 bg-emerald-600 text-xs font-bold rounded-full uppercase tracking-wider border border-emerald-300 shadow-lg">
                      {questions[currentQ].level}
                    </span>

                    <h3 className="text-lg sm:text-xl font-semibold mb-4 text-slate-50">
                      {questions[currentQ].question}
                    </h3>

                    <div className="grid grid-cols-1 gap-3 mt-2">
                      {questions[currentQ].options.map((opt, idx) => {
                        let base =
                          "w-full text-left px-4 py-3 rounded-xl border text-sm sm:text-base transition-all";
                        let style =
                          "border-slate-600 bg-slate-800/80 hover:bg-slate-700/80 text-slate-100";

                        if (feedback) {
                          if (idx === questions[currentQ].correct) {
                            style =
                              "border-emerald-400 bg-emerald-900/60 text-emerald-100 shadow-[0_0_18px_rgba(52,211,153,0.7)]";
                          } else if (feedback === "wrong") {
                            style =
                              "border-slate-700 bg-slate-900/70 text-slate-500 opacity-60";
                          }
                        }

                        return (
                          <button
                            key={idx}
                            disabled={!!feedback}
                            onClick={() => handleAnswer(idx)}
                            className={base + " " + style}
                          >
                            <span className="font-semibold mr-2">
                              {["A.", "B.", "C.", "D."][idx]}
                            </span>
                            {opt}
                          </button>
                        );
                      })}
                    </div>

                    {feedback === "wrong" && (
                      <div className="absolute inset-0 bg-black/40 flex items-center justify-center pointer-events-none">
                        <div className="px-4 py-2 rounded-full bg-red-600 text-white text-sm font-semibold shadow-lg">
                          Sai m·∫•t r·ªìi! M·ªôt t·∫•m v√°n b·ªã n·ª©t, th·ª≠ c·∫©n th·∫≠n h∆°n ·ªü c√¢u sau nh√© üò¢
                        </div>
                      </div>
                    )}
                    {feedback === "correct" && (
                      <>
                        <Confetti />
                        <div className="absolute inset-0 bg-black/30 flex items-center justify-center pointer-events-none">
                          <div className="px-4 py-2 rounded-full bg-emerald-400 text-slate-900 text-sm font-semibold shadow-lg">
                            Ch√≠nh x√°c! C·∫ßu treo v·ª´a ƒë∆∞·ª£c th√™m m·ªôt t·∫•m v√°n v·ªØng ch·∫Øc üåâ
                          </div>
                        </div>
                      </>
                    )}
                  </div>
                </div>
              )}

              {/* END */}
              {gameState === "end" && (
                <div className="flex flex-col items-center text-center gap-6 py-8">
                  <div className="relative">
                    <div className="absolute inset-0 bg-emerald-400 blur-3xl opacity-40 animate-pulse" />
                    <div className="relative w-32 h-32 sm:w-40 sm:h-40 rounded-full border border-emerald-400/60 flex items-center justify-center bg-slate-900/90 shadow-[0_0_40px_rgba(52,211,153,0.9)]">
                      <span className="text-5xl sm:text-6xl">‚úÖ</span>
                    </div>
                  </div>
                  <h2 className="text-3xl sm:text-4xl font-extrabold text-emerald-300 drop-shadow">
                    C·∫ßu Treo ƒê√£ Ho√†n Th√†nh!
                  </h2>
                  <p className="text-sm sm:text-base text-slate-200 max-w-xl">
                    B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng{" "}
                    <span className="font-bold text-emerald-300">
                      {correctCount}
                    </span>{" "}
                    / {questions.length} c√¢u.
                    H·ªçc sinh ƒë√£ bƒÉng qua v·ª±c s√¢u an to√†n nh·ªù ki·∫øn th·ª©c v·ªÅ h√¨nh thang, h√¨nh thang c√¢n v√† h√¨nh thang vu√¥ng! üåâ
                  </p>

                  <div className="flex flex-col sm:flex-row gap-4 justify-center text-sm sm:text-base">
                    <div className="px-4 py-3 rounded-2xl bg-slate-900/80 border border-slate-700 min-w-[140px]">
                      <div className="text-slate-300 text-xs uppercase mb-1">
                        T·ªïng ƒëi·ªÉm
                      </div>
                      <div className="text-2xl font-bold text-emerald-400">
                        {score}
                      </div>
                    </div>
                    <div className="px-4 py-3 rounded-2xl bg-slate-900/80 border border-slate-700 min-w-[140px]">
                      <div className="text-slate-300 text-xs uppercase mb-1">
                        Danh hi·ªáu
                      </div>
                      <div className="text-lg font-bold text-emerald-300">
                        {score >= 130
                          ? "B·∫≠c Th·∫ßy C·∫ßu Treo"
                          : score >= 100
                          ? "Ki·∫øn Tr√∫c S∆∞ H√¨nh Thang"
                          : "Th·ª£ X√¢y C·∫ßu D≈©ng C·∫£m"}
                      </div>
                    </div>
                  </div>

                  <button
                    onClick={() => {
                      setGameState("intro");
                      setCurrentQ(0);
                      setScore(0);
                      setFeedback(null);
                    }}
                    className="mt-2 px-8 py-3 rounded-full bg-emerald-400 hover:bg-emerald-300 text-slate-950 font-bold text-lg shadow-lg shadow-emerald-400/40 transform hover:-translate-y-0.5 active:translate-y-0 transition-all"
                  >
                    CH∆†I L·∫†I T·ª™ ƒê·∫¶U üîÅ
                  </button>
                </div>
              )}
            </main>

            <footer className="px-6 sm:px-10 py-3 text-[11px] text-slate-400 border-t border-slate-800 bg-slate-950/80 text-center">
              To√°n 8 ‚Äì H√¨nh thang, h√¨nh thang c√¢n, h√¨nh thang vu√¥ng ‚Äì C·∫ßu Treo H√¨nh Thang ‚Äì Thu B√¨nh To√°n üíö
            </footer>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<TrapezoidBridgeGame />);
  </script>
</body>
</html>
