<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>H√†nh Tr√¨nh Chinh Ph·ª•c H·ªçc K√¨ I ‚Äì To√°n 8</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    color: #fff;
    margin: 0;
    padding: 0;
    text-align: center;
}

.container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
}

h1 {
    margin-bottom: 10px;
}

.quiz-box {
    background: rgba(0,0,0,0.35);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

.question {
    font-size: 1.2em;
    margin-bottom: 15px;
}

.options button {
    display: block;
    width: 100%;
    margin: 8px 0;
    padding: 12px;
    font-size: 1em;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    background: #ffffff;
    color: #000;
    transition: 0.3s;
}

.options button:hover {
    background: #ffd166;
}

.correct {
    background: #06d6a0 !important;
    color: #000;
}

.wrong {
    background: #ef476f !important;
}

.rationale {
    margin-top: 15px;
    font-style: italic;
    color: #ffd166;
}

#score {
    margin-top: 15px;
    font-weight: bold;
}

.confetti {
    font-size: 2em;
    animation: float 1s ease-in-out infinite alternate;
}

@keyframes float {
    from { transform: translateY(0); }
    to { transform: translateY(-10px); }
}

.next-btn {
    margin-top: 15px;
    padding: 10px 20px;
    font-size: 1em;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #ffd166;
    color: #000;
}
</style>
</head>

<body>
<div class="container">
    <h1>üéØ H√ÄNH TR√åNH CHINH PH·ª§C H·ªåC K√å I ‚Äì TO√ÅN 8</h1>
    <p>Immersive Quiz ‚Äì Th·ª≠ th√°ch t·ªïng h·ª£p cu·ªëi k√¨</p>

    <div class="quiz-box">
        <div id="question" class="question"></div>
        <div class="options" id="options"></div>
        <div id="feedback"></div>
        <div id="rationale" class="rationale"></div>
        <button class="next-btn" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚ñ∂</button>
        <div id="score"></div>
    </div>
<div style="margin-bottom:15px;">
    <input id="playerName" placeholder="Nh·∫≠p t√™n ng∆∞·ªùi ch∆°i"
           style="padding:10px;border-radius:8px;border:none;width:70%;font-size:1em;">
</div>
</div>

<!-- √ÇM THANH -->
<audio id="correctSound">
    <source src="data:audio/wav;base64,UklGRlIAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=">
</audio>
<script>
let startTime = Date.now();

// ================= DATA C√ÇU H·ªéI =================
let questions = [
{
q: "B·∫≠c c·ªßa ƒëa th·ª©c x¬≤ + 3x¬≥ ‚àí 5 l√†:",
options: ["2", "3", "1", "5"],
answer: "3",
rationale: "B·∫≠c c·ªßa ƒëa th·ª©c l√† s·ªë m≈© l·ªõn nh·∫•t c·ªßa bi·∫øn, ·ªü ƒë√¢y l√† 3."
},
{
q: "ƒêi·ªÅu ki·ªán x√°c ƒë·ªãnh c·ªßa ph√¢n th·ª©c 1/(x‚àí2) l√†:",
options: ["x ‚â† 2", "x = 2", "x ‚â• 2", "x ‚â§ 2"],
answer: "x ‚â† 2",
rationale: "Ph√¢n th·ª©c x√°c ƒë·ªãnh khi m·∫´u kh√°c 0 n√™n x‚àí2 ‚â† 0."
},
{
q: "ƒêa th·ª©c x¬≤ ‚àí 4 vi·∫øt d∆∞·ªõi d·∫°ng t√≠ch l√†:",
options: ["(x‚àí2)(x+2)", "(x‚àí4)(x+1)", "x(x‚àí4)", "(x‚àí2)¬≤"],
answer: "(x‚àí2)(x+2)",
rationale: "√Åp d·ª•ng h·∫±ng ƒë·∫≥ng th·ª©c hi·ªáu hai b√¨nh ph∆∞∆°ng."
},
{
q: "Ph√¢n th·ª©c 2x/4x r√∫t g·ªçn ƒë∆∞·ª£c l√†:",
options: ["1/2", "2", "x", "4"],
answer: "1/2",
rationale: "Chia c·∫£ t·ª≠ v√† m·∫´u cho 2x (x‚â†0)."
},
{
q: "T√≠ch c·ªßa hai ƒë∆°n th·ª©c 3x¬≤ v√† ‚àí2x l√†:",
options: ["‚àí6x¬≥", "‚àí6x¬≤", "6x¬≥", "‚àí5x¬≥"],
answer: "‚àí6x¬≥",
rationale: "Nh√¢n h·ªá s·ªë v√† c·ªông s·ªë m≈© c·ªßa x."
},
{
q: "Ph√¢n th·ª©c ƒë·ªëi c·ªßa 5/(x+2) l√†:",
options: ["‚àí5/(x+2)", "5/(x‚àí2)", "‚àí5/(x‚àí2)", "1/(x+2)"],
answer: "‚àí5/(x+2)",
rationale: "Ph√¢n th·ª©c ƒë·ªëi l√† ph√¢n th·ª©c c√≥ gi√° tr·ªã ƒë·ªëi nhau."
},
{
q: "B·∫≠c c·ªßa ƒëa th·ª©c 2x‚Å¥ ‚àí x¬≤ + 1 l√†:",
options: ["4", "2", "6", "1"],
answer: "4",
rationale: "B·∫≠c cao nh·∫•t c·ªßa bi·∫øn l√† 4."
},
{
q: "K·∫øt qu·∫£ c·ªßa (4x + y)(4x ‚àí y) l√†:",
options: ["16x¬≤ ‚àí y¬≤", "4x¬≤ ‚àí y¬≤", "16x¬≤ + y¬≤", "4x¬≤ + y¬≤"],
answer: "16x¬≤ ‚àí y¬≤",
rationale: "√Åp d·ª•ng (a+b)(a‚àíb)=a¬≤‚àíb¬≤."
},
{
q: "Gi√° tr·ªã kh√¥ng h·ª£p l√≠ trong d√£y 33; 54; a; 48 l√†:",
options: ["33", "54", "a", "48"],
answer: "a",
rationale: "D·ªØ li·ªáu ph·∫£i l√† s·ªë c·ª• th·ªÉ."
},
{
q: "Th√°ng c√≥ l∆∞·ª£ng m∆∞a √≠t nh·∫•t trong b·∫£ng l√†:",
options: ["Th√°ng 8", "Th√°ng 9", "Th√°ng 10", "Th√°ng 11"],
answer: "Th√°ng 11",
rationale: "Th√°ng 11 c√≥ l∆∞·ª£ng m∆∞a nh·ªè nh·∫•t."
},
{
q: "Bi·ªÉu ƒë·ªì th√≠ch h·ª£p bi·ªÉu di·ªÖn t·ªâ l·ªá ph·∫ßn trƒÉm l√†:",
options: ["Bi·ªÉu ƒë·ªì qu·∫°t tr√≤n", "Bi·ªÉu ƒë·ªì c·ªôt", "Bi·ªÉu ƒë·ªì ƒëo·∫°n th·∫≥ng", "Bi·ªÉu ƒë·ªì tranh"],
answer: "Bi·ªÉu ƒë·ªì qu·∫°t tr√≤n",
rationale: "Bi·ªÉu ƒë·ªì qu·∫°t tr√≤n th·ªÉ hi·ªán c∆° c·∫•u, t·ªâ l·ªá."
},
{
q: "Quan s√°t h·ªçc sinh ƒëi xe ƒëi·ªán l√† ph∆∞∆°ng ph√°p thu th·∫≠p d·ªØ li·ªáu:",
options: ["Quan s√°t", "Ph·ªèng v·∫•n", "L·∫≠p b·∫£ng h·ªèi", "Ngu·ªìn c√≥ s·∫µn"],
answer: "Quan s√°t",
rationale: "Ghi nh·∫≠n tr·ª±c ti·∫øp b·∫±ng m·∫Øt."
},
{
q: "H√¨nh b√¨nh h√†nh c√≥ m·ªôt g√≥c vu√¥ng l√†:",
options: ["H√¨nh ch·ªØ nh·∫≠t", "H√¨nh thoi", "H√¨nh vu√¥ng", "H√¨nh thang"],
answer: "H√¨nh ch·ªØ nh·∫≠t",
rationale: "ƒê·∫∑c ƒëi·ªÉm nh·∫≠n d·∫°ng h√¨nh ch·ªØ nh·∫≠t."
},
{
q: "H√¨nh thang c√¢n l√† h√¨nh thang c√≥:",
options: ["Hai g√≥c k·ªÅ m·ªôt ƒë√°y b·∫±ng nhau", "Hai c·∫°nh b√™n song song", "Hai ƒë√°y b·∫±ng nhau", "Hai g√≥c k·ªÅ m·ªôt c·∫°nh b√™n"],
answer: "Hai g√≥c k·ªÅ m·ªôt ƒë√°y b·∫±ng nhau",
rationale: "ƒê·ªãnh nghƒ©a h√¨nh thang c√¢n."
},
{
q: "T·ª© gi√°c v·ª´a l√† h√¨nh ch·ªØ nh·∫≠t v·ª´a l√† h√¨nh thoi l√†:",
options: ["H√¨nh vu√¥ng", "H√¨nh b√¨nh h√†nh", "H√¨nh thang c√¢n", "H√¨nh ch·ªØ nh·∫≠t"],
answer: "H√¨nh vu√¥ng",
rationale: "H√¨nh vu√¥ng th·ªèa m√£n c·∫£ hai t√≠nh ch·∫•t."
},
{
q: "Ph√°t bi·ªÉu ƒë√∫ng v·ªÅ h√¨nh ch·ªØ nh·∫≠t l√†:",
options: [
"Hai c·∫∑p c·∫°nh ƒë·ªëi song song v√† b·∫±ng nhau",
"B·ªën c·∫°nh b·∫±ng nhau",
"Hai ƒë∆∞·ªùng ch√©o vu√¥ng g√≥c",
"Hai ƒë∆∞·ªùng ch√©o kh√¥ng b·∫±ng nhau"
],
answer: "Hai c·∫∑p c·∫°nh ƒë·ªëi song song v√† b·∫±ng nhau",
rationale: "T√≠nh ch·∫•t c∆° b·∫£n c·ªßa h√¨nh ch·ªØ nh·∫≠t."
},
{
q: "ƒêi·ªÅu ki·ªán ƒë·ªÉ h√¨nh b√¨nh h√†nh tr·ªü th√†nh h√¨nh thoi l√†:",
options: ["Hai c·∫°nh k·ªÅ b·∫±ng nhau", "Hai c·∫°nh ƒë·ªëi song song", "Hai ƒë∆∞·ªùng ch√©o b·∫±ng nhau", "C√≥ m·ªôt g√≥c vu√¥ng"],
answer: "Hai c·∫°nh k·ªÅ b·∫±ng nhau",
rationale: "ƒê·∫∑c tr∆∞ng c·ªßa h√¨nh thoi."
},
{
q: "Gi√° tr·ªã kh√¥ng h·ª£p l√≠ trong d√£y 33; 54; 140; 48 l√†:",
options: ["140", "33", "54", "48"],
answer: "140",
rationale: "C√¢n n·∫∑ng 140kg l√† kh√¥ng h·ª£p l√≠."
},
{
q: "Nh√≥m h√¨nh c√≥ hai ƒë∆∞·ªùng ch√©o b·∫±ng nhau l√†:",
options: [
"H√¨nh ch·ªØ nh·∫≠t, h√¨nh thang c√¢n, h√¨nh vu√¥ng",
"H√¨nh thoi, h√¨nh b√¨nh h√†nh",
"H√¨nh thang, h√¨nh thoi",
"H√¨nh b√¨nh h√†nh, h√¨nh vu√¥ng"
],
answer: "H√¨nh ch·ªØ nh·∫≠t, h√¨nh thang c√¢n, h√¨nh vu√¥ng",
rationale: "C√°c h√¨nh n√†y c√≥ t√≠nh ch·∫•t ƒë∆∞·ªùng ch√©o b·∫±ng nhau."
},
{
q: "Chi·ªÅu cao h√¨nh ch√≥p tam gi√°c ƒë·ªÅu l√†:",
options: [
"ƒêo·∫°n n·ªëi t·ª´ ƒë·ªânh t·ªõi tr·ªçng t√¢m ƒë√°y",
"ƒê∆∞·ªùng cao m·∫∑t b√™n",
"ƒê∆∞·ªùng trung tuy·∫øn ƒë√°y",
"ƒêo·∫°n n·ªëi t·ªõi trung ƒëi·ªÉm c·∫°nh ƒë√°y"
],
answer: "ƒêo·∫°n n·ªëi t·ª´ ƒë·ªânh t·ªõi tr·ªçng t√¢m ƒë√°y",
rationale: "ƒê·ªãnh nghƒ©a chi·ªÅu cao h√¨nh ch√≥p ƒë·ªÅu."
},
{
q: "Bi·ªÉu ƒë·ªì th·ªÉ hi·ªán s·ª± thay ƒë·ªïi theo th·ªùi gian l√†:",
options: ["Bi·ªÉu ƒë·ªì ƒëo·∫°n th·∫≥ng", "Bi·ªÉu ƒë·ªì qu·∫°t", "Bi·ªÉu ƒë·ªì tranh", "Bi·ªÉu ƒë·ªì c·ªôt tr√≤n"],
answer: "Bi·ªÉu ƒë·ªì ƒëo·∫°n th·∫≥ng",
rationale: "Ph√π h·ª£p cho d·ªØ li·ªáu theo th·ªùi gian."
},
{
q: "D·ªØ li·ªáu ƒë·ªãnh t√≠nh c√≥ th·ªÉ so s√°nh l√†:",
options: ["T√™n lo·∫°i b√∫t", "C√¢n n·∫∑ng", "Chi·ªÅu cao", "S·ªë l∆∞·ª£ng"],
answer: "T√™n lo·∫°i b√∫t",
rationale: "D·ªØ li·ªáu ph√¢n lo·∫°i, kh√¥ng ph·∫£i s·ªë."
},
{
q: "D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng c√≥ th·ªÉ l·∫≠p t·ªâ s·ªë l√†:",
options: ["C√¢n n·∫∑ng", "M√†u s·∫Øc", "T√™n g·ªçi", "Lo·∫°i h√¨nh"],
answer: "C√¢n n·∫∑ng",
rationale: "D·ªØ li·ªáu s·ªë ƒëo."
}
];

// ================= RANDOM =================
questions.sort(() => Math.random() - 0.5);

let index = 0;
let score = 0;

// ================= LOAD =================
function loadQuestion() {
  let q = questions[index];
  document.getElementById("question").innerHTML = "C√¢u " + (index + 1) + ": " + q.q;

  let optionsEl = document.getElementById("options");
  optionsEl.innerHTML = "";

  let shuffled = [...q.options].sort(() => Math.random() - 0.5);
  shuffled.forEach(opt => {
    let btn = document.createElement("button");
    btn.innerText = opt;
    btn.onclick = () => checkAnswer(btn, opt);
    optionsEl.appendChild(btn);
  });

  document.getElementById("feedback").innerHTML = "";
  document.getElementById("rationale").innerHTML = "";
}

// ================= CHECK =================
function checkAnswer(btn, choice) {
  let q = questions[index];
  document.querySelectorAll(".options button").forEach(b => b.disabled = true);

  if (choice === q.answer) {
    btn.classList.add("correct");
    document.getElementById("feedback").innerHTML =
      "<div class='confetti'>üéâüéäüòäüå∏</div><strong>Ch√≠nh x√°c!</strong>";
    document.getElementById("correctSound").play();
    score++;
  } else {
    btn.classList.add("wrong");
    document.getElementById("feedback").innerHTML =
      "‚ùå Ch∆∞a ƒë√∫ng! ƒê√°p √°n ƒë√∫ng l√†: <strong>" + q.answer + "</strong>";
  }

  document.getElementById("rationale").innerText = "Gi·∫£i th√≠ch: " + q.rationale;
  document.getElementById("score").innerText =
    "ƒêi·ªÉm: " + score + " / " + questions.length;
}

// ================= NEXT =================
function nextQuestion() {
  index++;
  if (index < questions.length) {
    loadQuestion();
  } else {
    let endTime = Math.floor((Date.now() - startTime) / 1000);
    let name = document.getElementById("playerName").value || "Kh√¥ng t√™n";

    let leaderboard = JSON.parse(localStorage.getItem("toan8_ck1_rank")) || [];
    leaderboard.push({ name, score, time: endTime, date: new Date().toLocaleDateString() });

    leaderboard.sort((a, b) => b.score - a.score || a.time - b.time);
    leaderboard = leaderboard.slice(0, 10);
    localStorage.setItem("toan8_ck1_rank", JSON.stringify(leaderboard));

    let html = "<h2>üèÜ B·∫¢NG X·∫æP H·∫†NG</h2><table style='width:100%;color:white'>";
    leaderboard.forEach((p, i) => {
      html += `<tr><td>${i + 1}</td><td>${p.name}</td><td>${p.score}</td><td>${p.time}s</td></tr>`;
    });
    html += "</table>";

    document.querySelector(".quiz-box").innerHTML = html;
  }
}

loadQuestion();
</script>
</body>
</html>
