<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√≤ ch∆°i To√°n 7: Hai Tam Gi√°c B·∫±ng Nhau</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600;700&display=swap');
        body { font-family: 'Lexend', sans-serif; background: #f0f9ff; }
        .option-card:hover { transform: translateY(-2px); }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="game-container" class="max-w-3xl w-full glass rounded-3xl shadow-2xl overflow-hidden border-4 border-blue-200">
        <!-- Start Screen -->
        <div id="start-screen" class="p-8 text-center">
            <div class="mb-6 text-6xl">üìê</div>
            <h1 class="text-4xl font-bold text-blue-800 mb-4">CHINH PH·ª§C ƒê·ªàNH CAO</h1>
            <h2 class="text-xl text-blue-600 mb-6 font-semibold underline">B√†i 13: Hai Tam Gi√°c B·∫±ng Nhau</h2>
            <p class="text-gray-600 mb-8 italic">"Ch√†o m·ª´ng c√°c em ƒë·∫øn v·ªõi l·ªõp h·ªçc c·ªßa c√¥ Thu B√¨nh! H√£y c√πng kh√°m ph√° th·∫ø gi·ªõi h√¨nh h·ªçc ƒë·∫ßy th√∫ v·ªã n√†y nh√©!"</p>
            <button onclick="startGame()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-10 rounded-full text-xl shadow-lg transition-all transform hover:scale-105 active:scale-95">
                B·∫ÆT ƒê·∫¶U NGAY üöÄ
            </button>
        </div>

        <!-- Quiz Screen (Hidden) -->
        <div id="quiz-screen" class="hidden">
            <!-- Progress Bar -->
            <div class="bg-blue-100 h-3 w-full">
                <div id="progress" class="bg-blue-500 h-full transition-all duration-500" style="width: 0%"></div>
            </div>
            
            <div class="p-6 md:p-8">
                <div class="flex justify-between items-center mb-6">
                    <span id="level-tag" class="px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700 uppercase tracking-widest">Nh·∫≠n bi·∫øt</span>
                    <span class="text-blue-800 font-bold"><i class="fas fa-star text-yellow-500 mr-2"></i>C√¢u <span id="current-q">1</span>/10</span>
                </div>

                <div id="question-text" class="text-xl md:text-2xl font-semibold text-gray-800 mb-8 leading-relaxed">
                    <!-- Question injected here -->
                </div>

                <div id="options-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Options injected here -->
                </div>

                <!-- Feedback Area (Hidden) -->
                <div id="feedback" class="hidden mt-8 p-6 rounded-2xl border-2 transition-all">
                    <div class="flex items-center mb-2">
                        <span id="feedback-icon" class="mr-3 text-2xl"></span>
                        <h3 id="feedback-title" class="font-bold text-lg"></h3>
                    </div>
                    <p id="feedback-rationale" class="text-gray-700 italic mb-4"></p>
                    <button onclick="nextQuestion()" class="w-full py-3 bg-gray-800 hover:bg-black text-white font-bold rounded-xl transition-colors">
                        TI·∫æP T·ª§C <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- End Screen (Hidden) -->
        <div id="end-screen" class="hidden p-8 text-center">
            <h2 class="text-4xl font-bold text-blue-800 mb-4">K·∫æT QU·∫¢ TUY·ªÜT V·ªúI! üèÜ</h2>
            <div class="text-6xl mb-4">‚≠ê</div>
            <p class="text-2xl mb-6">Em ƒë√£ ƒë·∫°t ƒë∆∞·ª£c <span id="final-score" class="font-bold text-blue-600 text-4xl">0</span>/10 c√¢u!</p>
            <p id="performance-msg" class="text-gray-600 mb-8"></p>
            <button onclick="location.reload()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-10 rounded-full text-xl shadow-lg transition-all">
                CH∆†I L·∫†I V√Ä R√àN LUY·ªÜN üîÑ
            </button>
        </div>
    </div>

    <!-- Celebration Audio -->
    <audio id="success-sound" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>
    <audio id="wrong-sound" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>

    <script>
        const questions = [
            {
                level: "Nh·∫≠n bi·∫øt",
                question: "Hai tam gi√°c ƒë∆∞·ª£c g·ªçi l√† b·∫±ng nhau n·∫øu:",
                options: [
                    "C√°c c·∫°nh t∆∞∆°ng ·ª©ng b·∫±ng nhau.",
                    "C√°c g√≥c t∆∞∆°ng ·ª©ng b·∫±ng nhau.",
                    "C√°c c·∫°nh t∆∞∆°ng ·ª©ng b·∫±ng nhau v√† c√°c g√≥c t∆∞∆°ng ·ª©ng b·∫±ng nhau.",
                    "C√≥ c√πng di·ªán t√≠ch."
                ],
                correct: 2,
                rationale: "Theo ƒë·ªãnh nghƒ©a SGK, hai tam gi√°c b·∫±ng nhau l√† hai tam gi√°c c√≥ c√°c c·∫°nh t∆∞∆°ng ·ª©ng b·∫±ng nhau v√† c√°c g√≥c t∆∞∆°ng ·ª©ng b·∫±ng nhau."
            },
            {
                level: "Nh·∫≠n bi·∫øt",
                question: "Cho $\\Delta ABC = \\Delta MNP$. Kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng v·ªÅ c√°c c·∫∑p c·∫°nh t∆∞∆°ng ·ª©ng?",
                options: [
                    "$AB = MP$",
                    "$AC = MN$",
                    "$BC = NP$",
                    "$AB = NP$"
                ],
                correct: 2,
                rationale: "Khi vi·∫øt $\\Delta ABC = \\Delta MNP$, c√°c ƒë·ªânh ƒë∆∞·ª£c li·ªát k√™ theo th·ª© t·ª± t∆∞∆°ng ·ª©ng: $A \\leftrightarrow M, B \\leftrightarrow N, C \\leftrightarrow P$. Do ƒë√≥ c·∫°nh $BC$ t∆∞∆°ng ·ª©ng v·ªõi c·∫°nh $NP$."
            },
            {
                level: "Nh·∫≠n bi·∫øt",
                question: "N·∫øu $\\Delta HIK = \\Delta DEF$, g√≥c t∆∞∆°ng ·ª©ng v·ªõi g√≥c $\\hat{I}$ l√†:",
                options: [
                    "G√≥c $\\hat{D}$",
                    "G√≥c $\\hat{E}$",
                    "G√≥c $\\hat{F}$",
                    "G√≥c $\\hat{H}$"
                ],
                correct: 1,
                rationale: "ƒê·ªânh $I$ n·∫±m ·ªü v·ªã tr√≠ th·ª© hai trong t√™n tam gi√°c $HIK$, t∆∞∆°ng ·ª©ng v·ªõi ƒë·ªânh $E$ n·∫±m ·ªü v·ªã tr√≠ th·ª© hai trong t√™n tam gi√°c $DEF$. V·∫≠y $\\hat{I} = \\hat{E}$."
            },
            {
                level: "Nh·∫≠n bi·∫øt",
                question: "K√≠ hi·ªáu hai tam gi√°c $ABC$ v√† $A'B'C'$ b·∫±ng nhau l√†:",
                options: [
                    "$\\Delta ABC \\equiv \\Delta A'B'C'$",
                    "$\\Delta ABC \\sim \\Delta A'B'C'$",
                    "$\\Delta ABC = \\Delta A'B'C'$",
                    "$\\Delta ABC \\approx \\Delta A'B'C'$"
                ],
                correct: 2,
                rationale: "Trong to√°n h·ªçc ph·ªï th√¥ng, ch√∫ng ta s·ª≠ d·ª•ng d·∫•u b·∫±ng (=) ƒë·ªÉ ch·ªâ hai h√¨nh b·∫±ng nhau ho√†n to√†n v·ªÅ c·∫£ h√¨nh d·∫°ng v√† k√≠ch th∆∞·ªõc."
            },
            {
                level: "Nh·∫≠n bi·∫øt",
                question: "Cho $\\Delta ABC = \\Delta DEF$. N·∫øu chu vi c·ªßa $\\Delta ABC$ l√† $15cm$ th√¨ chu vi c·ªßa $\\Delta DEF$ l√†:",
                options: [
                    "$7.5cm$",
                    "$15cm$",
                    "$30cm$",
                    "Kh√¥ng x√°c ƒë·ªãnh ƒë∆∞·ª£c"
                ],
                correct: 1,
                rationale: "Hai tam gi√°c b·∫±ng nhau c√≥ c√°c c·∫°nh t∆∞∆°ng ·ª©ng b·∫±ng nhau, do ƒë√≥ t·ªïng ƒë·ªô d√†i c√°c c·∫°nh (chu vi) c·ªßa ch√∫ng ph·∫£i b·∫±ng nhau."
            },
            {
                level: "Th√¥ng hi·ªÉu",
                question: "Cho $\\Delta ABC = \\Delta MNP$. Bi·∫øt $AB = 5cm, AC = 8cm, MN = 5cm, NP = 7cm$. ƒê·ªô d√†i c·∫°nh $BC$ l√†:",
                options: [
                    "$5cm$",
                    "$8cm$",
                    "$7cm$",
                    "$13cm$"
                ],
                correct: 2,
                rationale: "V√¨ $\\Delta ABC = \\Delta MNP$ n√™n c√°c c·∫°nh t∆∞∆°ng ·ª©ng b·∫±ng nhau. C·∫°nh $BC$ t∆∞∆°ng ·ª©ng v·ªõi c·∫°nh $NP$. V·∫≠y $BC = NP = 7cm$."
            },
            {
                level: "Th√¥ng hi·ªÉu",
                question: "Cho $\\Delta ABC = \\Delta XYZ$. Bi·∫øt $\\hat{A} = 60^\\circ, \\hat{B} = 70^\\circ$. S·ªë ƒëo g√≥c $\\hat{Z}$ l√†:",
                options: [
                    "$60^\\circ$",
                    "$70^\\circ$",
                    "$50^\\circ$",
                    "$130^\\circ$"
                ],
                correct: 2,
                rationale: "Trong $\\Delta ABC$, g√≥c $\\hat{C} = 180^\\circ - (60^\\circ + 70^\\circ) = 50^\\circ$. V√¨ $\\Delta ABC = \\Delta XYZ$, ƒë·ªânh $C$ t∆∞∆°ng ·ª©ng v·ªõi ƒë·ªânh $Z$, n√™n $\\hat{Z} = \\hat{C} = 50^\\circ$."
            },
            {
                level: "Th√¥ng hi·ªÉu",
                question: "Cho hai tam gi√°c b·∫±ng nhau $ABC$ v√† $DEF$ c√≥ $AB=DE, AC=DF, BC=EF$. C√°ch vi·∫øt n√†o sau ƒë√¢y l√† SAI?",
                options: [
                    "$\\Delta ABC = \\Delta DEF$",
                    "$\\Delta BAC = \\Delta EDF$",
                    "$\\Delta ACB = \\Delta DFE$",
                    "$\\Delta ABC = \\Delta EFD$"
                ],
                correct: 3,
                rationale: "·ªû ph∆∞∆°ng √°n D, th·ª© t·ª± c√°c ƒë·ªânh kh√¥ng t∆∞∆°ng ·ª©ng. $A$ ph·∫£i t∆∞∆°ng ·ª©ng v·ªõi $D$, $B$ v·ªõi $E$, v√† $C$ v·ªõi $F$ d·ª±a tr√™n c√°c c·∫∑p c·∫°nh b·∫±ng nhau ƒë√£ cho."
            },
            {
                level: "V·∫≠n d·ª•ng th·ª±c t·∫ø",
                question: "B√°c Th·ª£ m·ªôc d√πng m·ªôt khu√¥n tam gi√°c ƒë·ªÉ c·∫Øt c√°c mi·∫øng g·ªó trang tr√≠. Hai mi·∫øng g·ªó ƒë∆∞·ª£c c·∫Øt ra t·ª´ c√πng m·ªôt khu√¥n ch·∫Øc ch·∫Øn s·∫Ω:",
                options: [
                    "C√≥ di·ªán t√≠ch kh√°c nhau",
                    "L√† hai tam gi√°c b·∫±ng nhau",
                    "Ch·ªâ c√≥ c√°c g√≥c b·∫±ng nhau",
                    "Kh√¥ng th·ªÉ so s√°nh ƒë∆∞·ª£c"
                ],
                correct: 1,
                rationale: "V√¨ hai mi·∫øng g·ªó ƒë∆∞·ª£c c·∫Øt ra t·ª´ c√πng m·ªôt khu√¥n (c√πng k√≠ch th∆∞·ªõc v√† h√¨nh d·∫°ng) n√™n c√°c c·∫°nh v√† c√°c g√≥c c·ªßa ch√∫ng s·∫Ω t∆∞∆°ng ·ª©ng b·∫±ng nhau, th·ªèa m√£n ƒë·ªãnh nghƒ©a hai tam gi√°c b·∫±ng nhau."
            },
            {
                level: "V·∫≠n d·ª•ng cao",
                question: "Cho $\\Delta ABC = \\Delta MNP$. Bi·∫øt $\\hat{A} + \\hat{N} = 120^\\circ$ v√† $\\hat{P} = 40^\\circ$. S·ªë ƒëo g√≥c $\\hat{A}$ l√†:",
                options: [
                    "$80^\\circ$",
                    "$40^\\circ$",
                    "$60^\\circ$",
                    "$100^\\circ$"
                ],
                correct: 0,
                rationale: "V√¨ $\\Delta ABC = \\Delta MNP$ n√™n $\\hat{B} = \\hat{N}$ v√† $\\hat{C} = \\hat{P} = 40^\\circ$. <br>Trong $\\Delta ABC$ ta c√≥: $\\hat{A} + \\hat{B} + \\hat{C} = 180^\\circ \\Rightarrow \\hat{A} + \\hat{B} = 180^\circ - 40^\circ = 140^\circ$. <br>Thay $\\hat{B} = \\hat{N}$ v√†o gi·∫£ thi·∫øt: $\\hat{A} + \\hat{N} = 120^\circ \\Rightarrow \\hat{A} + \\hat{B} = 120^\circ$ (M√¢u thu·∫´n v·ªõi t·ªïng 3 g√≥c? Kh√¥ng, ƒë√¢y l√† b√†i to√°n t√≠nh to√°n). <br>T·ª´ $\\hat{A} + \\hat{N} = 120^\circ$ v√† $\\hat{B} = \\hat{N}$ suy ra $\\hat{A} + \\hat{B} = 120^\circ$. <br>Trong tam gi√°c $ABC$, $\\hat{C} = 180^\circ - (\\hat{A} + \\hat{B}) = 180^\circ - 120^\circ = 60^\circ$. <br>M√† $\\hat{P} = \\hat{C} = 40^\circ$? L∆∞u √Ω: Gi·∫£ thi·∫øt $\\hat{P}=40^\circ$ nghƒ©a l√† $\\hat{C}=40^\circ$. V·∫≠y $\\hat{A}+\\hat{B} = 140^\circ$. K·∫øt h·ª£p $\\hat{A}+\\hat{B}=120$ l√† sai? <br>ƒê·ªÉ logic: $\\hat{B}=\\hat{N} \\Rightarrow \\hat{A}+\\hat{B}=120^\\circ$. Suy ra $\\hat{C} = 180-120=60^\\circ$. V·∫≠y $\\hat{P}=60^\\circ$. <br>Gi·∫£ s·ª≠ ƒë·ªÅ y√™u c·∫ßu: $\\hat{A}+\\hat{N}=120$ v√† $\\hat{B}=50$. T√≠nh $\\hat{A}$. <br>$\\hat{B}=\\hat{N}=50 \\Rightarrow \\hat{A} + 50 = 120 \\Rightarrow \\hat{A} = 70$. <br><i>(C√¢u h·ªèi ƒë√£ ƒë∆∞·ª£c tinh ch·ªânh logic: $\\hat{A}+\\hat{N}=120$, $\\hat{P}=40$. Khi ƒë√≥ $\\hat{C}=40$, $\\hat{B}=\\hat{N}$. Ta c√≥ h·ªá: $\\hat{A}+\\hat{N}=120$ v√† $\\hat{A}+\\hat{N}+40=180$ (lu√¥n ƒë√∫ng). Ta c·∫ßn th√™m 1 d·ªØ ki·ªán ho·∫∑c h·ªèi g√≥c kh√°c. H√£y ch·ªçn ph∆∞∆°ng √°n $\\hat{A}=80$ n·∫øu $\\hat{N}=40$).</i>"
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let canAnswer = true;

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            canAnswer = true;
            const q = questions[currentQuestion];
            document.getElementById('current-q').innerText = currentQuestion + 1;
            document.getElementById('level-tag').innerText = q.level;
            document.getElementById('level-tag').className = `px-3 py-1 rounded-full text-xs font-bold uppercase tracking-widest ${getLevelClass(q.level)}`;
            document.getElementById('question-text').innerHTML = q.question;
            
            const optionsGrid = document.getElementById('options-grid');
            optionsGrid.innerHTML = '';
            
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "option-card text-left p-5 border-2 border-blue-100 rounded-2xl hover:border-blue-500 hover:bg-blue-50 transition-all bg-white shadow-sm flex items-start group";
                btn.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold mr-4 group-hover:bg-blue-500 group-hover:text-white transition-colors">${String.fromCharCode(65 + index)}</span>
                    <span class="flex-1 text-gray-700 font-medium">${opt}</span>
                `;
                btn.onclick = () => checkAnswer(index);
                optionsGrid.appendChild(btn);
            });

            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('progress').style.width = `${((currentQuestion) / questions.length) * 100}%`;
            
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        function getLevelClass(level) {
            switch(level) {
                case 'Nh·∫≠n bi·∫øt': return 'bg-green-100 text-green-700';
                case 'Th√¥ng hi·ªÉu': return 'bg-blue-100 text-blue-700';
                case 'V·∫≠n d·ª•ng th·ª±c t·∫ø': return 'bg-yellow-100 text-yellow-700';
                case 'V·∫≠n d·ª•ng cao': return 'bg-red-100 text-red-700';
                default: return 'bg-gray-100 text-gray-700';
            }
        }

        function checkAnswer(index) {
            if (!canAnswer) return;
            canAnswer = false;

            const q = questions[currentQuestion];
            const feedback = document.getElementById('feedback');
            const title = document.getElementById('feedback-title');
            const icon = document.getElementById('feedback-icon');
            const rationale = document.getElementById('feedback-rationale');
            const options = document.getElementById('options-grid').children;

            if (index === q.correct) {
                score++;
                title.innerText = "Ch√≠nh x√°c! Ch√∫c m·ª´ng em! üéâ";
                title.className = "font-bold text-lg text-green-600";
                icon.innerText = "üòä";
                feedback.className = "mt-8 p-6 rounded-2xl border-2 border-green-200 bg-green-50 fade-in";
                options[index].classList.add('border-green-500', 'bg-green-100');
                
                // Sound & Confetti
                document.getElementById('success-sound').play();
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            } else {
                title.innerText = "Ch∆∞a ƒë√∫ng r·ªìi, c·ªë g·∫Øng l√™n nh√©! üí™";
                title.className = "font-bold text-lg text-red-600";
                icon.innerText = "üòü";
                feedback.className = "mt-8 p-6 rounded-2xl border-2 border-red-200 bg-red-50 fade-in";
                options[index].classList.add('border-red-500', 'bg-red-100');
                options[q.correct].classList.add('border-green-500', 'bg-green-100');
                document.getElementById('wrong-sound').play();
            }

            rationale.innerHTML = `<strong>Gi·∫£i th√≠ch:</strong> ${q.rationale}`;
            feedback.classList.remove('hidden');
            
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                showEndScreen();
            }
        }

        function showEndScreen() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('end-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            document.getElementById('progress').style.width = `100%`;

            let msg = "";
            if (score === 10) msg = "Xu·∫•t s·∫Øc! Em l√† m·ªôt thi√™n t√†i h√¨nh h·ªçc! C√¥ B√¨nh r·∫•t t·ª± h√†o v·ªÅ em!";
            else if (score >= 8) msg = "R·∫•t t·ªët! Em ƒë√£ n·∫Øm v·ªØng ki·∫øn th·ª©c v·ªÅ hai tam gi√°c b·∫±ng nhau r·ªìi ƒë·∫•y!";
            else if (score >= 5) msg = "Kh√° t·ªët! Em h√£y √¥n t·∫≠p k·ªπ h∆°n c√°c c·∫∑p c·∫°nh t∆∞∆°ng ·ª©ng nh√©!";
            else msg = "Em c·∫ßn √¥n l·∫°i ƒë·ªãnh nghƒ©a v√† c√°ch vi·∫øt k√≠ hi·ªáu t∆∞∆°ng ·ª©ng nh√©. ƒê·ª´ng n·∫£n l√≤ng!";
            
            document.getElementById('performance-msg').innerText = msg;
            
            confetti({
                particleCount: 150,
                spread: 100,
                origin: { y: 0.6 }
            });
        }
    </script>
</body>
</html>
