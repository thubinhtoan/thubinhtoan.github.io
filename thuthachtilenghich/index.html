<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>Game ToÃ¡n 7 â€“ Äáº¡i lÆ°á»£ng tá»‰ lá»‡ nghá»‹ch</title>

<!-- Tailwind CDN (cháº¡y offline váº«n OK náº¿u Ä‘Ã£ táº£i, cÃ²n online thÃ¬ cÃ ng tá»‘t) -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- MathJax -->
<script>
window.MathJax = {
  tex: { inlineMath: [['\\(', '\\)']] }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body {
  background: linear-gradient(135deg,#1e3a8a,#6d28d9);
}
.glass {
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(12px);
}
</style>
</head>

<body class="min-h-screen flex items-center justify-center text-white">

<div class="glass rounded-3xl p-10 w-full max-w-3xl">

  <!-- Header -->
  <div class="flex justify-between mb-4">
    <div id="progress">CÃ¢u 1/?</div>
    <div>Äiá»ƒm: <span id="score">0</span></div>
  </div>

  <!-- Progress bar -->
  <div class="w-full bg-gray-700 h-3 rounded mb-6">
    <div id="bar" class="bg-orange-400 h-3 rounded" style="width:0%"></div>
  </div>

  <!-- Question -->
  <div id="question" class="text-xl mb-8"></div>

  <!-- Options -->
  <div id="options" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>

</div>

<!-- FEEDBACK MODAL -->
<div id="feedback" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50">
  <div class="glass rounded-2xl p-8 max-w-md w-full text-center">
    <div id="fb-icon" class="text-5xl mb-3"></div>
    <div id="fb-title" class="text-2xl font-bold mb-3"></div>
    <div id="fb-rationale" class="mb-6 text-gray-200"></div>
    <button onclick="nextQuestion()"
      class="bg-blue-500 hover:bg-blue-400 px-6 py-3 rounded-xl font-bold">
      CÃ‚U TIáº¾P THEO â†’
    </button>
  </div>
</div>

<script>

// ================== Tá»ˆ Lá»† NGHá»ŠCH â€“ ÄÃƒ CHUáº¨N HOÃ LATEX ==================

let questions = [

/* ========= NHáº¬N BIáº¾T (6 cÃ¢u) ========= */
{
  lvl: "Nháº­n biáº¿t",
  q: "Náº¿u Ä‘áº¡i lÆ°á»£ng \\(y\\) liÃªn há»‡ vá»›i Ä‘áº¡i lÆ°á»£ng \\(x\\) theo cÃ´ng thá»©c \\(y = \\dfrac{a}{x}\\) (\\(a \\ne 0\\)) thÃ¬ ta nÃ³i:",
  options: [
    "y tá»‰ lá»‡ thuáº­n vá»›i x",
    "y tá»‰ lá»‡ nghá»‹ch vá»›i x theo há»‡ sá»‘ a",
    "x tá»‰ lá»‡ nghá»‹ch vá»›i y theo há»‡ sá»‘ \\(1/a\\)",
    "y báº±ng a láº§n x"
  ],
  correct: 1,
  rationale: "Theo Ä‘á»‹nh nghÄ©a Ä‘áº¡i lÆ°á»£ng tá»‰ lá»‡ nghá»‹ch: \\(y = \\dfrac{a}{x}\\) hay \\(x \\cdot y = a\\)."
},
{
  lvl: "Nháº­n biáº¿t",
  q: "Cho cÃ´ng thá»©c \\(x \\cdot y = 15\\). Há»‡ sá»‘ tá»‰ lá»‡ nghá»‹ch \\(a\\) cá»§a \\(y\\) Ä‘á»‘i vá»›i \\(x\\) lÃ :",
  options: ["15", "-15", "1/15", "x/y"],
  correct: 0,
  rationale: "Vá»›i Ä‘áº¡i lÆ°á»£ng tá»‰ lá»‡ nghá»‹ch, ta cÃ³ \\(x \\cdot y = a\\). Do Ä‘Ã³ \\(a = 15\\)."
},
{
  lvl: "Nháº­n biáº¿t",
  q: "Náº¿u \\(y\\) tá»‰ lá»‡ nghá»‹ch vá»›i \\(x\\) theo há»‡ sá»‘ \\(a\\) thÃ¬ \\(x\\) tá»‰ lá»‡ nghá»‹ch vá»›i \\(y\\) theo há»‡ sá»‘:",
  options: ["\\(1/a\\)", "-a", "a", "\\(a^2\\)"],
  correct: 2,
  rationale: "VÃ¬ \\(y = \\dfrac{a}{x}\\) nÃªn \\(x = \\dfrac{a}{y}\\). Quan há»‡ tá»‰ lá»‡ nghá»‹ch lÃ  Ä‘á»‘i xá»©ng."
},
{
  lvl: "Nháº­n biáº¿t",
  q: "TÃ­nh cháº¥t nÃ o sau Ä‘Ã¢y lÃ  cá»§a Ä‘áº¡i lÆ°á»£ng tá»‰ lá»‡ nghá»‹ch?",
  options: [
    "\\(\\dfrac{y_1}{x_1} = \\dfrac{y_2}{x_2}\\)",
    "\\(\\dfrac{x_1}{x_2} = \\dfrac{y_1}{y_2}\\)",
    "\\(x_1 \\cdot y_1 = x_2 \\cdot y_2\\)",
    "\\(x_1 + y_1 = x_2 + y_2\\)"
  ],
  correct: 2,
  rationale: "Äáº·c trÆ°ng cá»§a tá»‰ lá»‡ nghá»‹ch lÃ  tÃ­ch cá»§a hai giÃ¡ trá»‹ tÆ°Æ¡ng á»©ng khÃ´ng Ä‘á»•i."
},
{
  lvl: "Nháº­n biáº¿t",
  q: "Cáº·p Ä‘áº¡i lÆ°á»£ng nÃ o sau Ä‘Ã¢y tá»‰ lá»‡ nghá»‹ch vá»›i nhau?",
  options: [
    "Váº­n tá»‘c vÃ  quÃ£ng Ä‘Æ°á»ng (thá»i gian khÃ´ng Ä‘á»•i)",
    "Thá»i gian vÃ  quÃ£ng Ä‘Æ°á»ng (váº­n tá»‘c khÃ´ng Ä‘á»•i)",
    "Váº­n tá»‘c vÃ  thá»i gian (quÃ£ng Ä‘Æ°á»ng khÃ´ng Ä‘á»•i)",
    "Chiá»u dÃ i vÃ  chu vi hÃ¬nh chá»¯ nháº­t"
  ],
  correct: 2,
  rationale: "VÃ¬ \\(v \\cdot t = s\\). Khi \\(s\\) khÃ´ng Ä‘á»•i, váº­n tá»‘c tÄƒng thÃ¬ thá»i gian giáº£m."
},
{
  lvl: "Nháº­n biáº¿t",
  q: "Náº¿u \\(x \\cdot y = 24\\) thÃ¬ \\(x\\) vÃ  \\(y\\) lÃ :",
  options: ["Tá»‰ lá»‡ thuáº­n", "Tá»‰ lá»‡ nghá»‹ch", "KhÃ´ng tá»‰ lá»‡", "Báº±ng nhau"],
  correct: 1,
  rationale: "Khi tÃ­ch cá»§a hai Ä‘áº¡i lÆ°á»£ng luÃ´n báº±ng má»™t sá»‘ khÃ´ng Ä‘á»•i thÃ¬ chÃºng tá»‰ lá»‡ nghá»‹ch."
},

/* ========= THÃ”NG HIá»‚U (5 cÃ¢u) ========= */
{
  lvl: "ThÃ´ng hiá»ƒu",
  q: "Cho \\(x\\) vÃ  \\(y\\) tá»‰ lá»‡ nghá»‹ch. Khi \\(x = 4\\) thÃ¬ \\(y = 5\\). Há»‡ sá»‘ tá»‰ lá»‡ \\(a\\) lÃ :",
  options: ["1,25", "9", "20", "1"],
  correct: 2,
  rationale: "Há»‡ sá»‘ \\(a = x \\cdot y = 4 \\cdot 5 = 20\\)."
},
{
  lvl: "ThÃ´ng hiá»ƒu",
  q: "Cho \\(y\\) tá»‰ lá»‡ nghá»‹ch vá»›i \\(x\\) theo há»‡ sá»‘ \\(a = 12\\). Khi \\(x = -3\\) thÃ¬ \\(y\\) báº±ng:",
  options: ["-4", "4", "36", "-36"],
  correct: 0,
  rationale: "Ta cÃ³ \\(y = \\dfrac{12}{-3} = -4\\)."
},
{
  lvl: "ThÃ´ng hiá»ƒu",
  q: "Biáº¿t \\(\\dfrac{x_1}{x_2} = \\dfrac{y_2}{y_1}\\). Náº¿u \\(x_1 = 2, x_2 = 4, y_1 = 10\\) thÃ¬ \\(y_2\\) báº±ng:",
  options: ["20", "5", "8", "40"],
  correct: 1,
  rationale: "Tá»« \\(\\dfrac{2}{4} = \\dfrac{y_2}{10}\\) suy ra \\(y_2 = 5\\)."
},
{
  lvl: "ThÃ´ng hiá»ƒu",
  q: "Cho \\(y\\) tá»‰ lá»‡ nghá»‹ch vá»›i \\(x\\). Khi \\(x\\) tÄƒng lÃªn 3 láº§n thÃ¬ \\(y\\) sáº½:",
  options: ["TÄƒng 3 láº§n", "Giáº£m 3 láº§n", "KhÃ´ng Ä‘á»•i", "TÄƒng 9 láº§n"],
  correct: 1,
  rationale: "Trong tá»‰ lá»‡ nghá»‹ch, má»™t Ä‘áº¡i lÆ°á»£ng tÄƒng bao nhiÃªu láº§n thÃ¬ Ä‘áº¡i lÆ°á»£ng kia giáº£m báº¥y nhiÃªu láº§n."
},
{
  lvl: "ThÃ´ng hiá»ƒu",
  q: "Cho \\(x\\) tá»‰ lá»‡ nghá»‹ch vá»›i \\(y\\) theo há»‡ sá»‘ \\(a=2\\), \\(y\\) tá»‰ lá»‡ thuáº­n vá»›i \\(z\\) theo há»‡ sá»‘ \\(k=4\\). Quan há»‡ giá»¯a \\(x\\) vÃ  \\(z\\) lÃ :",
  options: [
    "\\(x = 8z\\)",
    "\\(x = \\dfrac{1}{2z}\\)",
    "\\(x = \\dfrac{2}{z}\\)",
    "\\(x = \\dfrac{1}{2z}\\)"
  ],
  correct: 3,
  rationale: "Ta cÃ³ \\(x = \\dfrac{2}{y}\\), \\(y = 4z\\) nÃªn \\(x = \\dfrac{1}{2z}\\)."
},

/* ========= Váº¬N Dá»¤NG (3 cÃ¢u) ========= */
{
  lvl: "Váº­n dá»¥ng",
  q: "Má»™t Ä‘á»™i 12 cÃ´ng nhÃ¢n lÃ m xong cÃ´ng viá»‡c trong 10 ngÃ y. Náº¿u cÃ³ 15 cÃ´ng nhÃ¢n (nÄƒng suáº¥t nhÆ° nhau) thÃ¬ cáº§n:",
  options: ["12,5 ngÃ y", "8 ngÃ y", "18 ngÃ y", "6 ngÃ y"],
  correct: 1,
  rationale: "Sá»‘ cÃ´ng nhÃ¢n vÃ  thá»i gian tá»‰ lá»‡ nghá»‹ch: \\(12 \\cdot 10 = 15 \\cdot t \\Rightarrow t = 8\\) ngÃ y."
},
{
  lvl: "Váº­n dá»¥ng",
  q: "Chia sá»‘ 310 thÃ nh 3 pháº§n tá»‰ lá»‡ nghá»‹ch vá»›i 2; 3; 5. Pháº§n bÃ© nháº¥t lÃ :",
  options: ["150", "100", "60", "30"],
  correct: 2,
  rationale: "Pháº§n tá»‰ lá»‡ nghá»‹ch vá»›i 2;3;5 tá»©c tá»‰ lá»‡ thuáº­n vá»›i \\(\\frac12,\\frac13,\\frac15\\). Pháº§n nhá» nháº¥t lÃ  60."
},
{
  lvl: "Váº­n dá»¥ng thá»±c táº¿",
  q: "Má»™t vÃ²i nÆ°á»›c cháº£y Ä‘áº§y bá»ƒ trong 6 giá». Náº¿u má»Ÿ thÃªm 2 vÃ²i cÃ¹ng loáº¡i thÃ¬ bá»ƒ Ä‘áº§y sau:",
  options: ["2 giá»", "3 giá»", "18 giá»", "4 giá»"],
  correct: 0,
  rationale: "Sá»‘ vÃ²i vÃ  thá»i gian tá»‰ lá»‡ nghá»‹ch. 3 vÃ²i thÃ¬ thá»i gian lÃ  \\(6 : 3 = 2\\) giá»."
},

/* ========= Váº¬N Dá»¤NG CAO (1 cÃ¢u) ========= */
{
  lvl: "Váº­n dá»¥ng cao",
  q: "Cho \\(x\\) vÃ  \\(y\\) tá»‰ lá»‡ nghá»‹ch. Biáº¿t \\(x_1 - x_2 = 5\\), \\(y_1 = 4\\), \\(y_2 = 9\\). Há»‡ sá»‘ tá»‰ lá»‡ \\(a\\) lÃ :",
  options: ["13", "36", "45", "20"],
  correct: 1,
  rationale: "Tá»« \\(4x_1 = 9x_2\\) vÃ  \\(x_1 - x_2 = 5\\) suy ra \\(x_1 = 9, x_2 = 4\\). Do Ä‘Ã³ \\(a = 36\\)."
}

];
// ================== RANDOM ==================
function shuffle(arr){
for(let i=arr.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[arr[i],arr[j]]=[arr[j],arr[i]];
}
}

questions.forEach(q=>{
const correctOpt=q.options[q.correct];
shuffle(q.options);
q.correct=q.options.indexOf(correctOpt);
});
shuffle(questions);

// ================== GAME LOGIC ==================
let i=0, score=0;

const qEl=document.getElementById("question");
const optEl=document.getElementById("options");
const progEl=document.getElementById("progress");
const barEl=document.getElementById("bar");
const scoreEl=document.getElementById("score");

function loadQuestion(){
const q=questions[i];
progEl.innerText=`CÃ¢u ${i+1}/${questions.length}`;
barEl.style.width=`${(i/questions.length)*100}%`;
qEl.innerHTML=q.q;
optEl.innerHTML="";
q.options.forEach((opt,idx)=>{
const btn=document.createElement("button");
btn.className="glass p-4 rounded-xl hover:bg-orange-500 transition";
btn.innerHTML=String.fromCharCode(65+idx)+". "+opt;
btn.onclick=()=>checkAnswer(idx);
optEl.appendChild(btn);
});
MathJax.typesetPromise();
}

function checkAnswer(idx){
const q=questions[i];
document.getElementById("feedback").classList.remove("hidden");
if(idx===q.correct){
score++;
document.getElementById("fb-icon").innerText="ğŸ‰";
document.getElementById("fb-title").innerText="CHÃNH XÃC!";
confetti({particleCount:120,spread:70});
}else{
document.getElementById("fb-icon").innerText="âŒ";
document.getElementById("fb-title").innerText="CHÆ¯A ÄÃšNG!";
}
scoreEl.innerText=score;
document.getElementById("fb-rationale").innerHTML="<b>Giáº£i thÃ­ch:</b><br>"+q.rationale;
MathJax.typesetPromise();
}

function nextQuestion(){
document.getElementById("feedback").classList.add("hidden");
i++;
if(i>=questions.length){
qEl.innerHTML="ğŸ¯ <b>HOÃ€N THÃ€NH!</b>";
optEl.innerHTML=`Äiá»ƒm cá»§a em: <b>${score}/${questions.length}</b>`;
barEl.style.width="100%";
return;
}
loadQuestion();
}

loadQuestion();
</script>
</body>
</html>
