<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ThÃ¡m Tá»­ HÃ m Sá»‘: Truy TÃ¬m Quy Luáº­t</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Roboto:wght@400;700&display=swap');

    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #dbeafe, #e0e7ff);
      overflow-x: hidden;
    }
    .game-title { font-family: 'Patrick Hand', cursive; }
    .btn-hover:hover { transform: translateY(-2px); }
    .confetti {
      position: fixed; width: 8px; height: 8px; top: -10px;
      animation: fall linear forwards;
    }
    @keyframes fall {
      to { transform: translateY(100vh) rotate(720deg); }
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4">

<!-- START -->
<div id="start-screen" class="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full text-center">
  <h1 class="game-title text-5xl text-blue-600 mb-4 font-bold">
    ThÃ¡m Tá»­ HÃ m Sá»‘ ğŸ•µï¸â€â™‚ï¸
  </h1>
  <p class="text-gray-600 mb-6">
    Giáº£i 15 cÃ¢u há»i vá» hÃ m sá»‘ Ä‘á»ƒ trá»Ÿ thÃ nh thÃ¡m tá»­ ToÃ¡n há»c xuáº¥t sáº¯c!
  </p>

  <div class="grid grid-cols-2 gap-3 text-left bg-blue-50 p-4 rounded mb-6">
    <div>â­ Nháº­n biáº¿t: 6</div>
    <div>ğŸ§  ThÃ´ng hiá»ƒu: 5</div>
    <div>ğŸš€ Váº­n dá»¥ng: 3</div>
    <div>ğŸ‘‘ Váº­n dá»¥ng cao: 1</div>
  </div>

  <button onclick="startGame()"
    class="btn-hover bg-blue-600 text-white text-xl px-10 py-3 rounded-full font-bold">
    Báº®T Äáº¦U ğŸš€
  </button>
</div>

<!-- QUIZ -->
<div id="quiz-screen" class="hidden bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col">
  <div class="p-4 flex justify-between bg-slate-100 border-b">
    <div>CÃ¢u <span id="q-current">1</span>/<span id="q-total">15</span></div>
    <div>ğŸ† <span id="score">0</span></div>
  </div>

  <div class="h-1 bg-gray-200">
    <div id="progress-bar" class="h-1 bg-blue-500"></div>
  </div>

  <div class="p-6 flex-grow">
    <span id="level-badge" class="text-xs px-2 py-1 rounded text-white"></span>
    <h2 id="question-text" class="text-xl font-medium mt-3 mb-6"></h2>

    <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
  </div>

  <div id="feedback-area" class="hidden p-6 bg-gray-50 border-t">
    <div id="feedback-header" class="font-bold mb-2"></div>
    <div id="rationale-text" class="text-gray-700 mb-4"></div>
    <button onclick="nextQuestion()"
      class="w-full bg-blue-600 text-white py-2 rounded font-bold">
      CÃ¢u tiáº¿p theo â†’
    </button>
  </div>
</div>

<!-- RESULT -->
<div id="result-screen" class="hidden bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
  <h2 class="text-3xl font-bold mb-3">HoÃ n thÃ nh!</h2>
  <div class="text-5xl text-blue-600 mb-4">
    <span id="final-score">0</span>/15
  </div>
  <p id="result-message" class="mb-6 font-medium"></p>
  <button onclick="restartGame()"
    class="bg-gray-800 text-white py-2 px-6 rounded font-bold">
    ChÆ¡i láº¡i
  </button>
</div>

<script>
/* ================= DATA ================= */
const questions = [
  {level:"Nháº­n biáº¿t",text:"Äáº¡i lÆ°á»£ng y Ä‘Æ°á»£c gá»i lÃ  hÃ m sá»‘ cá»§a x náº¿u:",options:[
    "Vá»›i má»—i x xÃ¡c Ä‘á»‹nh duy nháº¥t má»™t y",
    "Má»™t x cho nhiá»u y",
    "Má»™t y cho má»™t x",
    "x,y Ä‘á»™c láº­p"],correct:0,
    rationale:"Theo Ä‘á»‹nh nghÄ©a, má»—i x chá»‰ cho má»™t y."},

  {level:"Nháº­n biáº¿t",text:"KÃ­ hiá»‡u thÆ°á»ng dÃ¹ng cho hÃ m sá»‘ lÃ :",options:[
    "x = f(y)","y = f(x)","x + y = 0","y > x"],correct:1,
    rationale:"KÃ­ hiá»‡u chuáº©n: y = f(x)."},

  {level:"Nháº­n biáº¿t",text:"Trong y = f(x), x Ä‘Æ°á»£c gá»i lÃ :",options:[
    "HÃ m sá»‘","Háº±ng sá»‘","Biáº¿n sá»‘","GiÃ¡ trá»‹"],correct:2,
    rationale:"x lÃ  Ä‘áº¡i lÆ°á»£ng thay Ä‘á»•i â†’ biáº¿n sá»‘."},

  {level:"Nháº­n biáº¿t",text:"Báº£ng nÃ o KHÃ”NG biá»ƒu thá»‹ hÃ m sá»‘?",options:[
    "x=1â†’y=2; x=2â†’y=4",
    "x=1â†’y=5; x=2â†’y=5",
    "x=-1â†’y=1; x=1â†’y=1",
    "x=1â†’y=2; x=1â†’y=3"],correct:3,
    rationale:"Má»™t x cÃ³ 2 y â†’ khÃ´ng pháº£i hÃ m sá»‘."},

  {level:"Nháº­n biáº¿t",text:"Cho y=2x. GiÃ¡ trá»‹ f(0) lÃ :",options:[
    "0","2","1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,
    rationale:"f(0)=2Â·0=0."},

  {level:"Nháº­n biáº¿t",text:"Äá»“ thá»‹ y=f(x) lÃ  táº­p há»£p cÃ¡c Ä‘iá»ƒm:",options:[
    "M(f(x);x)","M(x;f(x))","M(x;0)","M(0;f(x))"],correct:1,
    rationale:"ÄÃºng theo Ä‘á»‹nh nghÄ©a Ä‘á»“ thá»‹."},

  {level:"ThÃ´ng hiá»ƒu",text:"Cho f(x)=xÂ²âˆ’1. TÃ­nh f(âˆ’2).",options:[
    "-5","-3","3","5"],correct:2,
    rationale:"4âˆ’1=3."},

  {level:"ThÃ´ng hiá»ƒu",text:"Äiá»ƒm thuá»™c Ä‘á»“ thá»‹ y=3xâˆ’1 lÃ :",options:[
    "B(1;3)","C(0;1)","D(2;4)","A(1;2)"],correct:3,
    rationale:"3Â·1âˆ’1=2."},

  {level:"ThÃ´ng hiá»ƒu",text:"HÃ m y=4/x xÃ¡c Ä‘á»‹nh khi:",options:[
    "xâ‰ 0","x>0","x<4","Má»i x"],correct:0,
    rationale:"Máº«u khÃ¡c 0."},

  {level:"ThÃ´ng hiá»ƒu",text:"Äá»“ thá»‹ y=ax qua (2;6) thÃ¬ a báº±ng:",options:[
    "2","3","1/3","12"],correct:1,
    rationale:"6=2a â‡’ a=3."},

  {level:"ThÃ´ng hiá»ƒu",text:"Ã” tÃ´ cháº¡y 60km/h. QuÃ£ng Ä‘Æ°á»ng s theo t lÃ :",options:[
    "s=60+t","t=60s","s=60t","s=60/t"],correct:2,
    rationale:"s=vÂ·t."},

  {level:"Váº­n dá»¥ng",text:"C=4a. Náº¿u a tÄƒng 3 láº§n thÃ¬ C:",options:[
    "TÄƒng 4 láº§n","TÄƒng 12 láº§n","KhÃ´ng Ä‘á»•i","TÄƒng 3 láº§n"],correct:3,
    rationale:"C tá»‰ lá»‡ thuáº­n vá»›i a."},

  {level:"Váº­n dá»¥ng",text:"Taxi: 10.000Ä‘ má»Ÿ cá»­a + 15.000Ä‘/km. CÃ´ng thá»©c:",options:[
    "y=15000x+10000","y=10000x+15000","y=25000x","y=15000x"],correct:0,
    rationale:"Tiá»n = tiá»n/km + tiá»n cá»‘ Ä‘á»‹nh."},

  {level:"Váº­n dá»¥ng",text:"Cho f(x)=2x+m, biáº¿t f(1)=5. TÃ¬m m.",options:[
    "2","3","âˆ’3","7"],correct:1,
    rationale:"2+m=5 â‡’ m=3."},

  {level:"Váº­n dá»¥ng cao",text:"Biáº¿t f(a+b)=f(a)+f(b), f(2)=6. TÃ­nh f(5).",options:[
    "10","12","15","30"],correct:2,
    rationale:"f(1)=3 â‡’ f(5)=15."}
];

/* ===== SHUFFLE ===== */
let currentQ=null, index=0, score=0, locked=false;

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}
function prepare(q){
  const nq={...q,options:[...q.options]};
  const ans=nq.options[nq.correct];
  shuffle(nq.options);
  nq.correct=nq.options.indexOf(ans);
  return nq;
}

/* ===== GAME ===== */
function startGame(){
  document.getElementById("start-screen").classList.add("hidden");
  document.getElementById("quiz-screen").classList.remove("hidden");
  load();
}
function load(){
  locked=false;
  currentQ=prepare(questions[index]);

  document.getElementById("q-current").textContent=index+1;
  document.getElementById("q-total").textContent=questions.length;
  document.getElementById("question-text").textContent=currentQ.text;

  const badge=document.getElementById("level-badge");
  badge.textContent=currentQ.level;
  badge.className="text-xs px-2 py-1 rounded text-white bg-blue-500";

  document.getElementById("progress-bar").style.width=
    ((index+1)/questions.length*100)+"%";

  const box=document.getElementById("options-container");
  box.innerHTML="";
  currentQ.options.forEach((o,i)=>{
    const b=document.createElement("button");
    b.className="border p-3 rounded hover:bg-blue-50 text-left";
    b.innerHTML=`<b>${String.fromCharCode(65+i)}.</b> ${o}`;
    b.onclick=()=>check(i,b);
    box.appendChild(b);
  });

  document.getElementById("feedback-area").classList.add("hidden");
}
function check(i,btn){
  if(locked) return;
  locked=true;

  const all=[...document.getElementById("options-container").children];
  all.forEach(b=>b.disabled=true);

  const fb=document.getElementById("feedback-area");
  const head=document.getElementById("feedback-header");

  if(i===currentQ.correct){
    score++;
    document.getElementById("score").textContent=score;
    btn.classList.add("bg-green-200");
    head.textContent="âœ” ChÃ­nh xÃ¡c!";
  }else{
    btn.classList.add("bg-red-200");
    all[currentQ.correct].classList.add("bg-green-200");
    head.textContent="âœ˜ ChÆ°a Ä‘Ãºng!";
  }

  document.getElementById("rationale-text").textContent=currentQ.rationale;
  fb.classList.remove("hidden");
}
function nextQuestion(){
  index++;
  if(index<questions.length) load();
  else finish();
}
function finish(){
  document.getElementById("quiz-screen").classList.add("hidden");
  document.getElementById("result-screen").classList.remove("hidden");
  document.getElementById("final-score").textContent=score;
  const pct=score/questions.length*100;
  document.getElementById("result-message").textContent=
    pct===100?"Xuáº¥t sáº¯c ğŸŒŸ":pct>=70?"Ráº¥t tá»‘t ğŸ‘":pct>=50?"KhÃ¡ á»•n ğŸ’ª":"Cáº§n cá»‘ gáº¯ng ğŸ“š";
}
function restartGame(){
  index=0; score=0;
  document.getElementById("score").textContent=0;
  document.getElementById("result-screen").classList.add("hidden");
  document.getElementById("start-screen").classList.remove("hidden");
}
</script>
</body>
</html>
