<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√°m T·ª≠ D·ªØ Li·ªáu - To√°n 8</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%); /* Teal theme */
        }

        .card {
            background: white;
            border-radius: 1.5rem;
            box-shadow: 0 10px 40px -10px rgba(20, 184, 166, 0.2);
            transition: transform 0.3s ease;
        }

        .option-btn {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.15);
            background-color: #f0fdfa;
            border-color: #14b8a6;
        }

        .option-btn.correct {
            background-color: #d1fae5 !important;
            border-color: #059669 !important;
            color: #064e3b !important;
        }

        .option-btn.wrong {
            background-color: #fee2e2 !important;
            border-color: #dc2626 !important;
            color: #7f1d1d !important;
        }

        /* Animation cho Feedback */
        .feedback-enter {
            animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-bar {
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .badge {
            font-size: 0.75rem;
            padding: 0.35rem 0.85rem;
            border-radius: 9999px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-3xl">
        <!-- Start Screen -->
        <div id="start-screen" class="card p-10 text-center">
            <div class="mb-6 inline-flex p-5 bg-teal-100 rounded-full animate-bounce">
                <span class="text-6xl">üîç</span>
            </div>
            <h1 class="text-4xl md:text-5xl font-black text-teal-800 mb-4">Th√°m T·ª≠ D·ªØ Li·ªáu</h1>
            <p class="text-teal-600 mb-10 text-lg font-medium">Chinh ph·ª•c k·ªπ nƒÉng Ph√¢n t√≠ch s·ªë li·ªáu<br>To√°n 8 - Ch∆∞∆°ng 4</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10 text-left">
                <div class="bg-teal-50 p-4 rounded-xl border border-teal-100">
                    <div class="font-bold text-teal-800 mb-1">üéØ M·ª•c ti√™u</div>
                    <div class="text-sm text-teal-600">Ph√°t hi·ªán quy lu·∫≠t & t√≠nh h·ª£p l√Ω</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                    <div class="font-bold text-blue-800 mb-1">üìä K·ªπ nƒÉng</div>
                    <div class="text-sm text-blue-600">ƒê·ªçc & x·ª≠ l√Ω bi·ªÉu ƒë·ªì</div>
                </div>
                <div class="bg-purple-50 p-4 rounded-xl border border-purple-100">
                    <div class="font-bold text-purple-800 mb-1">üèÜ Th·ª≠ th√°ch</div>
                    <div class="text-sm text-purple-600">15 c√¢u h·ªèi h√≥c b√∫a</div>
                </div>
            </div>

            <button onclick="startGame()" class="w-full md:w-auto px-12 py-4 bg-teal-600 hover:bg-teal-700 text-white font-bold rounded-2xl shadow-lg shadow-teal-200 transform transition hover:-translate-y-1 text-xl flex items-center justify-center gap-3 mx-auto">
                <span>B·∫Øt ƒê·∫ßu ƒêi·ªÅu Tra</span> üëâ
            </button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <!-- Header -->
            <div class="flex justify-between items-end mb-6 px-2">
                <div>
                    <span class="text-teal-600 text-xs font-bold uppercase tracking-wider block mb-1">Ti·∫øn ƒë·ªô ƒëi·ªÅu tra</span>
                    <div class="text-2xl font-black text-gray-800"><span id="current-question">1</span><span class="text-gray-400 text-lg">/15</span></div>
                </div>
                <div class="text-right">
                    <div class="inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm">
                        <span class="text-yellow-500 text-xl">‚≠ê</span>
                        <span class="text-2xl font-black text-teal-600" id="score">0</span>
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="w-full bg-white rounded-full h-3 mb-8 p-1 shadow-sm">
                <div id="progress" class="bg-teal-500 h-full rounded-full progress-bar" style="width: 0%"></div>
            </div>

            <!-- Question Card -->
            <div class="card p-6 md:p-10 mb-6 relative overflow-hidden border-b-4 border-teal-100">
                <div id="level-badge" class="badge bg-green-100 text-green-700 absolute top-6 right-6">Nh·∫≠n bi·∫øt</div>
                
                <h2 id="question-text" class="text-xl md:text-2xl font-bold text-gray-800 mt-6 mb-8 leading-relaxed">
                    ƒêang t·∫£i d·ªØ li·ªáu v·ª• √°n...
                </h2>

                <div id="options-container" class="grid gap-3 md:gap-4">
                    <!-- Options will be injected here -->
                </div>
            </div>

            <!-- Feedback Area -->
            <div id="feedback-area" class="hidden feedback-enter">
                <div id="feedback-card" class="card p-6 border-l-8 shadow-xl">
                    <div class="flex flex-col md:flex-row items-start gap-5">
                        <div id="feedback-icon" class="text-5xl filter drop-shadow-md">üòé</div>
                        <div class="flex-1">
                            <h3 id="feedback-title" class="text-2xl font-bold mb-2 text-teal-700">Ch√≠nh x√°c!</h3>
                            <div class="text-xs font-bold text-gray-400 uppercase mb-2 tracking-wide">Ph√¢n t√≠ch:</div>
                            <p id="feedback-text" class="text-gray-700 leading-relaxed text-lg font-medium"></p>
                        </div>
                    </div>
                    <button onclick="nextQuestion()" class="mt-6 w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-4 px-6 rounded-xl transition flex items-center justify-center gap-2 shadow-lg">
                        V·ª• √°n ti·∫øp theo <span class="text-xl">‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden card p-10 text-center">
            <div class="mb-8">
                <div class="inline-block p-8 rounded-full bg-yellow-50 border-4 border-yellow-200 mb-6 animate-pulse">
                    <span class="text-7xl">üïµÔ∏è</span>
                </div>
                <h2 class="text-4xl font-extrabold text-gray-800 mb-3">H·ªì S∆° Kh√©p L·∫°i!</h2>
                <p class="text-gray-500 text-lg">B·∫°n ƒë√£ ho√†n th√†nh nhi·ªám v·ª• ph√¢n t√≠ch.</p>
            </div>

            <div class="bg-teal-50 rounded-2xl p-8 mb-8 border-2 border-teal-100 border-dashed">
                <div class="text-teal-500 font-bold uppercase text-xs tracking-widest mb-2">T·ªïng ƒëi·ªÉm ƒë·∫°t ƒë∆∞·ª£c</div>
                <div class="text-6xl font-black text-teal-600 mb-4" id="final-score">0</div>
                <p id="result-message" class="text-gray-700 font-bold text-xl">Xu·∫•t s·∫Øc!</p>
            </div>

            <button onclick="location.reload()" class="bg-teal-600 hover:bg-teal-700 text-white font-bold py-4 px-10 rounded-xl shadow-lg transform transition hover:scale-105 flex items-center justify-center gap-2 mx-auto w-full md:w-auto">
                <span class="text-xl">üîÑ</span> Ph√¢n T√≠ch L·∫°i
            </button>
        </div>
    </div>

    <!-- Audio Effects -->
    <audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2955/2955-preview.mp3"></audio>
    <audio id="sound-finish" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

   <script>
  const questions = [
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "D·ªØ li·ªáu n√†o sau ƒë√¢y l√† d·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng?",
      options: ["N∆°i sinh", "M√†u m·∫Øt", "ƒêi·ªÉm thi To√°n", "S·ªü th√≠ch"],
      correct: 2,
      rationale: "D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng ƒë∆∞·ª£c bi·ªÉu di·ªÖn b·∫±ng con s·ªë. ƒêi·ªÉm thi To√°n l√† s·ªë c·ª• th·ªÉ."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "Lo·∫°i bi·ªÉu ƒë·ªì n√†o th√≠ch h·ª£p nh·∫•t ƒë·ªÉ bi·ªÉu di·ªÖn t·ªâ l·ªá ph·∫ßn trƒÉm c·ªßa c√°c th√†nh ph·∫ßn trong m·ªôt t·ªïng th·ªÉ?",
      options: ["Bi·ªÉu ƒë·ªì c·ªôt", "Bi·ªÉu ƒë·ªì ƒëo·∫°n th·∫≥ng", "Bi·ªÉu ƒë·ªì h√¨nh qu·∫°t tr√≤n", "Bi·ªÉu ƒë·ªì tranh"],
      correct: 2,
      rationale: "Bi·ªÉu ƒë·ªì h√¨nh qu·∫°t tr√≤n th·ªÉ hi·ªán c∆° c·∫•u v√† t·ªâ l·ªá ph·∫ßn trƒÉm."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "Mu·ªën thu th·∫≠p d·ªØ li·ªáu v·ªÅ nhi·ªát ƒë·ªô trung b√¨nh c√°c ng√†y trong th√°ng 12 t·∫°i H√† N·ªôi, ph∆∞∆°ng ph√°p n√†o h·ª£p l√Ω nh·∫•t?",
      options: [
        "Ph·ªèng v·∫•n ng∆∞·ªùi qua ƒë∆∞·ªùng",
        "Quan s√°t b·∫ßu tr·ªùi",
        "Tra c·ª©u t·ª´ ngu·ªìn Internet ho·∫∑c tr·∫°m kh√≠ t∆∞·ª£ng",
        "L√†m th√≠ nghi·ªám"
      ],
      correct: 2,
      rationale: "Nhi·ªát ƒë·ªô l√† s·ªë li·ªáu c·∫ßn ƒë·ªô ch√≠nh x√°c cao, n√™n l·∫•y t·ª´ ngu·ªìn ƒëo ƒë·∫°c ch√≠nh th·ªëng."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "Tr·ª•c ho√†nh c·ªßa bi·ªÉu ƒë·ªì c·ªôt th∆∞·ªùng d√πng ƒë·ªÉ bi·ªÉu di·ªÖn ƒëi·ªÅu g√¨?",
      options: ["S·ªë li·ªáu th·ªëng k√™", "T√™n c√°c ƒë·ªëi t∆∞·ª£ng th·ªëng k√™", "T·ªâ l·ªá ph·∫ßn trƒÉm", "ƒê∆°n v·ªã ƒëo"],
      correct: 1,
      rationale: "Tr·ª•c ho√†nh th∆∞·ªùng ghi t√™n c√°c ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c th·ªëng k√™."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "D·ªØ li·ªáu 'X·∫øp lo·∫°i h·∫°nh ki·ªÉm: T·ªët, Kh√°, Trung b√¨nh, Y·∫øu' thu·ªôc lo·∫°i n√†o?",
      options: [
        "D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng r·ªùi r·∫°c",
        "D·ªØ li·ªáu ƒë·ªãnh l∆∞·ª£ng li√™n t·ª•c",
        "D·ªØ li·ªáu ƒë·ªãnh t√≠nh (c√≥ th·ª© b·∫≠c)",
        "D·ªØ li·ªáu ƒë·ªãnh t√≠nh (kh√¥ng c√≥ th·ª© b·∫≠c)"
      ],
      correct: 2,
      rationale: "ƒê√¢y l√† d·ªØ li·ªáu ch·ªØ nh∆∞ng c√≥ th·ª© b·∫≠c r√µ r√†ng."
    },
    {
      level: "Nh·∫≠n bi·∫øt",
      question: "Trong bi·ªÉu ƒë·ªì ƒëo·∫°n th·∫≥ng, ƒë·ªô d·ªëc c·ªßa ƒëo·∫°n th·∫≥ng ƒëi l√™n t·ª´ tr√°i sang ph·∫£i bi·ªÉu th·ªã ƒëi·ªÅu g√¨?",
      options: ["D·ªØ li·ªáu gi·∫£m ƒëi", "D·ªØ li·ªáu kh√¥ng ƒë·ªïi", "D·ªØ li·ªáu tƒÉng l√™n", "D·ªØ li·ªáu bi·∫øn ƒë·ªông m·∫°nh"],
      correct: 2,
      rationale: "ƒê∆∞·ªùng ƒëi l√™n cho th·∫•y gi√° tr·ªã tƒÉng theo th·ªùi gian."
    },

    {
      level: "Th√¥ng hi·ªÉu",
      question: "B·∫£ng th·ªëng k√™ s·ªë √°o b√°n ƒë∆∞·ª£c: Size S (10), Size M (50), Size L (30), Size XL (5). M·ªët c·ªßa d·ªØ li·ªáu l√† g√¨?",
      options: ["Size S", "Size M", "Size L", "50"],
      correct: 1,
      rationale: "Size M xu·∫•t hi·ªán nhi·ªÅu nh·∫•t n√™n l√† m·ªët."
    },
    {
      level: "Th√¥ng hi·ªÉu",
      question: "Bi·ªÉu ƒë·ªì qu·∫°t tr√≤n cho bi·∫øt: B√≥ng ƒë√° 40%, C·∫ßu l√¥ng 30%, B∆°i l·ªôi x%, B√≥ng r·ªï 10%. Gi√° tr·ªã x l√†?",
      options: ["10%", "20%", "30%", "15%"],
      correct: 1,
      rationale: "x = 100% ‚àí (40% + 30% + 10%) = 20%."
    },
    {
      level: "Th√¥ng hi·ªÉu",
      question: "ƒê·ªÉ so s√°nh doanh thu c·ªßa hai chi nh√°nh A v√† B trong 4 qu√Ω, n√™n d√πng bi·ªÉu ƒë·ªì n√†o?",
      options: ["Hai bi·ªÉu ƒë·ªì qu·∫°t tr√≤n", "Bi·ªÉu ƒë·ªì c·ªôt ƒë∆°n", "Bi·ªÉu ƒë·ªì c·ªôt k√©p", "Bi·ªÉu ƒë·ªì ƒëo·∫°n th·∫≥ng ƒë∆°n"],
      correct: 2,
      rationale: "Bi·ªÉu ƒë·ªì c·ªôt k√©p gi√∫p so s√°nh hai ƒë·ªëi t∆∞·ª£ng song song."
    },
    {
      level: "Th√¥ng hi·ªÉu",
      question: "N·∫øu b·∫£ng ghi: S·ªë HS l·ªõp 8A l√† 40, s·ªë HS Gi·ªèi l√† 45. Nh·∫≠n x√©t ƒë√∫ng l√†?",
      options: ["L·ªõp h·ªçc r·∫•t gi·ªèi", "D·ªØ li·ªáu ch√≠nh x√°c", "D·ªØ li·ªáu kh√¥ng h·ª£p l√Ω", "C·∫ßn v·∫Ω bi·ªÉu ƒë·ªì"],
      correct: 2,
      rationale: "S·ªë h·ªçc sinh gi·ªèi kh√¥ng th·ªÉ l·ªõn h∆°n t·ªïng s·ªë h·ªçc sinh."
    },
    {
      level: "Th√¥ng hi·ªÉu",
      question: "Gi√° v√†ng ng√†y 2 l√† 60 tri·ªáu, ng√†y 3 l√† 62 tri·ªáu. Gi√° tƒÉng bao nhi√™u?",
      options: ["2 tri·ªáu", "3.33%", "20%", "Kh√¥ng x√°c ƒë·ªãnh"],
      correct: 0,
      rationale: "Gi√° tƒÉng tuy·ªát ƒë·ªëi l√† 62 ‚àí 60 = 2 tri·ªáu."
    },

    {
      level: "V·∫≠n d·ª•ng",
      question: "L·ªõp 8B c√≥ 40 h·ªçc sinh, trung b√¨nh m·ªói b·∫°n quy√™n g√≥p 3 quy·ªÉn s√°ch. T·ªïng s·ªë s√°ch l√†?",
      options: ["120 quy·ªÉn", "43 quy·ªÉn", "13 quy·ªÉn", "40 quy·ªÉn"],
      correct: 0,
      rationale: "T·ªïng = 40 √ó 3 = 120 quy·ªÉn."
    },
    {
      level: "V·∫≠n d·ª•ng (Th·ª±c t·∫ø)",
      question: "Theo d√µi c√¢n n·∫∑ng h√†ng th√°ng trong 1 nƒÉm n√™n d√πng bi·ªÉu ƒë·ªì n√†o?",
      options: ["Bi·ªÉu ƒë·ªì c·ªôt", "Bi·ªÉu ƒë·ªì tranh", "Bi·ªÉu ƒë·ªì ƒëo·∫°n th·∫≥ng", "Bi·ªÉu ƒë·ªì qu·∫°t tr√≤n"],
      correct: 2,
      rationale: "Bi·ªÉu ƒë·ªì ƒëo·∫°n th·∫≥ng th·ªÉ hi·ªán r√µ xu h∆∞·ªõng theo th·ªùi gian."
    },
    {
      level: "V·∫≠n d·ª•ng",
      question: "100 kh√°ch h√†ng th√≠ch m√†u √°o: Xanh 30, ƒê·ªè 20, V√†ng 50. G√≥c ·ªü t√¢m c·ªßa m√†u V√†ng l√†?",
      options: ["50¬∞", "90¬∞", "180¬∞", "120¬∞"],
      correct: 2,
      rationale: "50% √ó 360¬∞ = 180¬∞."
    },

    {
      level: "V·∫≠n d·ª•ng cao",
      question: "Bi·ªÉu ƒë·ªì gi√° xƒÉng c√≥ tr·ª•c tung b·∫Øt ƒë·∫ßu t·ª´ 20.000ƒë g√¢y hi·ªÉu l·∫ßm v√¨ sao?",
      options: [
        "Gi√° tƒÉng g·∫•p ƒë√¥i",
        "B√†i b√°o trung th·ª±c",
        "Bi·ªÉu ƒë·ªì ph√≥ng ƒë·∫°i do c·∫Øt tr·ª•c tung",
        "Gi√° tƒÉng r·∫•t m·∫°nh"
      ],
      correct: 2,
      rationale: "C·∫Øt tr·ª•c tung l√†m ch√™nh l·ªách nh·ªè tr√¥ng l·ªõn h∆°n th·ª±c t·∫ø."
    }
  ];

  let currentQuestionIndex = 0;
  let score = 0;
  let isAnswering = false;

  const soundCorrect = document.getElementById('sound-correct');
  const soundWrong = document.getElementById('sound-wrong');
  const soundFinish = document.getElementById('sound-finish');

  function playSound(type) {
    if (type === 'correct') soundCorrect.play().catch(() => {});
    if (type === 'wrong') soundWrong.play().catch(() => {});
    if (type === 'finish') soundFinish.play().catch(() => {});
  }

  function shuffleOptions(options, correctIndex) {
    const arr = options.map((text, i) => ({ text, isCorrect: i === correctIndex }));
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return {
      options: arr.map(o => o.text),
      correct: arr.findIndex(o => o.isCorrect)
    };
  }

  function startGame() {
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    loadQuestion();
  }

  function loadQuestion() {
    isAnswering = true;
    const q = questions[currentQuestionIndex];
    const shuffled = shuffleOptions(q.options, q.correct);
    q.options = shuffled.options;
    q.correct = shuffled.correct;

    document.getElementById('current-question').innerText = currentQuestionIndex + 1;
    document.getElementById('score').innerText = score;
    document.getElementById('progress').style.width =
      ((currentQuestionIndex + 1) / questions.length) * 100 + "%";

    document.getElementById('question-text').innerText = q.question;

    const container = document.getElementById('options-container');
    container.innerHTML = "";

    q.options.forEach((opt, index) => {
      const btn = document.createElement("button");
      btn.className = "option-btn w-full text-left p-5 rounded-xl border-2 bg-white font-bold";
      btn.onclick = () => checkAnswer(index, btn);
      btn.innerHTML = `<b>${String.fromCharCode(65 + index)}.</b> ${opt}`;
      container.appendChild(btn);
    });
  }

  function checkAnswer(index, btn) {
    if (!isAnswering) return;
    isAnswering = false;

    const q = questions[currentQuestionIndex];
    const buttons = document.querySelectorAll(".option-btn");

    buttons.forEach(b => b.disabled = true);

    if (index === q.correct) {
      btn.classList.add("correct");
      score += 10;
      playSound("correct");
      fireConfetti();
    } else {
      btn.classList.add("wrong");
      buttons[q.correct].classList.add("correct");
      playSound("wrong");
    }

    document.getElementById("score").innerText = score;
    showFeedback(index === q.correct, q.rationale);
  }

  function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) loadQuestion();
    else showResult();
  }

  function showResult() {
    document.getElementById("quiz-screen").classList.add("hidden");
    document.getElementById("result-screen").classList.remove("hidden");
    document.getElementById("final-score").innerText = score;
    playSound("finish");
    fireConfetti();
  }

  function fireConfetti() {
    confetti({ particleCount: 120, spread: 70, origin: { y: 0.7 } });
  }
</script>
</body>
</html>
