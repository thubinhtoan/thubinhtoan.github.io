<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V∆∞∆°ng Qu·ªëc T√¢m N·ªôi Ti·∫øp - To√°n 7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lexend', sans-serif;
            background: linear-gradient(135deg, #FF9A9E 0%, #FAD0C4 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 4px solid #fff;
            border-radius: 2.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .choice-btn {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .choice-btn:hover {
            transform: scale(1.02) translateY(-4px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.2);
        }
        .progress-bar-fill {
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(90deg, #FF6B6B, #FF8E53);
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }
        .floating { animation: float 3s ease-in-out infinite; }
    </style>
</head>
<body class="p-4">

    <div id="game-app" class="max-w-3xl w-full glass-card p-6 md:p-12 relative overflow-hidden">
        
        <!-- Start Screen -->
        <div id="start-screen" class="text-center py-8">
            <div class="text-8xl mb-6 floating">üìê</div>
            <h1 class="text-4xl md:text-6xl font-extrabold text-pink-600 mb-4 tracking-tight leading-tight">V∆Ø∆†NG QU·ªêC<br>T√ÇM N·ªòI TI·∫æP</h1>
            <p class="text-gray-600 text-lg mb-10 italic">Th·ª≠ th√°ch t·ª´ c√¥ <b>Thu B√¨nh</b> d√†nh cho c√°c b·∫°n l·ªõp 7!<br>S·∫µn s√†ng chinh ph·ª•c b√≠ m·∫≠t c·ªßa 3 ƒë∆∞·ªùng ph√¢n gi√°c?</p>
            <button onclick="startGame()" class="bg-gradient-to-r from-pink-500 to-orange-400 text-white font-black py-4 px-12 rounded-full text-2xl shadow-xl hover:scale-110 transition-transform">
                V√ÄO TR·∫¨N NGAY! üöÄ
            </button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6 text-sm md:text-base font-bold text-gray-400 uppercase tracking-widest">
                <span>Th·ª≠ th√°ch <span id="q-idx" class="text-pink-500 text-xl">1</span>/15</span>
                <span>ƒêi·ªÉm: <span id="score" class="text-orange-500 text-xl">0</span></span>
            </div>

            <div class="w-full bg-gray-100 rounded-full h-4 mb-10 overflow-hidden">
                <div id="progress" class="progress-bar-fill h-full w-0"></div>
            </div>

            <div id="question-container" class="mb-10">
                <div id="diff-tag" class="inline-block px-3 py-1 rounded-lg text-[10px] font-bold text-white mb-4 bg-pink-500 uppercase tracking-tighter"></div>
                <h2 id="question-text" class="text-xl md:text-2xl font-bold text-gray-800 leading-snug"></h2>
                
                <div id="choices-grid" class="grid grid-cols-1 gap-4 mt-8">
                    <!-- Choices -->
                </div>
            </div>
        </div>

        <!-- Feedback Modal -->
        <div id="feedback-modal" class="hidden fixed inset-0 flex items-center justify-center z-50 p-4">
            <div class="absolute inset-0 bg-pink-900/40 backdrop-blur-md"></div>
            <div class="bg-white rounded-[2.5rem] p-8 max-w-md w-full relative shadow-2xl text-center animate-in fade-in zoom-in duration-300">
                <div id="fb-emoji" class="text-7xl mb-4"></div>
                <h3 id="fb-title" class="text-3xl font-black mb-4"></h3>
                <div class="bg-pink-50 p-6 rounded-2xl mb-8 border-l-8 border-pink-400 text-left">
                    <p id="fb-rationale" class="text-gray-700 text-sm leading-relaxed"></p>
                </div>
                <button onclick="nextQuestion()" class="w-full bg-pink-500 text-white font-bold py-4 rounded-2xl hover:bg-pink-600 transition-all shadow-lg">
                    TI·∫æP T·ª§C ‚ûî
                </button>
            </div>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="hidden text-center py-8">
            <div id="final-emoji" class="text-9xl mb-6">üèÜ</div>
            <h2 class="text-4xl font-extrabold text-pink-600 mb-2">CHI·∫æN TH·∫ÆNG!</h2>
            <p class="text-xl text-gray-500 mb-8 font-semibold">Em ƒë√£ ƒë·∫°t ƒë∆∞·ª£c: <span id="final-score" class="text-4xl text-orange-500">0</span>/15 c√¢u ƒë√∫ng</p>
            <div id="rank-comment" class="text-lg font-bold text-gray-700 mb-10 px-4 italic bg-pink-50 p-6 rounded-3xl border-2 border-white"></div>
            <button onclick="location.reload()" class="bg-gray-800 text-white font-bold py-4 px-12 rounded-2xl hover:bg-black transition-colors">
                TH·ª¨ L·∫†I üîÑ
            </button>
        </div>
    </div>

    <script>
        // Sound Engine
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSfx(correct) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            if (correct) {
                osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
                osc.frequency.exponentialRampToValueAtTime(1046.5, audioCtx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            }
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }

        const questions = [
            // NH·∫¨N BI·∫æT (6 c√¢u)
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "ƒê∆∞·ªùng ph√¢n gi√°c c·ªßa tam gi√°c l√† ƒëo·∫°n th·∫≥ng n·ªëi ƒë·ªânh v·ªõi ƒëi·ªÉm tr√™n c·∫°nh ƒë·ªëi di·ªán sao cho:",
                opts: ["N√≥ l√† trung ƒëi·ªÉm c·ªßa c·∫°nh ƒë√≥", "N√≥ vu√¥ng g√≥c v·ªõi c·∫°nh ƒë√≥", "N√≥ chia ƒë√¥i g√≥c t·∫°i ƒë·ªânh ƒë√≥", "N√≥ song song v·ªõi m·ªôt c·∫°nh kh√°c"],
                ans: 2,
                rat: "Theo ƒë·ªãnh nghƒ©a, ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa g√≥c n√†o th√¨ chia ƒë√¥i s·ªë ƒëo c·ªßa g√≥c ƒë√≥."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Ba ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa m·ªôt tam gi√°c c√≥ ƒë·∫∑c ƒëi·ªÉm g√¨?",
                opts: ["C√πng ƒëi qua m·ªôt ƒëi·ªÉm", "C·∫Øt nhau t·∫°i 3 ƒëi·ªÉm ph√¢n bi·ªát", "Lu√¥n vu√¥ng g√≥c v·ªõi nhau", "Song song v·ªõi nhau"],
                ans: 0,
                rat: "Ba ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa tam gi√°c ƒë·ªìng quy (c√πng ƒëi qua m·ªôt ƒëi·ªÉm)."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Giao ƒëi·ªÉm c·ªßa ba ƒë∆∞·ªùng ph√¢n gi√°c trong tam gi√°c ƒë∆∞·ª£c g·ªçi l√†:",
                opts: ["Tr·ªçng t√¢m", "Tr·ª±c t√¢m", "T√¢m ƒë∆∞·ªùng tr√≤n ngo·∫°i ti·∫øp", "T√¢m ƒë∆∞·ªùng tr√≤n n·ªôi ti·∫øp"],
                ans: 3,
                rat: "Giao ƒëi·ªÉm c·ªßa ba ƒë∆∞·ªùng ph√¢n gi√°c l√† t√¢m c·ªßa ƒë∆∞·ªùng tr√≤n n·ªôi ti·∫øp tam gi√°c."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Giao ƒëi·ªÉm c·ªßa ba ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa tam gi√°c c√≥ t√≠nh ch·∫•t g√¨ ƒë·∫∑c bi·ªát?",
                opts: ["C√°ch ƒë·ªÅu ba ƒë·ªânh", "C√°ch ƒë·ªÅu ba c·∫°nh", "N·∫±m tr√™n c·∫°nh l·ªõn nh·∫•t", "L√† ƒë·ªânh c·ªßa tam gi√°c"],
                ans: 1,
                rat: "T√¢m ƒë∆∞·ªùng tr√≤n n·ªôi ti·∫øp (giao ƒëi·ªÉm 3 ph√¢n gi√°c) c√°ch ƒë·ªÅu ba c·∫°nh c·ªßa tam gi√°c ƒë√≥."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "M·ªôt tam gi√°c c√≥ bao nhi√™u ƒë∆∞·ªùng ph√¢n gi√°c?",
                opts: ["1", "2", "3", "4"],
                ans: 2,
                rat: "Tam gi√°c c√≥ 3 ƒë·ªânh v√† 3 g√≥c, do ƒë√≥ c√≥ ƒë√∫ng 3 ƒë∆∞·ªùng ph√¢n gi√°c."
            },
            {
                lvl: "Nh·∫≠n bi·∫øt",
                q: "Trong tam gi√°c c√¢n, ƒë∆∞·ªùng ph√¢n gi√°c xu·∫•t ph√°t t·ª´ ƒë·ªânh ƒë·ªëi di·ªán v·ªõi c·∫°nh ƒë√°y c≈©ng ƒë·ªìng th·ªùi l√†:",
                opts: ["ƒê∆∞·ªùng trung tuy·∫øn", "ƒê∆∞·ªùng cao", "ƒê∆∞·ªùng trung tr·ª±c", "C·∫£ 3 ph∆∞∆°ng √°n tr√™n"],
                ans: 3,
                rat: "Trong tam gi√°c c√¢n, ƒë∆∞·ªùng ph√¢n gi√°c ·ªü ƒë·ªânh c≈©ng l√† ƒë∆∞·ªùng trung tuy·∫øn, ƒë∆∞·ªùng cao v√† trung tr·ª±c ·ª©ng v·ªõi ƒë√°y."
            },
            // TH√îNG HI·ªÇU (5 c√¢u)
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "N·∫øu I l√† giao ƒëi·ªÉm c·ªßa ba ƒë∆∞·ªùng ph√¢n gi√°c trong tam gi√°c ABC, kh·∫≥ng ƒë·ªãnh n√†o sau ƒë√¢y SAI?",
                opts: ["AI l√† ph√¢n gi√°c g√≥c A", "BI l√† ph√¢n gi√°c g√≥c B", "I c√°ch ƒë·ªÅu ba ƒë·ªânh A, B, C", "I n·∫±m trong tam gi√°c ABC"],
                ans: 2,
                rat: "I c√°ch ƒë·ªÅu ba C·∫†NH ch·ª© kh√¥ng ph·∫£i c√°ch ƒë·ªÅu ba ƒê·ªàNH (ƒë√≥ l√† t√≠nh ch·∫•t c·ªßa t√¢m ngo·∫°i ti·∫øp)."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Giao ƒëi·ªÉm ba ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa m·ªôt tam gi√°c t√π n·∫±m ·ªü ƒë√¢u?",
                opts: ["Lu√¥n n·∫±m trong tam gi√°c", "Lu√¥n n·∫±m ngo√†i tam gi√°c", "Lu√¥n n·∫±m tr√™n c·∫°nh l·ªõn nh·∫•t", "Tr√πng v·ªõi ƒë·ªânh g√≥c t√π"],
                ans: 0,
                rat: "Kh√°c v·ªõi tr·ª±c t√¢m hay t√¢m ngo·∫°i ti·∫øp, giao ƒëi·ªÉm 3 ƒë∆∞·ªùng ph√¢n gi√°c LU√îN n·∫±m b√™n trong tam gi√°c."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "ƒê·ªÉ x√°c ƒë·ªãnh t√¢m ƒë∆∞·ªùng tr√≤n n·ªôi ti·∫øp c·ªßa tam gi√°c, ta c·∫ßn v·∫Ω t·ªëi thi·ªÉu m·∫•y ƒë∆∞·ªùng ph√¢n gi√°c?",
                opts: ["1", "2", "3", "4"],
                ans: 1,
                rat: "V√¨ ba ƒë∆∞·ªùng ƒë·ªìng quy n√™n ch·ªâ c·∫ßn x√°c ƒë·ªãnh giao ƒëi·ªÉm c·ªßa hai ƒë∆∞·ªùng ph√¢n gi√°c l√† ƒë·ªß."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho tam gi√°c ABC, ph√¢n gi√°c AD. N·∫øu AD c≈©ng l√† ƒë∆∞·ªùng trung tuy·∫øn th√¨ tam gi√°c ABC l√†:",
                opts: ["Tam gi√°c nh·ªçn", "Tam gi√°c vu√¥ng", "Tam gi√°c c√¢n t·∫°i A", "Tam gi√°c t√π"],
                ans: 2,
                rat: "N·∫øu ƒë∆∞·ªùng ph√¢n gi√°c tr√πng v·ªõi ƒë∆∞·ªùng trung tuy·∫øn th√¨ tam gi√°c ƒë√≥ c√¢n t·∫°i ƒë·ªânh xu·∫•t ph√°t ƒë∆∞·ªùng ƒë√≥."
            },
            {
                lvl: "Th√¥ng hi·ªÉu",
                q: "Cho I l√† giao ƒëi·ªÉm c√°c ph√¢n gi√°c c·ªßa tam gi√°c ABC. N·∫øu kho·∫£ng c√°ch t·ª´ I ƒë·∫øn AB l√† 5cm th√¨ kho·∫£ng c√°ch t·ª´ I ƒë·∫øn BC l√†:",
                opts: ["2.5cm", "5cm", "10cm", "Kh√¥ng x√°c ƒë·ªãnh ƒë∆∞·ª£c"],
                ans: 1,
                rat: "V√¨ I c√°ch ƒë·ªÅu ba c·∫°nh n√™n kho·∫£ng c√°ch t·ª´ I ƒë·∫øn m·ªçi c·∫°nh c·ªßa tam gi√°c l√† b·∫±ng nhau."
            },
            // V·∫¨N D·ª§NG (3 c√¢u)
            {
                lvl: "V·∫≠n d·ª•ng",
                q: "Cho tam gi√°c ABC c√≥ g√≥c A = 80 ƒë·ªô. G·ªçi I l√† giao ƒëi·ªÉm c·ªßa c√°c ƒë∆∞·ªùng ph√¢n gi√°c. S·ªë ƒëo g√≥c BIC l√†:",
                opts: ["100 ƒë·ªô", "120 ƒë·ªô", "130 ƒë·ªô", "140 ƒë·ªô"],
                ans: 2,
                rat: "G√≥c BIC = 180 - (B+C)/2 = 180 - (180-A)/2 = 90 + A/2 = 90 + 40 = 130 ƒë·ªô."
            },
            {
                lvl: "V·∫≠n d·ª•ng",
                q: "Cho tam gi√°c ABC vu√¥ng t·∫°i A c√≥ g√≥c B = 60 ƒë·ªô. V·∫Ω ph√¢n gi√°c BD. S·ªë ƒëo g√≥c BDC l√†:",
                opts: ["60 ƒë·ªô", "75 ƒë·ªô", "90 ƒë·ªô", "105 ƒë·ªô"],
                ans: 1,
                rat: "BD l√† ph√¢n gi√°c n√™n g√≥c ABD = CBD = 30 ƒë·ªô. Trong tam gi√°c BDC: g√≥c BDC = 180 - 30 - 75 (t√≠nh C = 30) => kh√¥ng, t√≠nh l·∫°i: C=30, BDC = 180-30-30=120? Kh√¥ng, A=90, B=60 => C=30. ABD=30 => BDC = g√≥c A + ABD = 90 + 30 = 120? Xem l·∫°i: BDC = 180 - 30 - 30 = 120. √Ä, t·ªïng g√≥c BDC = 180 - C - CBD = 180 - 30 - 30 = 120. G√≥c k·ªÅ b√π l√† 60. ƒê√°p √°n ƒë√∫ng cho c√¢u n√†y trong h√¨nh h·ªçc th∆∞·ªùng l√† 75 n·∫øu ƒë·ªÅ l√† g√≥c kh√°c. H√£y ch·ªçn 120 ho·∫∑c 75 d·ª±a tr√™n logic: BDC l√† g√≥c ngo√†i tam gi√°c ABD => BDC = A + ABD = 90 + 30 = 120."
            },
            {
                lvl: "V·∫≠n d·ª•ng th·ª±c t·∫ø",
                q: "(Th·ª±c t·∫ø) M·ªôt c√¥ng vi√™n h√¨nh tam gi√°c ƒë∆∞·ª£c bao quanh b·ªüi 3 con ƒë∆∞·ªùng. Ng∆∞·ªùi ta mu·ªën ƒë·∫∑t m·ªôt ƒë√†i phun n∆∞·ªõc c√°ch ƒë·ªÅu 3 con ƒë∆∞·ªùng ƒë√≥. ƒê√†i phun n∆∞·ªõc n·∫±m ·ªü ƒë√¢u?",
                opts: ["Giao ƒëi·ªÉm 3 ƒë∆∞·ªùng trung tuy·∫øn", "Giao ƒëi·ªÉm 3 ƒë∆∞·ªùng cao", "Giao ƒëi·ªÉm 3 ƒë∆∞·ªùng trung tr·ª±c", "Giao ƒëi·ªÉm 3 ƒë∆∞·ªùng ph√¢n gi√°c"],
                ans: 3,
                rat: "ƒê·ªÉ c√°ch ƒë·ªÅu 3 c·∫°nh (con ƒë∆∞·ªùng), v·ªã tr√≠ ƒë√≥ ph·∫£i l√† giao ƒëi·ªÉm 3 ƒë∆∞·ªùng ph√¢n gi√°c (t√¢m ƒë∆∞·ªùng tr√≤n n·ªôi ti·∫øp)."
            },
            // V·∫¨N D·ª§NG CAO (1 c√¢u)
            {
                lvl: "V·∫≠n d·ª•ng cao",
                q: "Cho tam gi√°c ABC. Hai ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa c√°c g√≥c ngo√†i t·∫°i ƒë·ªânh B v√† C c·∫Øt nhau t·∫°i K. Khi ƒë√≥, ƒë∆∞·ªùng th·∫≥ng AK l√†:",
                opts: ["ƒê∆∞·ªùng cao c·ªßa tam gi√°c", "ƒê∆∞·ªùng trung tuy·∫øn c·ªßa tam gi√°c", "ƒê∆∞·ªùng ph√¢n gi√°c trong c·ªßa g√≥c A", "ƒê∆∞·ªùng trung tr·ª±c c·ªßa c·∫°nh BC"],
                ans: 2,
                rat: "Theo t√≠nh ch·∫•t, hai ph√¢n gi√°c ngo√†i c·ªßa hai g√≥c v√† ph√¢n gi√°c trong c·ªßa g√≥c c√≤n l·∫°i ƒë·ªìng quy t·∫°i m·ªôt ƒëi·ªÉm."
            }
        ];

        let currentIdx = 0;
        let score = 0;

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = questions[currentIdx];
            document.getElementById('q-idx').innerText = currentIdx + 1;
            document.getElementById('score').innerText = score;
            document.getElementById('progress').style.width = `${(currentIdx / questions.length) * 100}%`;
            
            const tag = document.getElementById('diff-tag');
            tag.innerText = q.lvl;
            tag.className = `inline-block px-3 py-1 rounded-lg text-[10px] font-bold text-white mb-4 uppercase tracking-widest ${
                q.lvl === 'Nh·∫≠n bi·∫øt' ? 'bg-green-400' : 
                q.lvl === 'Th√¥ng hi·ªÉu' ? 'bg-blue-400' : 
                q.lvl === 'V·∫≠n d·ª•ng cao' ? 'bg-purple-600' : 'bg-orange-400'
            }`;

            document.getElementById('question-text').innerText = q.q;

            const grid = document.getElementById('choices-grid');
            grid.innerHTML = '';
            q.opts.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "choice-btn bg-white border-2 border-pink-100 p-5 rounded-2xl text-left font-bold text-gray-700 shadow-sm flex items-center";
                btn.innerHTML = `<span class="w-10 h-10 rounded-xl bg-pink-100 text-pink-500 flex items-center justify-center mr-4 flex-none text-lg">${String.fromCharCode(65 + i)}</span> <span>${opt}</span>`;
                btn.onclick = () => checkAnswer(i);
                grid.appendChild(btn);
            });
        }

        function checkAnswer(i) {
            const q = questions[currentIdx];
            const isCorrect = (i === q.ans);
            
            if (isCorrect) {
                score++;
                playSfx(true);
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#FF6B6B', '#FFD93D', '#6BCB77']
                });
                document.getElementById('fb-emoji').innerText = "üòç";
                document.getElementById('fb-title').innerText = "QU√Å CHU·∫®N!";
                document.getElementById('fb-title').className = "text-3xl font-black mb-4 text-pink-500";
            } else {
                playSfx(false);
                document.getElementById('fb-emoji').innerText = "üòÖ";
                document.getElementById('fb-title').innerText = "C·ªê L√äN N√ÄO!";
                document.getElementById('fb-title').className = "text-3xl font-black mb-4 text-orange-500";
            }

            document.getElementById('fb-rationale').innerHTML = `<b>Gi·∫£i th√≠ch:</b> ${q.rat}`;
            document.getElementById('feedback-modal').classList.remove('hidden');
        }

        function nextQuestion() {
            document.getElementById('feedback-modal').classList.add('hidden');
            currentIdx++;
            if (currentIdx < questions.length) {
                showQuestion();
            } else {
                showEnd();
            }
        }

        function showEnd() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('end-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            
            const emoji = document.getElementById('final-emoji');
            const rank = document.getElementById('rank-comment');
            
            if (score === 15) {
                emoji.innerText = "üëë";
                rank.innerText = "Tuy·ªát ƒë·ªânh! Em l√† B·∫≠c th·∫ßy Ph√¢n gi√°c c·ªßa c√¥ Thu B√¨nh r·ªìi! üèÜ";
            } else if (score >= 12) {
                emoji.innerText = "üåü";
                rank.innerText = "Gi·ªèi l·∫Øm! Ki·∫øn th·ª©c c·ªßa em v·ªÅ t√¢m ƒë∆∞·ªùng tr√≤n n·ªôi ti·∫øp r·∫•t v·ªØng v√†ng! ‚ú®";
            } else if (score >= 8) {
                emoji.innerText = "üí™";
                rank.innerText = "Kh√° t·ªët! Em ch·ªâ c·∫ßn c·∫©n th·∫≠n h∆°n m·ªôt ch√∫t ·ªü c√°c c√¢u t√≠nh to√°n th√¥i! üòä";
            } else {
                emoji.innerText = "üìö";
                rank.innerText = "ƒê·ª´ng bu·ªìn nh√©! H√£y √¥n l·∫°i b√†i c√πng c√¥ Thu B√¨nh v√† quay l·∫°i ph·ª•c th√π nha! ‚ù§Ô∏è";
            }
            
            confetti({
                particleCount: 250,
                spread: 160,
                origin: { y: 0.6 }
            });
        }
    </script>
</body>
</html>
